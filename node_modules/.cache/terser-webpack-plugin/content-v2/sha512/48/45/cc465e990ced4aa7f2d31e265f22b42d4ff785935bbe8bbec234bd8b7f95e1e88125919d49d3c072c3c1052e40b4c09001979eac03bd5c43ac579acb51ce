{"code":"(this[\"webpackJsonpvuexy-react-admin-dashboard\"]=this[\"webpackJsonpvuexy-react-admin-dashboard\"]||[]).push([[160],{2650:function(e,t,a){\"use strict\";a.r(t);var n=a(84),r=a.n(n),s=a(111),l=a(10),c=a(11),o=a(13),i=a(12),m=a(0),u=a.n(m),d=a(1661),p=a(1662),f=a(584),g=a(33),h=a.n(g),w=a(67),b=a(34),x=a(119),v=a(641),A=a(1663),C=a(1664),E=a(1665),y=a(1666),S=a(889),k=a(880),D=a(881),N=a(633),O=a(882),j=a(731),T=a.n(j),_=a(342),P=a(20),M=(a(718),a(848)),F=a.n(M),L=function(e){return u.a.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-between\"},u.a.createElement(\"div\",{className:\"add-new\"},u.a.createElement(x.a.Ripple,{color:\"none\",className:\"bg-gradient-success\",onClick:function(){return e.departemenAdd()}},\"Tambah Departemen\")),u.a.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},u.a.createElement(v.a,{value:e.value,onChange:function(t){return e.handleFilter(t)}}),u.a.createElement(\"div\",{className:\"form-control-position\"},u.a.createElement(_.a,{size:\"15\"}))))},V=function(e){return u.a.createElement(\"div\",{className:\"data-list-action\"},u.a.createElement(x.a.Ripple,{className:\"mr-1 bg-gradient-success\",color:\"none\",size:\"sm\",onClick:function(){return e.isView(e.row,e.row.id,e.row.cff_id)}},\"View\"))},I=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={modalVisible:!1,modalImage:\"\",modalDigimonName:\"\",myProfile:null,modal:!1,modalAdd:!1,id:0,namaDepartemen:\"\",namaDepartemenAdd:\"\",isSweetAlert:!1,sweetAlertTitle:\"Judul\",sweetAlertText:\"Text\",sweetAlertType:\"warning\",isSweetAlertConfirm:!1,sweetAlertTitleConfirm:\"Judul\",sweetAlertTextConfirm:\"Text\",sweetAlertTypeConfirm:\"warning\",columns:[{name:\"Id\",selector:\"id\",sortable:!0,minWidth:\"200px\",cell:function(e){return u.a.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},u.a.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},u.a.createElement(\"span\",{title:e.id,className:\"d-block text-bold-500 text-truncate mb-0\"},e.id)))}},{name:\"Nama Departemen\",selector:\"nama_departemen\",sortable:!0,minWidth:\"200px\",cell:function(e){return u.a.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},u.a.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},u.a.createElement(\"span\",{title:e.nama_departemen,className:\"d-block text-bold-500 text-truncate mb-0\"},e.nama_departemen)))}},{name:\"Actions\",sortable:!0,cell:function(t){return u.a.createElement(u.a.Fragment,null,u.a.createElement(V,{row:t,isView:e.toggleModal}))}}],data:[],filteredData:[],value:\"\"},e.componentDidMount=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.isLogin(\"super_admin\");case 2:return t.next=4,e.tarikDataTable();case 4:case\"end\":return t.stop()}}),t)}))),e.departemenAdd=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(\"Depatemen Add\"),t.next=3,e.toggleModalAdd();case 3:case\"end\":return t.stop()}}),t)}))),e.toggleModalAdd=function(t,a){e.setState((function(e){return{modalAdd:!e.modalAdd}}))},e.toggleModalAddFix=Object(s.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState((function(e){return{modalAdd:!e.modalAdd}})),a=\"\\n        insert into df_master_departement(nama_departemen)\\n        values('\"+e.state.namaDepartemenAdd+\"')\\n    \",t.next=4,h.a.post(w.a,{query:a}).then(function(){var t=Object(s.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.data.response,t.next=3,e.handleAlertConfirm(\"isSweetAlertConfirm\",!0,\"Success\",\"Berhasil tambah departemen\",\"success\");case 3:return t.abrupt(\"return\",t.sent);case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(s.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(\"error : \",a),t.next=3,e.handleAlertConfirm(\"isSweetAlertConfirm\",!0,\"Danger\",\"Gagal tambah nama departemen\",\"danger\");case 3:return t.abrupt(\"return\",t.sent);case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:t.sent;case 5:case\"end\":return t.stop()}}),t)}))),e.toggleModal=function(t,a){e.setState((function(e){return{modal:!e.modal,namaDepartemen:t.nama_departemen,id:t.id}}))},e.toggleModalFix=Object(s.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState((function(e){return{modal:!e.modal}})),a=\"\\n        update df_master_departement\\n        set\\n        nama_departemen = '\"+e.state.namaDepartemen+\"',\\n        update_date = timezone('utc-7', now())\\n        where id = \"+e.state.id+\"\\n    \",t.next=4,h.a.post(w.a,{query:a}).then(function(){var t=Object(s.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.data.response,t.next=3,e.handleAlertConfirm(\"isSweetAlertConfirm\",!0,\"Success\",\"Berhasil ganti nama departemen\",\"success\");case 3:return t.abrupt(\"return\",t.sent);case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(s.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(\"error : \",a),t.next=3,e.handleAlertConfirm(\"isSweetAlertConfirm\",!0,\"Danger\",\"Gagal ganti nama departemen\",\"danger\");case 3:return t.abrupt(\"return\",t.sent);case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:t.sent;case 5:case\"end\":return t.stop()}}),t)}))),e.handleAlertConfirm=function(){var t=Object(s.a)(r.a.mark((function t(a,n,s,l,c){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}e.setState(Object(b.a)({},a,n)),e.setState({sweetAlertTitleConfirm:s,sweetAlertTextConfirm:l,sweetAlertTypeConfirm:c}),t.next=8;break;case 5:return e.setState(Object(b.a)({},a,n)),t.next=8,e.tarikDataTable();case 8:case\"end\":return t.stop()}}),t)})));return function(e,a,n,r,s){return t.apply(this,arguments)}}(),e.handleAlert=function(t,a,n,r,s){a?(e.setState(Object(b.a)({},t,a)),e.setState({sweetAlertTitle:n,sweetAlertText:r,sweetAlertType:s})):e.setState(Object(b.a)({},t,a))},e.isLogin=function(){var t=Object(s.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0==localStorage.getItem(\"account\")||null==localStorage.getItem(\"account\")||JSON.parse(localStorage.getItem(\"account\")).role!==a?P.a.push(\"/pages/login\"):(n=JSON.parse(localStorage.getItem(\"account\")),console.log(\"myProfile\",n),e.setState({myProfile:n}));case 1:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.tarikDataTable=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return\"\\n        select * from df_master_departement order by id asc\\n    \",t.next=3,h.a.post(w.a,{query:\"\\n        select * from df_master_departement order by id asc\\n    \"}).then(function(){var t=Object(s.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.data.response.rows,console.log(\"result query : \",n),console.log(\"query leng :\",n.length),\"\"!=n.length){t.next=7;break}return t.abrupt(\"return\",[]);case 7:e.setState({data:n});case 8:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(\"error : \",e),[]}));case 3:t.sent;case 4:case\"end\":return t.stop()}}),t)}))),e.handleFilter=function(t){var a=t.target.value,n=e.state.data,r=e.state.filteredData;e.setState({value:a}),a.length&&(r=n.filter((function(e){var t=e.id.toLowerCase().startsWith(a.toLowerCase())||e.nama_departemen.toLowerCase().startsWith(a.toLowerCase()),n=e.id.toLowerCase().includes(a.toLowerCase())||e.nama_departemen.toLowerCase().includes(a.toLowerCase());return t||(!t&&n?n:null)})),e.setState({filteredData:r}))},e.viewSS=function(){var e=Object(s.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(\"data row : \",t);case 1:case\"end\":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),e}return Object(c.a)(a,[{key:\"render\",value:function(){var e=this,t=this.state,a=t.data,n=t.columns,r=t.value,s=t.filteredData;return u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,null,u.a.createElement(C.a,null,u.a.createElement(E.a,null,\"Departemen\")),u.a.createElement(y.a,{className:\"rdt_Wrapper\"},u.a.createElement(T.a,{className:\"dataTable-custom\",data:r.length?s:a,columns:n,noHeader:!0,pagination:!0,subHeader:!0,subHeaderComponent:u.a.createElement(L,{value:r,handleFilter:this.handleFilter,departemenAdd:this.departemenAdd})}))),u.a.createElement(S.a,{isOpen:this.state.modal,toggle:this.toggleModal,className:\"modal-dialog-centered\"},u.a.createElement(k.a,{toggle:this.toggleModal,className:\"bg-success\"},\"Edit Nama Departemen\"),u.a.createElement(D.a,{className:\"modal-dialog-centered\"},u.a.createElement(N.a,{for:\"catatan\"},\"Nama Departemen\"),u.a.createElement(v.a,{type:\"text\",name:\"catatan\",id:\"catatan\",placeholder:\"Catatan CC\",value:this.state.namaDepartemen,onChange:function(t){return e.setState({namaDepartemen:t.target.value})}})),u.a.createElement(O.a,null,u.a.createElement(x.a,{color:\"success\",onClick:this.toggleModalFix},\"Ganti nama departemen\"),\" \")),u.a.createElement(S.a,{isOpen:this.state.modalAdd,toggle:this.toggleModalAdd,className:\"modal-dialog-centered\"},u.a.createElement(k.a,{toggle:this.toggleModalAdd,className:\"bg-success\"},\"Tambah Departemen\"),u.a.createElement(D.a,{className:\"modal-dialog-centered\"},u.a.createElement(N.a,{for:\"catatan\"},\"Nama Departemen\"),u.a.createElement(v.a,{type:\"text\",name:\"catatan\",id:\"catatan\",placeholder:\"Nama Departemen\",value:this.state.namaDepartemenAdd,onChange:function(t){return e.setState({namaDepartemenAdd:t.target.value})}})),u.a.createElement(O.a,null,u.a.createElement(x.a,{color:\"success\",onClick:this.toggleModalAddFix},\"Tambah departemen\"),\" \")),u.a.createElement(F.a,{type:this.state.sweetAlertType,title:this.state.sweetAlertTitle,show:this.state.isSweetAlert,onConfirm:function(){return e.handleAlert(\"isSweetAlert\",!1)}},u.a.createElement(\"p\",{className:\"sweet-alert-text\"},this.state.sweetAlertText)),u.a.createElement(F.a,{type:this.state.sweetAlertTypeConfirm,title:this.state.sweetAlertTitleConfirm,show:this.state.isSweetAlertConfirm,onConfirm:function(){return e.handleAlertConfirm(\"isSweetAlertConfirm\",!1)}},u.a.createElement(\"p\",{className:\"sweet-alert-text\"},this.state.sweetAlertTextConfirm)))}}]),a}(u.a.Component),J=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).changeViewPage=function(){var e=Object(s.a)(r.a.mark((function e(t,a){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"add\"!=t){e.next=5;break}return e.next=3,n.setState({addPage:!0,editPage:!1});case 3:e.next=13;break;case 5:if(\"edit\"!=t){e.next=11;break}return s=a,e.next=9,n.setState({addPage:!1,editPage:!0,editData:s});case 9:e.next=13;break;case 11:return e.next=13,n.setState({addPage:!1,editPage:!1});case 13:case\"end\":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={addPage:!1,editPage:!1,editData:null},n}return Object(c.a)(a,[{key:\"render\",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{breadCrumbTitle:\"Departemen\",breadCrumbParent:\"Data\",breadCrumbActive:\"Departemen\"}),u.a.createElement(d.a,null,u.a.createElement(p.a,{sm:\"12\"},u.a.createElement(I,Object.assign({},this.state,this.props,{changeViewPage:this.changeViewPage})))))}}]),a}(u.a.Component);t.default=J}}]);","extractedComments":[]}