{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Row,Col,Spinner}from\"reactstrap\";import Breadcrumbs from\"../../../components/@vuexy/breadCrumbs/BreadCrumb\";import WizardBasic from\"./op-ss-component/WizardBasic\";import WizardIcons from\"./op-ss-component/WizardIcons\";import WizardValidation from\"./op-ss-component/WizardValidation\";import FormWizard from\"./op-ss-component/FormWizard\";import axios from'axios';import{api_query}from\"../../../api/ApiConstant\";import OpSsTable from\"./OpSsTable\";import OpSsCreate from\"./op-ss-component/OpSsCreate\";import OpSsEdit from\"./op-ss-component/OpSsEdit\";import{history}from\"../../../../src/history\";var OpSsPage=/*#__PURE__*/function(_React$Component){_inherits(OpSsPage,_React$Component);var _super=_createSuper(OpSsPage);function OpSsPage(props){var _this;_classCallCheck(this,OpSsPage);_this=_super.call(this,props);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.isLogin('op_df');case 2:case\"end\":return _context.stop();}}},_callee);}));_this.changeViewPage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(typeView,resultEdit){var tmpDataAtasan,tmp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(typeView=='add')){_context2.next=5;break;}_context2.next=3;return _this.setState({addPage:true,editPage:false});case 3:_context2.next=14;break;case 5:if(!(typeView=='edit')){_context2.next=12;break;}//\ntmpDataAtasan=_this.tarikAtasan();tmp=resultEdit;// console.log('new data tmp : ', tmp)\n_context2.next=10;return _this.setState({addPage:false,editPage:true,editData:tmp,dataAtasan:tmpDataAtasan});case 10:_context2.next=14;break;case 12:_context2.next=14;return _this.setState({addPage:false,editPage:false});case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();_this.tarikAtasan=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var sql,result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:sql=\"\\n    select id as value,\\n      name as label,\\n      departement_id\\n    from df_master_user dmu\\n    where departement_id = \"+_this.state.myProfile.departement_id+\"\\n    and job_level = '4'\\n    \";_context4.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(result){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:res=result.data.response.rows;console.log('result query atasan : ',res);if(!(res.length=='')){_context3.next=4;break;}return _context3.abrupt(\"return\",[]);case 4:_context3.next=6;return _this.setState({dataAtasan:res});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref4.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context4.sent;case 4:case\"end\":return _context4.stop();}}},_callee4);}));_this.isLogin=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(role){var myProfile;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}else if(JSON.parse(localStorage.getItem('account')).role!==role){history.push(\"/pages/login\");}else{myProfile=JSON.parse(localStorage.getItem('account'));console.log('myProfile ss : ',myProfile);_this.setState({myProfile:myProfile});}case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref5.apply(this,arguments);};}();_this.state={addPage:false,editPage:false,editData:null,myProfile:null,dataAtasan:[]};return _this;}_createClass(OpSsPage,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.addPage?/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"SS Operator Create\",breadCrumbParent:\"SS\",breadCrumbActive:\"SS Operator Create\"}):this.state.editPage?/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"SS Operator View\",breadCrumbParent:\"SS\",breadCrumbActive:\"SS Operator View\"}):/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"SS Operator\",breadCrumbParent:\"SS\",breadCrumbActive:\"SS Operator\"}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},this.state.addPage?/*#__PURE__*/ // <FormWizard {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\n// <EmployeesAdd {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\nReact.createElement(OpSsCreate,Object.assign({},this.state,this.props,{changeViewPage:this.changeViewPage})):this.state.editPage?/*#__PURE__*/React.createElement(OpSsEdit,Object.assign({},this.state,this.props,{changeViewPage:this.changeViewPage})):/*#__PURE__*/React.createElement(OpSsTable,Object.assign({},this.state,this.props,{changeViewPage:this.changeViewPage})))));}}]);return OpSsPage;}(React.Component);export default OpSsPage;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/ss/op-ss/OpSsPage.js"],"names":["React","Row","Col","Spinner","Breadcrumbs","WizardBasic","WizardIcons","WizardValidation","FormWizard","axios","api_query","OpSsTable","OpSsCreate","OpSsEdit","history","OpSsPage","props","componentDidMount","isLogin","changeViewPage","typeView","resultEdit","setState","addPage","editPage","tmpDataAtasan","tarikAtasan","tmp","editData","dataAtasan","sql","state","myProfile","departement_id","post","query","then","result","res","data","response","rows","console","log","length","catch","err","role","localStorage","getItem","undefined","push","JSON","parse","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport { Row, Col, Spinner } from \"reactstrap\"\nimport Breadcrumbs from \"../../../components/@vuexy/breadCrumbs/BreadCrumb\"\nimport WizardBasic from \"./op-ss-component/WizardBasic\"\nimport WizardIcons from \"./op-ss-component/WizardIcons\"\nimport WizardValidation from \"./op-ss-component/WizardValidation\"\nimport FormWizard from \"./op-ss-component/FormWizard\"\nimport axios from 'axios';\nimport { api_query } from \"../../../api/ApiConstant\"\nimport OpSsTable from \"./OpSsTable\"\nimport OpSsCreate from \"./op-ss-component/OpSsCreate\"\nimport OpSsEdit from \"./op-ss-component/OpSsEdit\"\nimport { history } from \"../../../../src/history\"\n\n\n\nclass OpSsPage extends React.Component {\n  constructor(props){\n      super(props);\n      this.state = {\n        addPage: false,\n        editPage: false,\n        editData: null,\n        myProfile: null,\n        dataAtasan: []\n\n\n\n      }\n  }\n\n  componentDidMount = async() =>{\n    await this.isLogin('op_df');\n  }\n\n  changeViewPage = async(typeView, resultEdit) =>{\n    if (typeView == 'add') {\n        await this.setState({addPage: true, editPage: false})\n    }else if (typeView == 'edit') {\n      //\n      var tmpDataAtasan = this.tarikAtasan();\n      var tmp = resultEdit\n      // console.log('new data tmp : ', tmp)\n      await this.setState({addPage: false, editPage: true, editData: tmp, dataAtasan: tmpDataAtasan})\n    }\n    else{\n        await this.setState({addPage: false, editPage: false})\n    }\n  }\n\n  tarikAtasan = async() =>{\n\n\n\n    let sql = `\n    select id as value,\n      name as label,\n      departement_id\n    from df_master_user dmu\n    where departement_id = `+this.state.myProfile.departement_id+`\n    and job_level = '4'\n    `\n  \n    var result = await axios.post(api_query, {\n                                query : sql\n                            })\n                                .then(async(result) => {\n                                  var res = result.data.response.rows\n                                  console.log('result query atasan : ', res)\n                                  if (res.length == '') {\n                                      return []\n                                  }\n  \n                                  await this.setState({dataAtasan: res})\n  \n                                }).catch(err => {\n                                    console.log('error : ', err)\n                                    return []\n                                })\n      // await this.setState({data: result})\n    }\n  \n  isLogin = async(role) =>{\n    if (localStorage.getItem('account') == undefined || localStorage.getItem('account') == null) {\n      history.push(\"/pages/login\")\n    }else if(JSON.parse(localStorage.getItem('account')).role !== role){\n      history.push(\"/pages/login\")\n    }\n    else{\n      var myProfile = JSON.parse(localStorage.getItem('account'))\n      console.log('myProfile ss : ', myProfile)\n      this.setState({myProfile: myProfile})\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n              {this.state.addPage ?\n                <Breadcrumbs\n                  breadCrumbTitle=\"SS Operator Create\"\n                  breadCrumbParent=\"SS\"\n                  breadCrumbActive=\"SS Operator Create\"\n                />\n              :\n              this.state.editPage ?\n                <Breadcrumbs\n                    breadCrumbTitle=\"SS Operator View\"\n                    breadCrumbParent=\"SS\"\n                    breadCrumbActive=\"SS Operator View\"\n                />\n              :\n                <Breadcrumbs\n                    breadCrumbTitle=\"SS Operator\"\n                    breadCrumbParent=\"SS\"\n                    breadCrumbActive=\"SS Operator\"\n                />\n              }\n\n        <Row>\n          <Col sm=\"12\">\n              {this.state.addPage ?\n                  // <FormWizard {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\n                  // <EmployeesAdd {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\n                  <OpSsCreate {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\n              :\n              this.state.editPage ?\n                <OpSsEdit {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\n              :\n                <OpSsTable {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\n              }\n          </Col>\n        </Row>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default OpSsPage\n"]},"metadata":{},"sourceType":"module"}