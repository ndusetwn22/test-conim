{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\n\nvar actions_1 = require(\"../utils/actions\");\n\nvar eventManager_1 = require(\"../utils/eventManager\");\n\nvar MenuProvider =\n/** @class */\nfunction (_super) {\n  __extends(MenuProvider, _super);\n\n  function MenuProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.childrenRefs = [];\n\n    _this.handleEvent = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      eventManager_1.eventManager.emit(actions_1.DISPLAY_MENU(_this.props.id), e.nativeEvent, __assign({\n        ref: _this.childrenRefs.length === 1 ? _this.childrenRefs[0] : _this.childrenRefs\n      }, _this.props.data));\n    };\n\n    _this.setChildRef = function (ref) {\n      return ref === null || _this.childrenRefs.push(ref);\n    };\n\n    return _this;\n  }\n\n  MenuProvider.prototype.getChildren = function () {\n    var _this = this; // remove all the props specific to the provider\n\n\n    var _a = this.props,\n        id = _a.id,\n        component = _a.component,\n        event = _a.event,\n        children = _a.children,\n        className = _a.className,\n        style = _a.style,\n        storeRef = _a.storeRef,\n        data = _a.data,\n        rest = __rest(_a, [\"id\", \"component\", \"event\", \"children\", \"className\", \"style\", \"storeRef\", \"data\"]); // reset refs\n\n\n    this.childrenRefs = [];\n    return react_1.Children.map(children, function (child) {\n      return react_1.isValidElement(child) ? react_1.cloneElement(child, __assign({}, rest, storeRef ? {\n        ref: _this.setChildRef\n      } : {})) : child;\n    });\n  };\n\n  MenuProvider.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        component = _b.component,\n        render = _b.render,\n        event = _b.event,\n        className = _b.className,\n        style = _b.style;\n    var attributes = (_a = {}, _a[event] = this.handleEvent, _a.className = className, _a.style = style, _a);\n\n    if (typeof render === 'function') {\n      return render(__assign({}, attributes, {\n        children: this.getChildren()\n      }));\n    }\n\n    return react_1.createElement(component, attributes, this.getChildren());\n  };\n\n  MenuProvider.propTypes = {\n    id: prop_types_1.default.oneOfType([prop_types_1.default.string, prop_types_1.default.number]).isRequired,\n    children: prop_types_1.default.node.isRequired,\n    component: prop_types_1.default.oneOfType([prop_types_1.default.node, prop_types_1.default.func]),\n    render: prop_types_1.default.func,\n    event: prop_types_1.default.string,\n    className: prop_types_1.default.string,\n    style: prop_types_1.default.object,\n    storeRef: prop_types_1.default.bool,\n    data: prop_types_1.default.object\n  };\n  MenuProvider.defaultProps = {\n    component: 'div',\n    event: 'onContextMenu',\n    storeRef: true\n  };\n  return MenuProvider;\n}(react_1.Component);\n\nexports.MenuProvider = MenuProvider;","map":{"version":3,"sources":["../../src/components/MenuProvider.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\nvar actions_1 = require(\"../utils/actions\");\nvar eventManager_1 = require(\"../utils/eventManager\");\nvar MenuProvider = /** @class */ (function (_super) {\n    __extends(MenuProvider, _super);\n    function MenuProvider() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.childrenRefs = [];\n        _this.handleEvent = function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            eventManager_1.eventManager.emit(actions_1.DISPLAY_MENU(_this.props.id), e.nativeEvent, __assign({ ref: _this.childrenRefs.length === 1\n                    ? _this.childrenRefs[0]\n                    : _this.childrenRefs }, _this.props.data));\n        };\n        _this.setChildRef = function (ref) {\n            return ref === null || _this.childrenRefs.push(ref);\n        };\n        return _this;\n    }\n    MenuProvider.prototype.getChildren = function () {\n        var _this = this;\n        // remove all the props specific to the provider\n        var _a = this.props, id = _a.id, component = _a.component, event = _a.event, children = _a.children, className = _a.className, style = _a.style, storeRef = _a.storeRef, data = _a.data, rest = __rest(_a, [\"id\", \"component\", \"event\", \"children\", \"className\", \"style\", \"storeRef\", \"data\"]);\n        // reset refs\n        this.childrenRefs = [];\n        return react_1.Children.map(children, function (child) {\n            return react_1.isValidElement(child)\n                ? react_1.cloneElement(child, __assign({}, rest, (storeRef ? { ref: _this.setChildRef } : {})))\n                : child;\n        });\n    };\n    MenuProvider.prototype.render = function () {\n        var _a;\n        var _b = this.props, component = _b.component, render = _b.render, event = _b.event, className = _b.className, style = _b.style;\n        var attributes = (_a = {},\n            _a[event] = this.handleEvent,\n            _a.className = className,\n            _a.style = style,\n            _a);\n        if (typeof render === 'function') {\n            return render(__assign({}, attributes, { children: this.getChildren() }));\n        }\n        return react_1.createElement(component, attributes, this.getChildren());\n    };\n    MenuProvider.propTypes = {\n        id: prop_types_1.default.oneOfType([prop_types_1.default.string, prop_types_1.default.number]).isRequired,\n        children: prop_types_1.default.node.isRequired,\n        component: prop_types_1.default.oneOfType([prop_types_1.default.node, prop_types_1.default.func]),\n        render: prop_types_1.default.func,\n        event: prop_types_1.default.string,\n        className: prop_types_1.default.string,\n        style: prop_types_1.default.object,\n        storeRef: prop_types_1.default.bool,\n        data: prop_types_1.default.object\n    };\n    MenuProvider.defaultProps = {\n        component: 'div',\n        event: 'onContextMenu',\n        storeRef: true\n    };\n    return MenuProvider;\n}(react_1.Component));\nexports.MenuProvider = MenuProvider;\n//# sourceMappingURL=MenuProvider.js.map"]},"metadata":{},"sourceType":"script"}