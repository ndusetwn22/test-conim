{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Dropdown,DropdownToggle,DropdownMenu,DropdownItem}from\"reactstrap\";import classnames from\"classnames\";import{ChevronDown,ChevronRight}from\"react-feather\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{FormattedMessage}from\"react-intl\";import{history}from\"../../../../history\";import navigationConfig from\"../../../../configs/horizontalMenuConfig\";var HorizontalSidebar=/*#__PURE__*/function(_React$Component){_inherits(HorizontalSidebar,_React$Component);var _super=_createSuper(HorizontalSidebar);function HorizontalSidebar(props){var _this;_classCallCheck(this,HorizontalSidebar);_this=_super.call(this,props);_this.openDropdown=function(id){var arr=_this.state.openDropdown;if(!arr.includes(id))arr.push(id);return _this.setState({openDropdown:arr});};_this.closeDropdown=function(id){var arr=_this.state.openDropdown;arr.splice(arr.indexOf(id),1);return _this.setState({openDropdown:arr});};_this.handleItemHover=function(id){_this.setState({itemHover:id});};_this.handleParentHover=function(id){_this.setState({parentHover:id});};_this.updateParentItems=function(id){var mainParent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(mainParent===true){_this.parentItems=[];}if(!_this.parentItems.includes(id)){_this.parentItems.push(id);}if(_this.activeFlag===true){_this.activeParentItems=_this.parentItems;_this.parentItems=[];_this.activeFlag=false;}};_this.handleActiveParent=function(arr){_this.setState({activeParents:arr});_this.activeFlag=false;};_this.renderSubMenu=function(submenu,id){return/*#__PURE__*/React.createElement(DropdownMenu,{tag:\"ul\",className:\"mt-50\",onMouseEnter:function onMouseEnter(e){return e.preventDefault();},modifiers:{setMaxHeight:{enabled:true,fn:function fn(data){var pageHeight=window.innerHeight,ddTop=data.instance.reference.getBoundingClientRect().top,ddHeight=data.popper.height,maxHeight,stylesObj;if(pageHeight-ddTop-ddHeight-28<1){maxHeight=pageHeight-ddTop-25;stylesObj={maxHeight:maxHeight,overflowY:\"auto\"};}return _objectSpread(_objectSpread({},data),{},{styles:_objectSpread({},stylesObj)});}}}},submenu.map(function(child){var CustomAnchorTag=child.type===\"external-link\"?\"a\":Link;if(child.navLink&&child.navLink===_this.props.activePath){_this.activeFlag=true;_this.updateParentItems(id);}var renderChildItems=/*#__PURE__*/React.createElement(React.Fragment,{key:child.id},/*#__PURE__*/React.createElement(\"li\",{className:classnames({active:_this.state.activeParents.includes(child.id)})},/*#__PURE__*/React.createElement(DropdownItem,{className:classnames(\"w-100\",{hover:_this.state.itemHover===child.id,\"has-sub\":child.children,active:child.parentOf&&child.parentOf.includes(_this.props.activePath)||child.navLink&&child.navLink===_this.props.activePath,\"has-active-child\":_this.state.openDropdown.includes(child.id),disabled:child.disabled}),tag:child.navLink?CustomAnchorTag:\"div\",to:child.filterBase?child.filterBase:child.navLink&&child.type===\"item\"?child.navLink:\"#\",href:child.type===\"external-link\"?child.navLink:undefined,target:child.newTab?\"_blank\":undefined,onMouseEnter:function onMouseEnter(){return _this.handleItemHover(child.id);},onMouseLeave:function onMouseLeave(){return _this.handleItemHover(null);}},child.children?/*#__PURE__*/React.createElement(Dropdown,{className:classnames(\"sub-menu w-100\",{}),isOpen:_this.state.openDropdown.includes(child.id),direction:_this.state.openLeft?\"left\":\"right\",toggle:function toggle(){return true;},onMouseEnter:function onMouseEnter(){return _this.openDropdown(child.id);},onMouseLeave:function onMouseLeave(){return _this.closeDropdown(child.id);}},/*#__PURE__*/React.createElement(DropdownToggle,{className:\"d-flex justify-content-between align-items-center item-content\",tag:\"div\",onClick:function onClick(){return _this.closeDropdown(child.id);}},/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-toggle-sub text-truncate\"},/*#__PURE__*/React.createElement(\"span\",{className:\"menu-icon align-bottom mr-1\"},child.icon)),/*#__PURE__*/React.createElement(ChevronRight,{className:\"has-sub-arrow align-middle ml-50\",size:15})),child.children?_this.renderSubMenu(child.children,child.id):null):/*#__PURE__*/React.createElement(\"div\",{className:\"item-content\"},/*#__PURE__*/React.createElement(\"span\",{className:\"menu-icon align-top mr-1\"},child.icon)))));if(child.type===\"external-link\"||child.type===\"item\"// &&\n//   child.permissions &&\n//   child.permissions.includes(this.props.currentUser)\n||child.type===\"dropdown\"||child.permissions===undefined){return renderChildItems;}else if(child.navLink===_this.props.activePath// &&\n// !child.permissions.includes(this.props.currentUser)\n){return _this.redirectUnauthorized();}else{return null;}}));};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.renderDropdown();case 2:case\"end\":return _context.stop();}}},_callee);}));_this.renderDropdown=function(arr){return arr.map(function(item){if(item.type===\"item\"&&item.navLink&&item.navLink===_this.props.activePath){_this.activeFlag=true;_this.updateParentItems(item.id,true);}var CustomAnchorTag=item.type===\"external-link\"?\"a\":Link;return/*#__PURE__*/React.createElement(\"li\",{className:classnames(\"nav-item\",{active:_this.state.activeParents.includes(item.id),hover:_this.state.parentHover===item.id}),key:item.id,ref:function ref(el){return _this.menuDrodpown=el;}},/*#__PURE__*/React.createElement(\"div\",{className:classnames(\"nav-item-wrapper cursor-pointer\",{\"single-item\":item.type===\"item\"}),onMouseEnter:function onMouseEnter(){_this.openDropdown(item.id);_this.handleParentHover(item.id);},onMouseLeave:function onMouseLeave(){_this.closeDropdown(item.id);_this.handleParentHover(null);}},item.children?/*#__PURE__*/React.createElement(Dropdown,{isOpen:_this.state.openDropdown.includes(item.id),className:\"nav-link\",toggle:function toggle(){return _this.openDropdown(item.id);}},/*#__PURE__*/React.createElement(DropdownToggle,{className:\"d-flex align-items-center\",tag:\"div\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-text\"},/*#__PURE__*/React.createElement(\"span\",{className:\"menu-icon align-middle mr-75\"},item.icon),/*#__PURE__*/React.createElement(\"span\",{className:\"menu-title align-middle\"})),/*#__PURE__*/React.createElement(ChevronDown,{className:\"ml-50 align-bottom\",size:15})),_this.updateParentItems(item.id,true),item.children?_this.renderSubMenu(item.children,item.id):null):/*#__PURE__*/React.createElement(CustomAnchorTag,{className:classnames({\"nav-link\":item.type===\"item\",hover:_this.state.parentHover===item.id}),to:item.filterBase?item.filterBase:item.navLink&&item.type===\"item\"?item.navLink:\"#\",href:item.type===\"external-link\"?item.navLink:undefined,target:item.newTab?\"_blank\":undefined},/*#__PURE__*/React.createElement(\"span\",{className:\"menu-icon align-middle mr-75\"},item.icon),/*#__PURE__*/React.createElement(\"span\",{className:\"menu-title align-middle\"}))));});};_this.state={activeParents:[],openDropdown:[],dropdownHeight:\"auto\",itemHover:null,parentHover:null,activeChildUrl:null};_this.activeFlag=false;_this.parentItems=[];_this.activeParentItems=[];_this.redirectUnauthorized=function(){history.push(\"misc/not-authorized\");};return _this;}_createClass(HorizontalSidebar,[{key:\"componentDidMount\",value:function componentDidMount(){this.handleActiveParent(this.activeParentItems);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.activePath!==prevProps.activePath){this.setState({openDropdown:[],parentHover:null});this.handleActiveParent(this.activeParentItems);}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"horizontal-menu-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:classnames(\"header-navbar navbar-expand-sm navbar navbar-horizontal navbar-shadow\",{\"navbar-static\":this.props.navbarType===\"static\",\"fixed-top\":this.props.navbarType===\"sticky\",\"floating-nav\":this.props.navbarType===\"floating\"||![\"static\",\"sticky\",\"floating\"].includes(this.props.navbarType)})},/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-container main-menu-content\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"nav navbar-nav\",id:\"main-menu-navigation\"},this.renderDropdown(navigationConfig)))));}}]);return HorizontalSidebar;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{currentUser:state.auth.login.userRole};};export default connect(mapStateToProps)(HorizontalSidebar);","map":null,"metadata":{},"sourceType":"module"}