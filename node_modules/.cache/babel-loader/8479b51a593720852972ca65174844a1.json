{"ast":null,"code":"import _defineProperty from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar initialState = {\n  chats: [],\n  contacts: [],\n  chatContacts: [],\n  pinned: [],\n  status: \"active\",\n  filteredContacts: [],\n  filteredChats: []\n};\n\nvar chats = function chats() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"GET_CONTACTS\":\n      return _objectSpread({}, state, {\n        chats: action.chats,\n        contacts: action.contacts\n      });\n\n    case \"GET_CHAT_CONTACTS\":\n      return _objectSpread({}, state, {\n        chatContacts: action.chats\n      });\n\n    case \"SEND_MESSAGE\":\n      var sendMsg,\n          newChatContacts,\n          oldChatContactsId = state.chatContacts.map(function (j) {\n        return j.uid;\n      });\n\n      if (state.chats[action.id]) {\n        var oldState = state.chats[action.id].msg;\n        sendMsg = [].concat(_toConsumableArray(oldState), [action.msg]);\n      } else {\n        sendMsg = _objectSpread({}, state.chats, _defineProperty({}, action.id, {\n          isPinned: action.isPinned,\n          msg: [action.msg]\n        }));\n      }\n\n      if (!oldChatContactsId.includes(action.id)) {\n        var extractContactInfo = state.contacts.find(function (k) {\n          return k.uid === action.id;\n        });\n        newChatContacts = state.chatContacts.concat(extractContactInfo);\n      } else {\n        newChatContacts = state.chatContacts;\n      }\n\n      return _objectSpread({}, state, {\n        chats: sendMsg,\n        chatContacts: newChatContacts\n      });\n\n    case \"CHANGE_STATUS\":\n      return _objectSpread({}, state, {\n        status: action.status\n      });\n\n    case \"MARK_AS_SEEN\":\n      var marked = state.chats[action.id];\n      marked !== undefined && marked.msg.forEach(function (msg) {\n        msg.isSeen = true;\n      });\n      return _objectSpread({}, state);\n\n    case \"SEARCH_CONTACTS\":\n      if (action.query.length) {\n        var filteredContacts = state.contacts.filter(function (contact) {\n          return contact.displayName.toLowerCase().includes(action.query.toLowerCase());\n        });\n        var filteredChats = state.chatContacts.filter(function (chat) {\n          return chat.displayName.toLowerCase().includes(action.query.toLowerCase());\n        });\n        return _objectSpread({}, state, {\n          filteredContacts: filteredContacts,\n          filteredChats: filteredChats\n        });\n      } else {\n        return _objectSpread({}, state);\n      }\n\n    case \"SET_PINNED\":\n      var pinned = state.chats[action.id];\n\n      if (pinned) {\n        pinned.isPinned = action.value;\n        state.chatContacts.sort(function (a, b) {\n          return b.uid - a.uid;\n        });\n        return _objectSpread({}, state);\n      } else {\n        return _objectSpread({}, state);\n      }\n\n    default:\n      return _objectSpread({}, state);\n  }\n};\n\nexport default chats;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/redux/reducers/chat/chats.js"],"names":["initialState","chats","contacts","chatContacts","pinned","status","filteredContacts","filteredChats","state","action","type","sendMsg","newChatContacts","oldChatContactsId","map","j","uid","id","oldState","msg","isPinned","includes","extractContactInfo","find","k","concat","marked","undefined","forEach","isSeen","query","length","filter","contact","displayName","toLowerCase","chat","value","sort","a","b"],"mappings":"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","sourcesContent":["const initialState = {\n  chats: [],\n  contacts: [],\n  chatContacts: [],\n  pinned: [],\n  status: \"active\",\n  filteredContacts: [],\n  filteredChats: []\n}\n\nconst chats = (state = initialState, action) => {\n  switch (action.type) {\n    case \"GET_CONTACTS\":\n      return { ...state, chats: action.chats, contacts: action.contacts }\n    case \"GET_CHAT_CONTACTS\":\n      return { ...state, chatContacts: action.chats }\n    case \"SEND_MESSAGE\":\n      let sendMsg,\n        newChatContacts,\n        oldChatContactsId = state.chatContacts.map(j => j.uid)\n      if (state.chats[action.id]) {\n        let oldState = state.chats[action.id].msg\n        sendMsg = [...oldState, action.msg]\n      } else {\n        sendMsg = {\n          ...state.chats,\n          [action.id]: {\n            isPinned: action.isPinned,\n            msg: [action.msg]\n          }\n        }\n      }\n      if (!oldChatContactsId.includes(action.id)) {\n        let extractContactInfo = state.contacts.find(k => k.uid === action.id)\n        newChatContacts = state.chatContacts.concat(extractContactInfo)\n      } else {\n        newChatContacts = state.chatContacts\n      }\n      return { ...state, chats: sendMsg, chatContacts: newChatContacts }\n    case \"CHANGE_STATUS\":\n      return { ...state, status: action.status }\n    case \"MARK_AS_SEEN\":\n      let marked = state.chats[action.id]\n      marked !== undefined &&\n        marked.msg.forEach(msg => {\n          msg.isSeen = true\n        })\n      return { ...state }\n    case \"SEARCH_CONTACTS\":\n      if (action.query.length) {\n        let filteredContacts = state.contacts.filter(contact => {\n          return contact.displayName\n            .toLowerCase()\n            .includes(action.query.toLowerCase())\n        })\n        let filteredChats = state.chatContacts.filter(chat => {\n          return chat.displayName\n            .toLowerCase()\n            .includes(action.query.toLowerCase())\n        })\n        return { ...state, filteredContacts, filteredChats }\n      } else {\n        return { ...state }\n      }\n    case \"SET_PINNED\":\n      let pinned = state.chats[action.id]\n      if (pinned) {\n        pinned.isPinned = action.value\n        state.chatContacts.sort((a, b) => b.uid - a.uid)\n        return { ...state }\n      } else {\n        return { ...state }\n      }\n    default:\n      return { ...state }\n  }\n}\n\nexport default chats\n"]},"metadata":{},"sourceType":"module"}