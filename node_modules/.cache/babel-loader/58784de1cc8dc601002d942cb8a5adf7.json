{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Card,CardBody,CardHeader,CardTitle,Badge,Input,Button}from\"reactstrap\";import DataTable from\"react-data-table-component\";import{Star,Search,Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight}from\"react-feather\";import axios from'axios';import{api_query}from\"../../api/ApiConstant\";import{Link,NavLink}from\"react-router-dom\";import{Spinner}from\"reactstrap\";import{connect}from\"react-redux\";// import { changeRole } from \"../../redux/actions/auth/loginActions\"\nvar dummy_profile=require('../../assets/img/profile/user-uploads/user-07.jpg');// local\nvar dummy_profile='https://www.attendit.net/images/easyblog_shared/July_2018/7-4-18/b2ap3_large_totw_network_profile_400.jpg';//url/internet\nvar CustomHeader=function CustomHeader(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"add-new\"},/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"bg-gradient-success\",onClick:function onClick(){return props.employeesAddPage();}},\"Tambah Data\")),/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},/*#__PURE__*/React.createElement(Input,{value:props.value,onChange:function onChange(e){return props.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:\"15\"}))));};var ActionsComponent=function ActionsComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button,{className:\"bg-gradient-success\",color:\"none\",size:'sm',style:{margin:5},onClick:function onClick(){console.log('props : ',props);return props.isEdit(props.row);}},\" Edit\"),/*#__PURE__*/React.createElement(Button,{className:\"bg-gradient-danger\",color:\"none\",size:'sm',style:{margin:5},onClick:function onClick(){console.log('props : ',props);return props.isDelete(props.row);}},\" Delete\"));};var DataTableDigimon=/*#__PURE__*/function(_React$Component){_inherits(DataTableDigimon,_React$Component);var _super=_createSuper(DataTableDigimon);function DataTableDigimon(){var _this;_classCallCheck(this,DataTableDigimon);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={columns:[{name:\"Name\",selector:\"name\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.first_name+' '+row.last_name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.first_name,\" \",row.last_name)));}},{name:\"Gender\",selector:\"gender\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.gender=='M'?'Laki - Laki':'Perempuan',className:\"d-block text-bold-500 text-truncate mb-0\"},row.gender=='M'?'Laki - Laki':'Perempuan')));}},{name:\"No Karyawan\",selector:\"emp_no\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.emp_no,className:\"d-block text-bold-500 text-truncate mb-0\"},row.emp_no)));}},{name:\"Department\",selector:\"dept_name\",// ini harus sama kyk title\nsortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.dept_name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.dept_name)));}},{name:\"Position\",selector:\"position\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.position,className:\"d-block text-bold-500 text-truncate mb-0\"},row.position)));}},{name:\"Profile\",selector:\"image_profile\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-img ml-xl-0 ml-2\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-fluid rounded-circle\",height:\"36\",width:\"36\",src:row.image_profile==null||row.image_profile==\"\"?dummy_profile:row.image_profile,alt:row.image_profile==null||row.image_profile==\"\"?dummy_profile:row.image_profile// src={row.img}\n// alt={row.name}\n})));}},{name:\"Actions\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(ActionsComponent,{row:row,isEdit:_this.isEdit,isDelete:_this.isDelete});}}],data:[],tarikDataInterval:null,date:new Date().toLocaleString(),digit:0,isLoading:false,filteredData:[],role:_this.props.role,value:\"\"};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.next=3;return _this.tarikData();case 3:_context.next=5;return _this.tarikDataInterval();case 5:// localStorage.setItem('user', 'admin')\nconsole.log('my role : ',_this.state.role);_this.setState({isLoading:false});// var tarikData = setInterval(this.tarikData(), 10000); // runs every 5 seconds.\n// await this.setState({tarikDataInterval: tarikData})\ncase 7:case\"end\":return _context.stop();}}},_callee);}));_this.isEdit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(result){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('edit : ',result);_context2.next=3;return _this.props.changeViewPage('edit',result);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.isDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(result){var sql;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log('delete : ',result);sql=\"\\n        delete from employees_new where id = \"+result.id+\";\\n    \";_context3.next=4;return axios.post(api_query,{query:sql}).then(function(result){console.log('result query delete : ',result);return;}).catch(function(err){return;});case 4:result=_context3.sent;_context3.next=7;return _this.tarikData();case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.tarikDataInterval=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// Untuk refresh data setiap skala detik\nsetInterval(function(){_this.tarikData();},20000);setInterval(function(){_this.setState({date:new Date().toLocaleString()});},1000);case 2:case\"end\":return _context4.stop();}}},_callee4);}));_this.componentDidUpdate=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(prevProps,prevState,snapShot){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x3,_x4,_x5){return _ref5.apply(this,arguments);};}();_this.tarikData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var sql,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log('tarik data');// let sql = `\n//     select * from employees_new limit 10000;\n// `\nsql=\"\\n    select\\ten.id,\\n            en.first_name, \\n            en.last_name, \\n            en.emp_no, \\n            en.gender,\\n            en.image_profile,\\n            dn.id as id_dept_name,\\n            dn.dept_name,\\n            pm.id as id_position,\\n            pm.position\\n        from dept_emp_new den\\n        join employees_new en  \\n        on  en.id = den.emp_id\\n        join departments_new dn \\n        on dn.id = den.dept_id \\n        join position_management pm \\n        on pm.id  = den.position_id\\n    \";_context6.next=4;return axios.post(api_query,{query:sql}).then(function(result){var res=result.data.response;console.log('result : ',result);if(res.length==''){return[];}// console.log('result : ', (result.data))\nreturn res;}).catch(function(err){console.log('error : ',err);return[];});case 4:result=_context6.sent;_context6.next=7;return _this.setState({data:result});case 7:case\"end\":return _context6.stop();}}},_callee6);}));_this.employeesAddPage=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.props.changeViewPage('add');case 2:case\"end\":return _context7.stop();}}},_callee7);}));_this.handleFilter=function(e){var value=e.target.value;var data=_this.state.data;var filteredData=_this.state.filteredData;_this.setState({value:value});if(value.length){filteredData=data.filter(function(item){// all_name gabisa karena ada spasi\nvar all_name=item.first_name+' '+item.last_name;var gender=item.gender;var emp_no=item.emp_no;var dept_name=item.dept_name;var position=item.position;if(emp_no==null||emp_no==undefined){emp_no='';}else{emp_no=item.emp_no;}if(gender=='M'){gender='Laki - Laki';}else{gender='Perempuan';}// if(dept_name.split(\" \").length > 1){\n// }\n// console.log('ITEM : ', item)\nvar startsWithCondition=item.first_name.toLowerCase().startsWith(value.toLowerCase())||item.last_name.toLowerCase().startsWith(value.toLowerCase())||gender.toLowerCase().startsWith(value.toLowerCase())||// all_name.toLowerCase().startsWith(value.toLowerCase()) ||\nemp_no.toString().toLowerCase().includes(value.toLowerCase())||dept_name.toLowerCase().startsWith(value.toLowerCase())||position.toLowerCase().startsWith(value.toLowerCase());// item.emp_no.toString().toLowerCase().startsWith(value.toLowerCase())\n// item.name.toLowerCase().startsWith(value.toLowerCase())\n// item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.status.toLowerCase().startsWith(value.toLowerCase())\nvar includesCondition=item.first_name.toLowerCase().includes(value.toLowerCase())||item.last_name.toLowerCase().includes(value.toLowerCase())||gender.toLowerCase().includes(value.toLowerCase())||// all_name.toLowerCase().startsWith(value.toLowerCase()) ||\nemp_no.toString().toLowerCase().includes(value.toLowerCase())||dept_name.toLowerCase().startsWith(value.toLowerCase())||position.toLowerCase().startsWith(value.toLowerCase());// item.emp_no.toString().toLowerCase().includes(value.toLowerCase())\n// item.name.toLowerCase().includes(value.toLowerCase())\n// item.date.toLowerCase().includes(value.toLowerCase()) ||\n// item.email.toLowerCase().includes(value.toLowerCase()) ||\n// item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n// item.status.toLowerCase().includes(value.toLowerCase())\nif(startsWithCondition){return startsWithCondition;}else if(!startsWithCondition&&includesCondition){return includesCondition;}else return null;});_this.setState({filteredData:filteredData});}};return _this;}_createClass(DataTableDigimon,[{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,columns=_this$state.columns,value=_this$state.value,filteredData=_this$state.filteredData;return/*#__PURE__*/React.createElement(React.Fragment,null,!this.state.isLoading?/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Employees Table (\",this.state.date,\")\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:value.length?filteredData:data,columns:columns,noHeader:true,pagination:true,subHeader:true,subHeaderComponent:/*#__PURE__*/React.createElement(CustomHeader,{value:value,handleFilter:this.handleFilter,employeesAddPage:this.employeesAddPage})}))):/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Employees Table (\",this.state.date,\")\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Spinner,{color:\"none\"})))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.role!==state.role){return{role:props.role};}// Return null if the state hasn't changed\nreturn null;}}]);return DataTableDigimon;}(React.Component);// export default DataTableDigimon\nvar mapStateToProps=function mapStateToProps(state){return{role:state.auth.login.userRole};};export default connect(mapStateToProps,{// changeRole \n})(DataTableDigimon);","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/employees/DataTableEmployees.js"],"names":["React","Card","CardBody","CardHeader","CardTitle","Badge","Input","Button","DataTable","Star","Search","Edit","Trash","ChevronDown","Plus","Check","ChevronLeft","ChevronRight","axios","api_query","Link","NavLink","Spinner","connect","dummy_profile","require","CustomHeader","props","employeesAddPage","value","e","handleFilter","ActionsComponent","margin","console","log","isEdit","row","isDelete","DataTableDigimon","state","columns","name","selector","sortable","minWidth","cell","first_name","last_name","gender","emp_no","dept_name","position","image_profile","data","tarikDataInterval","date","Date","toLocaleString","digit","isLoading","filteredData","role","componentDidMount","setState","tarikData","result","changeViewPage","sql","id","post","query","then","catch","err","setInterval","componentDidUpdate","prevProps","prevState","snapShot","res","response","length","target","filter","item","all_name","undefined","startsWithCondition","toLowerCase","startsWith","toString","includes","includesCondition","Component","mapStateToProps","auth","login","userRole"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  CardTitle,\r\n  Badge,\r\n  Input,\r\n  Button\r\n} from \"reactstrap\"\r\nimport DataTable from \"react-data-table-component\"\r\nimport { Star, Search, \r\n    Edit,\r\n    Trash,\r\n    ChevronDown,\r\n    Plus,\r\n    Check,\r\n    ChevronLeft,\r\n    ChevronRight } from \"react-feather\"\r\nimport axios from 'axios'\r\nimport { api_query } from \"../../api/ApiConstant\"\r\nimport { Link, NavLink } from \"react-router-dom\"\r\nimport {Spinner} from \"reactstrap\"\r\nimport { connect } from \"react-redux\"\r\n// import { changeRole } from \"../../redux/actions/auth/loginActions\"\r\n\r\nvar dummy_profile = require('../../assets/img/profile/user-uploads/user-07.jpg') // local\r\nvar dummy_profile = 'https://www.attendit.net/images/easyblog_shared/July_2018/7-4-18/b2ap3_large_totw_network_profile_400.jpg' //url/internet\r\n\r\n\r\nconst CustomHeader = props => {\r\n  return (\r\n    <div className=\"d-flex flex-wrap justify-content-between\">\r\n      <div className=\"add-new\">\r\n        <Button.Ripple color=\"none\" className=\"bg-gradient-success\" onClick={() => props.employeesAddPage()}>Tambah Data</Button.Ripple>\r\n        {/* <Link to=\"/\">\r\n          <Button color=\"none\" className=\"bg-gradient-success\">Pindah</Button>\r\n        </Link> */}\r\n      </div>\r\n      <div className=\"position-relative has-icon-left mb-1\">\r\n        <Input value={props.value} onChange={e => props.handleFilter(e)} />\r\n        <div className=\"form-control-position\">\r\n          <Search size=\"15\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ActionsComponent = props => {\r\n    return (\r\n      <div className=\"data-list-action\">\r\n        <Button className=\"bg-gradient-success\" color=\"none\" size={'sm'}  style={{margin: 5}}\r\n          onClick={()=> { \r\n            console.log('props : ', props); \r\n            return props.isEdit(props.row)\r\n           }}> Edit \r\n        </Button>\r\n\r\n        <Button className=\"bg-gradient-danger\" color=\"none\" size={'sm'} style={{margin: 5}}\r\n          onClick={()=> { \r\n            console.log('props : ', props); \r\n            return props.isDelete(props.row)\r\n           }}> Delete \r\n        </Button>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\nclass DataTableDigimon extends React.Component {\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.role !== state.role) {\r\n      return {\r\n        role: props.role\r\n      }\r\n    }\r\n    // Return null if the state hasn't changed\r\n    return null\r\n  }\r\n\r\n  state = {\r\n    columns: [\r\n      {\r\n        name: \"Name\",\r\n        selector: \"name\",\r\n        sortable: true,\r\n        minWidth: \"200px\",\r\n        cell: row => (\r\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\r\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\r\n              <span\r\n                title={row.first_name+' '+row.last_name}\r\n                className=\"d-block text-bold-500 text-truncate mb-0\">\r\n                {row.first_name} {row.last_name}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        name: \"Gender\",\r\n        selector: \"gender\",\r\n        sortable: true,\r\n        minWidth: \"200px\",\r\n        cell: row => (\r\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\r\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\r\n              <span\r\n                title={row.gender == 'M' ? 'Laki - Laki' : 'Perempuan'}\r\n                className=\"d-block text-bold-500 text-truncate mb-0\">\r\n                {row.gender == 'M' ? 'Laki - Laki' : 'Perempuan'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        name: \"No Karyawan\",\r\n        selector: \"emp_no\",\r\n        sortable: true,\r\n        minWidth: \"200px\",\r\n        cell: row => (\r\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\r\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\r\n              <span\r\n                title={row.emp_no}\r\n                className=\"d-block text-bold-500 text-truncate mb-0\">\r\n                {row.emp_no}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        name: \"Department\",\r\n        selector: \"dept_name\", // ini harus sama kyk title\r\n        sortable: true,\r\n        minWidth: \"200px\",\r\n        cell: row => (\r\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\r\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\r\n              <span\r\n                title={row.dept_name}\r\n                className=\"d-block text-bold-500 text-truncate mb-0\">\r\n                {row.dept_name}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        name: \"Position\",\r\n        selector: \"position\",\r\n        sortable: true,\r\n        minWidth: \"200px\",\r\n        cell: row => (\r\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\r\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\r\n              <span\r\n                title={row.position}\r\n                className=\"d-block text-bold-500 text-truncate mb-0\">\r\n                {row.position}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        name: \"Profile\",\r\n        selector: \"image_profile\",\r\n        sortable: true,\r\n        minWidth: \"200px\",\r\n        cell: row => (\r\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\r\n            <div className=\"user-img ml-xl-0 ml-2\">\r\n              <img\r\n                className=\"img-fluid rounded-circle\"\r\n                height=\"36\"\r\n                width=\"36\"\r\n                src={row.image_profile == null || row.image_profile == \"\" ? dummy_profile:row.image_profile}\r\n                alt={row.image_profile == null || row.image_profile == \"\" ? dummy_profile:row.image_profile}\r\n                // src={row.img}\r\n                // alt={row.name}\r\n              />\r\n            </div>\r\n          </div>\r\n        )\r\n      },\r\n      {\r\n        name: \"Actions\",\r\n        sortable: true,\r\n        cell: row => (\r\n          <ActionsComponent\r\n            row={row}\r\n            isEdit={this.isEdit}\r\n            isDelete={this.isDelete}\r\n          />\r\n        )\r\n      }\r\n    ],\r\n    data: [],\r\n    tarikDataInterval : null,\r\n    date: new Date().toLocaleString(),\r\n    digit: 0,\r\n    isLoading: false,\r\n    filteredData: [],\r\n    role: this.props.role,\r\n    value: \"\"\r\n  }\r\n\r\n  componentDidMount=async()=>{\r\n    \r\n    this.setState({isLoading: true});\r\n    await this.tarikData();\r\n    await this.tarikDataInterval();\r\n    // localStorage.setItem('user', 'admin')\r\n    console.log('my role : ', this.state.role)\r\n    this.setState({isLoading: false});\r\n    // var tarikData = setInterval(this.tarikData(), 10000); // runs every 5 seconds.\r\n    // await this.setState({tarikDataInterval: tarikData})\r\n  }\r\n\r\n  isEdit = async(result) => {\r\n    console.log('edit : ', result)\r\n    await this.props.changeViewPage('edit', result)\r\n  }\r\n\r\n  isDelete = async(result) =>{\r\n    console.log('delete : ', result)\r\n\r\n    let sql = `\r\n        delete from employees_new where id = `+result.id+`;\r\n    `\r\n    var result = await axios.post(api_query, {\r\n                                query : sql\r\n                            })\r\n                              .then(result => {\r\n                                console.log('result query delete : ', result)\r\n                                return\r\n                              }).catch(err => {\r\n                                return\r\n                              })\r\n    await this.tarikData();\r\n  }\r\n\r\n  tarikDataInterval = async() =>{\r\n        // Untuk refresh data setiap skala detik\r\n\r\n        setInterval(()=>{\r\n          this.tarikData();\r\n        }, 20000);\r\n\r\n        setInterval(()=>{\r\n          this.setState({\r\n            date: new Date().toLocaleString()\r\n          })\r\n        },1000)\r\n        \r\n  }\r\n\r\n  // componentWillUnmount=async()=>{\r\n  //   // clearInterval(this.state.tarikDataInterval);\r\n  // }\r\n\r\n  componentDidUpdate=async(prevProps, prevState, snapShot)=>{\r\n    // console.log('prevProps', prevProps)\r\n    // if (prevState.data.length < this.state.data.length || prevState.data.length > this.state.data.length) {\r\n    //   console.log('didUpdate')\r\n    // }\r\n    // console.log('prevState data : ', prevState.data.length)\r\n  }\r\n\r\n\r\n  tarikData = async() =>{\r\n    console.log('tarik data')\r\n    // let sql = `\r\n    //     select * from employees_new limit 10000;\r\n    // `\r\n\r\n    let sql = `\r\n    select\ten.id,\r\n            en.first_name, \r\n            en.last_name, \r\n            en.emp_no, \r\n            en.gender,\r\n            en.image_profile,\r\n            dn.id as id_dept_name,\r\n            dn.dept_name,\r\n            pm.id as id_position,\r\n            pm.position\r\n        from dept_emp_new den\r\n        join employees_new en  \r\n        on  en.id = den.emp_id\r\n        join departments_new dn \r\n        on dn.id = den.dept_id \r\n        join position_management pm \r\n        on pm.id  = den.position_id\r\n    `\r\n    var result = await axios.post(api_query, {\r\n                                query : sql\r\n                            })\r\n                                .then(result => {\r\n                                let res = result.data.response\r\n                                console.log('result : ', result)\r\n                                if (res.length == '') {\r\n                                    return []\r\n                                }\r\n                                // console.log('result : ', (result.data))\r\n                                return res;\r\n                            }).catch(err => {\r\n                                console.log('error : ', err)\r\n                                return []\r\n                            })\r\n    await this.setState({data: result})\r\n    }\r\n\r\n  employeesAddPage = async() =>{\r\n      // console.log('props', this.props)\r\n      await this.props.changeViewPage('add')\r\n  }\r\n\r\n  handleFilter = e => {\r\n    let value = e.target.value\r\n    let data = this.state.data\r\n    let filteredData = this.state.filteredData\r\n    this.setState({ value })\r\n\r\n    if (value.length) {\r\n      filteredData = data.filter(item => {\r\n        \r\n        // all_name gabisa karena ada spasi\r\n        var all_name = item.first_name + ' ' + item.last_name\r\n        var gender = item.gender\r\n        var emp_no = item.emp_no\r\n        var dept_name = item.dept_name\r\n        var position = item.position\r\n        if (emp_no == null || emp_no == undefined) {\r\n          emp_no = ''\r\n        }else{emp_no = item.emp_no}\r\n        if (gender == 'M') {\r\n            gender = 'Laki - Laki'\r\n        }else {\r\n          gender = 'Perempuan'\r\n        }\r\n        // if(dept_name.split(\" \").length > 1){\r\n\r\n        // }\r\n        // console.log('ITEM : ', item)\r\n        let startsWithCondition =\r\n          item.first_name.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          item.last_name.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          gender.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          // all_name.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          emp_no.toString().toLowerCase().includes(value.toLowerCase()) ||\r\n          dept_name.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          position.toLowerCase().startsWith(value.toLowerCase())\r\n          // item.emp_no.toString().toLowerCase().startsWith(value.toLowerCase())\r\n          // item.name.toLowerCase().startsWith(value.toLowerCase())\r\n          // item.date.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          // item.email.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          // item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          // item.status.toLowerCase().startsWith(value.toLowerCase())\r\n        let includesCondition =\r\n          item.first_name.toLowerCase().includes(value.toLowerCase()) ||\r\n          item.last_name.toLowerCase().includes(value.toLowerCase()) ||\r\n          gender.toLowerCase().includes(value.toLowerCase()) ||\r\n          // all_name.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          emp_no.toString().toLowerCase().includes(value.toLowerCase()) ||\r\n          dept_name.toLowerCase().startsWith(value.toLowerCase()) ||\r\n          position.toLowerCase().startsWith(value.toLowerCase())\r\n          // item.emp_no.toString().toLowerCase().includes(value.toLowerCase())\r\n          // item.name.toLowerCase().includes(value.toLowerCase())\r\n          // item.date.toLowerCase().includes(value.toLowerCase()) ||\r\n          // item.email.toLowerCase().includes(value.toLowerCase()) ||\r\n          // item.revenue.toLowerCase().includes(value.toLowerCase()) ||\r\n          // item.status.toLowerCase().includes(value.toLowerCase())\r\n\r\n        if (startsWithCondition) {\r\n          return startsWithCondition\r\n        } else if (!startsWithCondition && includesCondition) {\r\n          return includesCondition\r\n        } else return null\r\n      })\r\n      this.setState({ filteredData })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { data, columns, value, filteredData } = this.state\r\n    return (\r\n        <>\r\n        \r\n{!this.state.isLoading?\r\n            <Card>\r\n                <CardHeader>\r\n                <CardTitle>Employees Table ({this.state.date})</CardTitle>\r\n                </CardHeader>\r\n                <CardBody className=\"rdt_Wrapper\">\r\n                <DataTable\r\n                className=\"dataTable-custom\"\r\n                data={value.length ? filteredData : data}\r\n                columns={columns}\r\n                noHeader\r\n                pagination\r\n                subHeader\r\n                subHeaderComponent={\r\n                <CustomHeader value={value} handleFilter={this.handleFilter} employeesAddPage={this.employeesAddPage}/>\r\n                }\r\n            />\r\n                </CardBody>\r\n            </Card>\r\n:\r\n            <Card>\r\n                <CardHeader>\r\n                <CardTitle>Employees Table ({this.state.date})</CardTitle>\r\n                </CardHeader>\r\n                <CardBody className=\"rdt_Wrapper\">\r\n                  <div className=\"text-center\">\r\n                    <Spinner color=\"none\"/>\r\n                  </div>\r\n                </CardBody>\r\n            </Card>\r\n\r\n}\r\n\r\n            {/* {this.state.isLoading?\r\n              <div className=\"text-center\">\r\n                <Spinner color=\"primary\" className=\"bg-gradient-success\"/>\r\n              </div>\r\n            :null} */}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n// export default DataTableDigimon\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    role: state.auth.login.userRole\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { \r\n  // changeRole \r\n})(DataTableDigimon)\r\n"]},"metadata":{},"sourceType":"module"}