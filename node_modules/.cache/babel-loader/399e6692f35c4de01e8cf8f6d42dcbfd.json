{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{api_query}from\"../../../../api/ApiConstant\";import{Card,CardBody,CardHeader,CardTitle,Badge,Input,Button,Row,Col,Label,FormGroup}from\"reactstrap\";import*as Icon from\"react-feather\";import StatisticsCard from\"../../../../components/@vuexy/statisticsCard/StatisticsCard\";import Breadcrumbs from\"../../../../components/@vuexy/breadCrumbs/BreadCrumb\";// import StatisticsCard from \"../../../../../\"\nimport DataTable from\"react-data-table-component\";import Flatpickr from\"react-flatpickr\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import{Star,Search,Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight}from\"react-feather\";import axios from'axios';// import ModalDigimon from \"./ModalDigimon\"\n// import { history } from \"../../../src/history\"\nimport{history}from\"../../../../../src/history\";import Spinner from\"../../../../components/@vuexy/spinner/Fallback-spinner\";import ReactExport from\"react-data-export\";import Chart from\"react-apexcharts\";import{Settings}from\"react-feather\";import Select from\"react-select\";var ExcelFile=ReactExport.ExcelFile;var ExcelSheet=ReactExport.ExcelFile.ExcelSheet;var ExcelColumn=ReactExport.ExcelFile.ExcelColumn;var CustomHeader=function CustomHeader(props){return/*#__PURE__*/ (// <div className=\"d-flex flex-wrap justify-content-between\">\nReact.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-between\"},/*#__PURE__*/React.createElement(ExcelFile,{filename:\"SS Online\",element:/*#__PURE__*/React.createElement(Button,{color:\"none\",className:\"bg-gradient-success\"},\"Download xlsx\")},/*#__PURE__*/React.createElement(ExcelSheet,{data:props.dataCsv,name:\"List SS\"},/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Nomor SS\",value:\"nomor_ss\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Nama pengusul\",value:\"pengusul_1\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Nama pengusul 2\",value:\"pengusul_2\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Departemen Pengusul\",value:\"nama_departemen\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Tema\",value:\"tema\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Lokasi\",value:\"lokasi\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Departemen SS\",value:\"departement_terdampak\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Permasalahan\",value:\"permasalahan\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Improvement\",value:\"improvement\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Biaya\",value:\"biaya\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Biaya Uraian\",value:\"biaya_uraian\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Keuntungan\",value:\"keuntungan\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Keuntungan Uraian\",value:\"keuntungan_uraian\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Tanggal dibuat\",value:\"tgl\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Status\",value:\"status_deskripsi\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Closed Date\",value:\"closed_date\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Change Control\",value:\"change_control\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Nomor CC\",value:\"nomor_cc\"}),/*#__PURE__*/React.createElement(ExcelColumn,{label:\"Jenis Saving\",value:\"jenis_saving\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},/*#__PURE__*/React.createElement(Input,{value:props.value,onChange:function onChange(e){return props.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:\"15\"})))));};var $primary=\"#7367F0\",$success=\"#28C76F\",$danger=\"#EA5455\",$warning=\"#FF9F43\",$info=\"#00cfe8\",$primary_light=\"#9c8cfc\",$warning_light=\"#FFC085\",$danger_light=\"#f29292\",$info_light=\"#1edec5\",$stroke_color=\"#b9c3cd\",$label_color=\"#e7eef7\",$purple=\"#df87f2\",$white=\"#fff\";var MstdDashboardSsDept=/*#__PURE__*/function(_React$Component){_inherits(MstdDashboardSsDept,_React$Component);var _super=_createSuper(MstdDashboardSsDept);function MstdDashboardSsDept(){var _this;_classCallCheck(this,MstdDashboardSsDept);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLoading:false,options:{chart:{toolbar:{show:false},animations:{enabled:false}},stroke:{curve:\"smooth\",dashArray:[0,8],width:[4,2]},grid:{borderColor:$label_color},legend:{show:false},colors:[$danger_light,$stroke_color],fill:{type:\"gradient\",gradient:{shade:\"dark\",inverseColors:false,gradientToColors:[$primary,$stroke_color],shadeIntensity:1,type:\"horizontal\",opacityFrom:1,opacityTo:1,stops:[0,100,100,100]}},markers:{size:0,hover:{size:5}},xaxis:{labels:{style:{colors:$stroke_color}},axisTicks:{show:false},categories:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Des\"],axisBorder:{show:false},tickPlacement:\"on\"},yaxis:{tickAmount:5,labels:{style:{color:$stroke_color},formatter:function formatter(val){// return val > 999 ? (val / 1000).toFixed(1) + \"k\" : val\n// {this.state.keuntungan > 999999999 ? (this.state.keuntungan/1000000000).toFixed(1).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + ' M': this.state.keuntungan.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\n//   return val > 999999 ? (val / 1000000).toFixed(0) + \" kk\" : val\nreturn val>999999999?(val/1000000000).toFixed(1).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+' M':val>999999?(val/1000000).toFixed(1).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+' jt':val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");}}},tooltip:{x:{show:false}}},series:[{name:\"This Year\",data:[0,0,0,0,0,0,0,0,0,0,0,0]},{name:\"Last Year\",data:[0,0,0,0,0,0,0,0,0,0,0,0]}],seriesColumn:[{name:'Current Year',data:[76,85,101,98,87,105,91,114,94,44,0,0]},{name:'Last Year',data:[44,55,57,56,61,58,63,60,66,100,0,0]}],optionsColumn:{chart:{type:'bar',height:350},plotOptions:{bar:{horizontal:false,columnWidth:'30%',endingShape:'rounded'}},dataLabels:{enabled:false},stroke:{show:true,width:2,colors:['transparent']},xaxis:{categories:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Des']},yaxis:{title:{// text: '$ (thousands)'\ntext:'Total SS'}},fill:{opacity:1},tooltip:{y:{// formatter: function (val) {\n//   return \"$ \" + val + \" thousands\"\nformatter:function formatter(val){return val+\" SS\";}}}},modalVisible:false,modalImage:'',modalDigimonName:'',dataDepartemen:[],deptSelected:null,deptLabel:'',myProfile:null,value:\"\",keuntungan:0,done:0,keuntunganPS:0,donePS:0,keuntunganHS:0,doneHS:0,kDiversification:0,kYield:0,kLeadtime:0,kGreen:0,kDefect:0,kOF:0,kSafety:0,kBrft:0,kCylce:0,kOee:0,kRework:0,kMttr:0,kCustomer:0,k2Rm:0,k2Pm:0,k2Bs:0,k2Capacity:0,k2LeadTime:0,k2Process:0,k2Yield:0,k2Energy:0,k2Water:0,k2Logistic:0,k2Repair:0,k2Adm:0,k2Others:0,date:new Date(),basicPicker:new Date(),basicPicker2:new Date(),startDate:new Date(),endDate:new Date(),cYear:new Date(),lYear:new Date()};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var date,firstDay,lastDay,dummy,dummy2,firstDay2,lastDay2,cYear,lYear,lDate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.setState({isLoading:true});case 2:_context.next=4;return _this.isLogin('mstd_df');case 4:date=new Date();_context.next=7;return new Date(date.getFullYear(),date.getMonth(),2).toISOString().split('T')[0];case 7:firstDay=_context.sent;_context.next=10;return new Date(date.getFullYear(),date.getMonth()+1,1).toISOString().split('T')[0];case 10:lastDay=_context.sent;_context.next=13;return new Date(date.getFullYear(),date.getMonth(),1);case 13:dummy=_context.sent;_context.next=16;return new Date(date.getFullYear(),date.getMonth()+1,0);case 16:dummy2=_context.sent;_context.next=19;return new Date(date.getFullYear(),date.getMonth(),2).toISOString().split('T')[0].split('-')[2];case 19:firstDay2=_context.sent;_context.next=22;return new Date(date.getFullYear(),date.getMonth()+1,1).toISOString().split('T')[0].split('-')[2];case 22:lastDay2=_context.sent;cYear=date.getFullYear();lYear=date.getFullYear()-1;lDate=date.getDay();_context.next=28;return _this.setState({cYear:cYear,lYear:lYear});case 28:_context.next=30;return _this.setState({startDate:firstDay,endDate:lastDay});case 30:_context.next=32;return _this.setState({basicPicker:dummy,basicPicker2:dummy2});case 32:_context.next=34;return _this.tarikDepartemen();case 34:_context.next=36;return _this.tarikSaving();case 36:_context.next=38;return _this.tarikCount();case 38:_context.next=40;return _this.tarikSavingPS();case 40:_context.next=42;return _this.tarikCountPS();case 42:_context.next=44;return _this.tarikSavingHS();case 44:_context.next=46;return _this.tarikCountHS();case 46:_context.next=48;return _this.tarikCountKategori();case 48:_context.next=50;return _this.tarikCountKategori2();case 50:_context.next=52;return _this.tarikGarisChart();case 52:_context.next=54;return _this.tarikColumnChart();case 54:_context.next=56;return _this.setState({isLoading:false});case 56:case\"end\":return _context.stop();}}},_callee);}));_this.tarikDepartemen=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var sql,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:sql=\"\\n    select id as value,\\n      nama_departemen as label\\n      from df_master_departement dmd\\n      order by id asc \\n    \";_context3.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(result){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:res=result.data.response.rows;console.log('result query departemen : ',res);if(!(res.length=='')){_context2.next=4;break;}return _context2.abrupt(\"return\",[]);case 4:_context2.next=6;return _this.setState({dataDepartemen:res});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref3.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context3.sent;case 4:case\"end\":return _context3.stop();}}},_callee3);}));_this.tarikGarisChart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var sql,result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:// where closed_date >= '2021-01-01'\n// and\tclosed_date < '2021-12-31'\nsql=\"\\n        select  coalesce(sum(a.cjan),0) cjan,\\n                coalesce(sum(a.cfeb), 0) cfeb,\\n                coalesce(sum(a.cmar), 0) cmar,\\n                coalesce(sum(a.capr), 0) capr,\\n                coalesce(sum(a.cmay), 0) cmay,\\n                coalesce(sum(a.cjun), 0) cjun,\\n                coalesce(sum(a.cjul), 0) cjul,\\n                coalesce(sum(a.caug), 0) caug,\\n                coalesce(sum(a.csep), 0) csep,\\n                coalesce(sum(a.coct), 0) coct,\\n                coalesce(sum(a.cnov), 0) cnov,\\n                coalesce(sum(a.cdes), 0) cdes,\\n                coalesce(sum(a.ljan),0) ljan,\\n                coalesce(sum(a.lfeb), 0) lfeb,\\n                coalesce(sum(a.lmar), 0) lmar,\\n                coalesce(sum(a.lapr), 0) lapr,\\n                coalesce(sum(a.lmay), 0) lmay,\\n                coalesce(sum(a.ljun), 0) ljun,\\n                coalesce(sum(a.ljul), 0) ljul,\\n                coalesce(sum(a.laug), 0) laug,\\n                coalesce(sum(a.lsep), 0) lsep,\\n                coalesce(sum(a.loct), 0) loct,\\n                coalesce(sum(a.lnov), 0) lnov,\\n                coalesce(sum(a.ldes), 0) ldes\\n            from\\n            (select dss.keuntungan,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-01-01' and dss.closed_date < '\"+_this.state.cYear+\"-01-31' then dss.keuntungan else 0 end as cjan,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-02-01' and dss.closed_date < '\"+_this.state.cYear+\"-02-28' then dss.keuntungan else 0 end as cfeb,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-03-01' and dss.closed_date < '\"+_this.state.cYear+\"-03-31' then dss.keuntungan else 0 end as cmar,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-04-01' and dss.closed_date < '\"+_this.state.cYear+\"-04-30' then dss.keuntungan else 0 end as capr,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-05-01' and dss.closed_date < '\"+_this.state.cYear+\"-05-31' then dss.keuntungan else 0 end as cmay,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-06-01' and dss.closed_date < '\"+_this.state.cYear+\"-06-30' then dss.keuntungan else 0 end as cjun,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-07-01' and dss.closed_date < '\"+_this.state.cYear+\"-07-31' then dss.keuntungan else 0 end as cjul,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-08-01' and dss.closed_date < '\"+_this.state.cYear+\"-08-31' then dss.keuntungan else 0 end as caug,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-09-01' and dss.closed_date < '\"+_this.state.cYear+\"-09-30' then dss.keuntungan else 0 end as csep,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-10-01' and dss.closed_date < '\"+_this.state.cYear+\"-10-31' then dss.keuntungan else 0 end as coct,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-11-01' and dss.closed_date < '\"+_this.state.cYear+\"-11-30' then dss.keuntungan else 0 end as cnov,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-12-01' and dss.closed_date < '\"+_this.state.cYear+\"-12-31' then dss.keuntungan else 0 end as cdes,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-01-01' and dss.closed_date < '\"+_this.state.lYear+\"-01-31' then dss.keuntungan else 0 end as ljan,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-02-01' and dss.closed_date < '\"+_this.state.lYear+\"-02-28' then dss.keuntungan else 0 end as lfeb,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-03-01' and dss.closed_date < '\"+_this.state.lYear+\"-03-31' then dss.keuntungan else 0 end as lmar,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-04-01' and dss.closed_date < '\"+_this.state.lYear+\"-04-30' then dss.keuntungan else 0 end as lapr,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-05-01' and dss.closed_date < '\"+_this.state.lYear+\"-05-31' then dss.keuntungan else 0 end as lmay,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-06-01' and dss.closed_date < '\"+_this.state.lYear+\"-06-30' then dss.keuntungan else 0 end as ljun,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-07-01' and dss.closed_date < '\"+_this.state.lYear+\"-07-31' then dss.keuntungan else 0 end as ljul,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-08-01' and dss.closed_date < '\"+_this.state.lYear+\"-08-31' then dss.keuntungan else 0 end as laug,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-09-01' and dss.closed_date < '\"+_this.state.lYear+\"-09-30' then dss.keuntungan else 0 end as lsep,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-10-01' and dss.closed_date < '\"+_this.state.lYear+\"-10-31' then dss.keuntungan else 0 end as loct,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-11-01' and dss.closed_date < '\"+_this.state.lYear+\"-11-30' then dss.keuntungan else 0 end as lnov,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-12-01' and dss.closed_date < '\"+_this.state.lYear+\"-12-31' then dss.keuntungan else 0 end as ldes\\n            from df_suggestion_system dss\\n            where dss.ss_status_id = 6\\n            and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n            ) a\\n    \";// console.log('garis sql :', sql)\n_context5.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(result){var res,series,tmp,thisYear,lastYear;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\nconsole.log('result tarik garis : ',res);if(!(res.length=='')){_context4.next=6;break;}return _context4.abrupt(\"return\",[]);case 6:series=[{name:\"This Year\",data:[100000000,200000000,0,0,0,0,0,0,0,0,0,0]},{name:\"Last Year\",data:[50000000,100000000,0,0,0,0,0,0,0,0,0,0]}];tmp=[];thisYear={name:\"This Year\",data:[res[0].cjan,res[0].cfeb,res[0].cmar,res[0].capr,res[0].cmay,res[0].cjun,res[0].cjul,res[0].caug,res[0].csep,res[0].coct,res[0].cnov,res[0].cdes]};lastYear={name:\"Last Year\",data:[res[0].ljan,res[0].lfeb,res[0].lmar,res[0].lapr,res[0].lmay,res[0].ljun,res[0].ljul,res[0].laug,res[0].lsep,res[0].loct,res[0].lnov,res[0].ldes]};tmp.push(thisYear);tmp.push(lastYear);_context4.next=14;return _this.setState({series:tmp});case 14:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref5.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context5.sent;case 4:case\"end\":return _context5.stop();}}},_callee5);}));_this.tarikColumnChart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var sql,result;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:// where closed_date >= '2021-01-01'\n// and\tclosed_date < '2021-12-31'\nsql=\"\\n        select  \\n              coalesce(sum(a.cjan), 0) cjan,\\n              coalesce(sum(a.cfeb), 0) cfeb,\\n              coalesce(sum(a.cmar), 0) cmar,\\n              coalesce(sum(a.capr), 0) capr,\\n              coalesce(sum(a.cmay), 0) cmay,\\n              coalesce(sum(a.cjun), 0) cjun,\\n              coalesce(sum(a.cjul), 0) cjul,\\n              coalesce(sum(a.caug), 0) caug,\\n              coalesce(sum(a.csep), 0) csep,\\n              coalesce(sum(a.coct), 0) coct,\\n              coalesce(sum(a.cnov), 0) cnov,\\n              coalesce(sum(a.cdes), 0) cdes,\\n              coalesce(sum(a.ljan), 0) ljan,\\n              coalesce(sum(a.lfeb), 0) lfeb,\\n              coalesce(sum(a.lmar), 0) lmar,\\n              coalesce(sum(a.lapr), 0) lapr,\\n              coalesce(sum(a.lmay), 0) lmay,\\n              coalesce(sum(a.ljun), 0) ljun,\\n              coalesce(sum(a.ljul), 0) ljul,\\n              coalesce(sum(a.laug), 0) laug,\\n              coalesce(sum(a.lsep), 0) lsep,\\n              coalesce(sum(a.loct), 0) loct,\\n              coalesce(sum(a.lnov), 0) lnov,\\n              coalesce(sum(a.ldes), 0) ldes\\n            from\\n            (select dss.id,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-01-01' and dss.closed_date < '\"+_this.state.cYear+\"-01-31' then count(dss.id) else null end as cjan,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-02-01' and dss.closed_date < '\"+_this.state.cYear+\"-02-28' then count(dss.id) else null end as cfeb,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-03-01' and dss.closed_date < '\"+_this.state.cYear+\"-03-31' then count(dss.id) else null end as cmar,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-04-01' and dss.closed_date < '\"+_this.state.cYear+\"-04-30' then count(dss.id) else null end as capr,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-05-01' and dss.closed_date < '\"+_this.state.cYear+\"-05-31' then count(dss.id) else null end as cmay,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-06-01' and dss.closed_date < '\"+_this.state.cYear+\"-06-30' then count(dss.id) else null end as cjun,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-07-01' and dss.closed_date < '\"+_this.state.cYear+\"-07-31' then count(dss.id) else null end as cjul,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-08-01' and dss.closed_date < '\"+_this.state.cYear+\"-08-31' then count(dss.id) else null end as caug,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-09-01' and dss.closed_date < '\"+_this.state.cYear+\"-09-30' then count(dss.id) else null end as csep,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-10-01' and dss.closed_date < '\"+_this.state.cYear+\"-10-31' then count(dss.id) else null end as coct,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-11-01' and dss.closed_date < '\"+_this.state.cYear+\"-11-30' then count(dss.id) else null end as cnov,\\n            case when dss.closed_date >= '\"+_this.state.cYear+\"-12-01' and dss.closed_date < '\"+_this.state.cYear+\"-12-31' then count(dss.id) else null end as cdes,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-01-01' and dss.closed_date < '\"+_this.state.lYear+\"-01-31' then count(dss.id) else null end as ljan,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-02-01' and dss.closed_date < '\"+_this.state.lYear+\"-02-28' then count(dss.id) else null end as lfeb,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-03-01' and dss.closed_date < '\"+_this.state.lYear+\"-03-31' then count(dss.id) else null end as lmar,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-04-01' and dss.closed_date < '\"+_this.state.lYear+\"-04-30' then count(dss.id) else null end as lapr,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-05-01' and dss.closed_date < '\"+_this.state.lYear+\"-05-31' then count(dss.id) else null end as lmay,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-06-01' and dss.closed_date < '\"+_this.state.lYear+\"-06-30' then count(dss.id) else null end as ljun,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-07-01' and dss.closed_date < '\"+_this.state.lYear+\"-07-31' then count(dss.id) else null end as ljul,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-08-01' and dss.closed_date < '\"+_this.state.lYear+\"-08-31' then count(dss.id) else null end as laug,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-09-01' and dss.closed_date < '\"+_this.state.lYear+\"-09-30' then count(dss.id) else null end as lsep,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-10-01' and dss.closed_date < '\"+_this.state.lYear+\"-10-31' then count(dss.id) else null end as loct,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-11-01' and dss.closed_date < '\"+_this.state.lYear+\"-11-30' then count(dss.id) else null end as lnov,\\n            case when dss.closed_date >= '\"+_this.state.lYear+\"-12-01' and dss.closed_date < '\"+_this.state.lYear+\"-12-31' then count(dss.id) else null end as ldes\\n            from df_suggestion_system dss\\n            where dss.ss_status_id = 6\\n            and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n            group by dss.id\\n            ) a\\n    \";// console.log('garis sql :', sql)\n_context7.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(result){var res,seriesColumn,tmp,thisYear,lastYear;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\nconsole.log('result tarik garis : ',res);if(!(res.length=='')){_context6.next=6;break;}return _context6.abrupt(\"return\",[]);case 6:seriesColumn=[{name:'Current Year',data:[0,0,0,0,0,0,0,0,0,0,0,0]},{name:'Last Year',data:[0,0,0,0,0,0,0,0,0,0,0,0]}];tmp=[];thisYear={name:\"Current Year\",data:[res[0].cjan,res[0].cfeb,res[0].cmar,res[0].capr,res[0].cmay,res[0].cjun,res[0].cjul,res[0].caug,res[0].csep,res[0].coct,res[0].cnov,res[0].cdes]};lastYear={name:\"Last Year\",data:[res[0].ljan,res[0].lfeb,res[0].lmar,res[0].lapr,res[0].lmay,res[0].ljun,res[0].ljul,res[0].laug,res[0].lsep,res[0].loct,res[0].lnov,res[0].ldes]};tmp.push(lastYear);tmp.push(thisYear);_context6.next=14;return _this.setState({seriesColumn:tmp});case 14:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x3){return _ref7.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context7.sent;case 4:case\"end\":return _context7.stop();}}},_callee7);}));_this.numberWithCommas=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(x){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:return _context8.abrupt(\"return\",x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\"));case 1:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x4){return _ref8.apply(this,arguments);};}();_this.handleChange=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(date){var tmp;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return _this.setState({basicPicker:date});case 2:_context9.next=4;return new Date(date).toISOString().split('T')[0];case 4:tmp=_context9.sent;console.log('temp : ',tmp);_context9.next=8;return _this.setState({startDate:tmp});case 8:_context9.next=10;return _this.reRunChart();case 10:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x5){return _ref9.apply(this,arguments);};}();_this.handleChange2=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(date){var tmp;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _this.setState({basicPicker2:date});case 2:_context10.next=4;return new Date(date).toISOString().split('T')[0];case 4:tmp=_context10.sent;console.log('temp : ',tmp);_context10.next=8;return _this.setState({endDate:tmp});case 8:_context10.next=10;return _this.reRunChart();case 10:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x6){return _ref10.apply(this,arguments);};}();_this.reRunChart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this.tarikSaving();case 2:_context11.next=4;return _this.tarikCount();case 4:_context11.next=6;return _this.tarikSavingPS();case 6:_context11.next=8;return _this.tarikCountPS();case 8:_context11.next=10;return _this.tarikSavingHS();case 10:_context11.next=12;return _this.tarikCountHS();case 12:_context11.next=14;return _this.tarikCountKategori();case 14:_context11.next=16;return _this.tarikCountKategori2();case 16:_context11.next=18;return _this.tarikGarisChart();case 18:_context11.next=20;return _this.tarikColumnChart();case 20:case\"end\":return _context11.stop();}}},_callee11);}));_this.isLogin=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(role){var myProfile;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}else if(JSON.parse(localStorage.getItem('account')).role!==role){history.push(\"/pages/login\");}else{myProfile=JSON.parse(localStorage.getItem('account'));console.log('myProfile',myProfile);_this.setState({myProfile:myProfile});}case 1:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x7){return _ref12.apply(this,arguments);};}();_this.tarikSaving=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){var sql,result;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:// where closed_date >= '2021-01-01'\n// and\tclosed_date < '2021-12-31'\nsql=\"\\n        select coalesce(sum(dss.biaya), 0) biaya, coalesce(sum(dss.keuntungan), 0) keuntungan\\n        from df_suggestion_system dss \\n        where closed_date >= '\"+_this.state.startDate+\"'\\n        and\\tclosed_date < '\"+_this.state.endDate+\"'\\n        and ss_status_id = 6\\n        and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n    \";_context14.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(result){var res;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\n// console.log('result query saving ytd : ', res)\n// console.log('query leng ytd :', res.length)\nif(!(res.length=='')){_context13.next=5;break;}return _context13.abrupt(\"return\",[]);case 5:_this.setState({keuntungan:res[0].keuntungan});case 6:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x8){return _ref14.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context14.sent;case 4:case\"end\":return _context14.stop();}}},_callee14);}));_this.tarikCount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var sql,result;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:sql=\"\\n        select coalesce(count(dss.id), 0) jumlah_done\\n        from df_suggestion_system dss \\n        where closed_date >= '\"+_this.state.startDate+\"'\\n        and\\tclosed_date < '\"+_this.state.endDate+\"'\\n        and ss_status_id = 6\\n        and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n    \";_context16.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(result){var res;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\n// console.log('result query saving ytd : ', res)\n// console.log('query leng ytd :', res.length)\nif(!(res.length=='')){_context15.next=5;break;}return _context15.abrupt(\"return\",[]);case 5:_this.setState({done:res[0].jumlah_done});case 6:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x9){return _ref16.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context16.sent;case 4:case\"end\":return _context16.stop();}}},_callee16);}));_this.tarikSavingPS=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var sql,result;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:// where closed_date >= '2021-01-01'\n// and\tclosed_date < '2021-12-31'\nsql=\"\\n        select coalesce(sum(dss.biaya), 0) biaya, coalesce(sum(dss.keuntungan), 0) keuntungan\\n        from df_suggestion_system dss \\n        where closed_date >= '\"+_this.state.startDate+\"'\\n        and\\tclosed_date < '\"+_this.state.endDate+\"'\\n        and ss_status_id = 6\\n        and jenis_saving = 'PS'\\n        and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n    \";_context18.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(result){var res;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\n// console.log('result query saving ytd : ', res)\n// console.log('query leng ytd :', res.length)\nif(!(res.length=='')){_context17.next=5;break;}return _context17.abrupt(\"return\",[]);case 5:_this.setState({keuntunganPS:res[0].keuntungan});case 6:case\"end\":return _context17.stop();}}},_callee17);}));return function(_x10){return _ref18.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context18.sent;case 4:case\"end\":return _context18.stop();}}},_callee18);}));_this.tarikCountPS=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(){var sql,result;return _regeneratorRuntime.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:sql=\"\\n        select coalesce(count(dss.id), 0) jumlah_done\\n        from df_suggestion_system dss \\n        where closed_date >= '\"+_this.state.startDate+\"'\\n        and\\tclosed_date < '\"+_this.state.endDate+\"'\\n        and ss_status_id = 6\\n        and jenis_saving = 'PS'\\n        and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n    \";_context20.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(result){var res;return _regeneratorRuntime.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\n// console.log('result query saving ytd : ', res)\n// console.log('query leng ytd :', res.length)\nif(!(res.length=='')){_context19.next=5;break;}return _context19.abrupt(\"return\",[]);case 5:_this.setState({donePS:res[0].jumlah_done});case 6:case\"end\":return _context19.stop();}}},_callee19);}));return function(_x11){return _ref20.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context20.sent;case 4:case\"end\":return _context20.stop();}}},_callee20);}));_this.tarikSavingHS=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(){var sql,result;return _regeneratorRuntime.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:// where closed_date >= '2021-01-01'\n// and\tclosed_date < '2021-12-31'\nsql=\"\\n        select coalesce(sum(dss.biaya), 0) biaya, coalesce(sum(dss.keuntungan), 0) keuntungan\\n        from df_suggestion_system dss \\n        where closed_date >= '\"+_this.state.startDate+\"'\\n        and\\tclosed_date < '\"+_this.state.endDate+\"'\\n        and ss_status_id = 6\\n        and jenis_saving = 'HS'\\n        and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n    \";_context22.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(result){var res;return _regeneratorRuntime.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\n// console.log('result query saving ytd : ', res)\n// console.log('query leng ytd :', res.length)\nif(!(res.length=='')){_context21.next=5;break;}return _context21.abrupt(\"return\",[]);case 5:_this.setState({keuntunganHS:res[0].keuntungan});case 6:case\"end\":return _context21.stop();}}},_callee21);}));return function(_x12){return _ref22.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context22.sent;case 4:case\"end\":return _context22.stop();}}},_callee22);}));_this.tarikCountHS=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){var sql,result;return _regeneratorRuntime.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:sql=\"\\n        select coalesce(count(dss.id), 0) jumlah_done\\n        from df_suggestion_system dss \\n        where closed_date >= '\"+_this.state.startDate+\"'\\n        and\\tclosed_date < '\"+_this.state.endDate+\"'\\n        and ss_status_id = 6\\n        and jenis_saving = 'HS'\\n        and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n    \";_context24.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(result){var res;return _regeneratorRuntime.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\n// console.log('result query saving ytd : ', res)\n// console.log('query leng ytd :', res.length)\nif(!(res.length=='')){_context23.next=5;break;}return _context23.abrupt(\"return\",[]);case 5:_this.setState({doneHS:res[0].jumlah_done});case 6:case\"end\":return _context23.stop();}}},_callee23);}));return function(_x13){return _ref24.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context24.sent;case 4:case\"end\":return _context24.stop();}}},_callee24);}));_this.tarikCountKategori=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(){var sql,result;return _regeneratorRuntime.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:sql=\"\\n    select  coalesce(sum(a.divers),0) divers,\\n            coalesce(sum(a.yield), 0) yield, \\n            coalesce(sum(a.leadtime), 0) leadtime, \\n            coalesce(sum(a.green), 0) green, \\n            coalesce(sum(a.defect), 0) defect,\\n            coalesce(sum(a.order_fullfillment), 0) order_fullfillment, \\n            coalesce(sum(a.safety), 0) safety, \\n            coalesce(sum(a.brft), 0) brft, \\n            coalesce(sum(a.cycle_time), 0) cycle_time, \\n            coalesce(sum(a.oee), 0) oee,\\n            coalesce(sum(a.rework), 0) rework, \\n            coalesce(sum(a.mttr), 0) mttr, \\n            coalesce(sum(a.customer), 0) customer\\n        from\\n        (select dss.ss_kategori_id,\\n        case when dss.ss_kategori_id = 1 then 1 else 0 end as divers,\\n        case when dss.ss_kategori_id = 2 then 1 else 0 end as yield,\\n        case when dss.ss_kategori_id = 3 then 1 else 0 end as leadtime,\\n        case when dss.ss_kategori_id = 4 then 1 else 0 end as green,\\n        case when dss.ss_kategori_id = 5 then 1 else 0 end as defect,\\n        case when dss.ss_kategori_id = 6 then 1 else 0 end as order_fullfillment,\\n        case when dss.ss_kategori_id = 7 then 1 else 0 end as safety,\\n        case when dss.ss_kategori_id = 8 then 1 else 0 end as brft,\\n        case when dss.ss_kategori_id = 9 then 1 else 0 end as cycle_time,\\n        case when dss.ss_kategori_id = 10 then 1 else 0 end as oee,\\n        case when dss.ss_kategori_id = 11 then 1 else 0 end as rework,\\n        case when dss.ss_kategori_id = 12 then 1 else 0 end as mttr,\\n        case when dss.ss_kategori_id = 13 then 1 else 0 end as customer\\n        from df_suggestion_system dss\\n        left join df_ss_kategori dsk\\n        on dss.ss_kategori_id = dsk.id \\n        where dss.closed_date >= '\"+_this.state.startDate+\"'\\n        and\\tdss.closed_date < '\"+_this.state.endDate+\"'\\n        and dss.ss_status_id = 6\\n        and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n        ) a\\n    \";_context26.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref26=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(result){var res;return _regeneratorRuntime.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\n// console.log('result query saving ytd : ', res)\n// console.log('query leng ytd :', res.length)\nif(!(res.length=='')){_context25.next=5;break;}return _context25.abrupt(\"return\",[]);case 5:_this.setState({kDiversification:res[0].divers,kYield:res[0].yield,kLeadtime:res[0].leadtime,kGreen:res[0].green,kDefect:res[0].defect,kOF:res[0].order_fullfillment,kSafety:res[0].safety,kBrft:res[0].brft,kCylce:res[0].cycle_time,kOee:res[0].oee,kRework:res[0].rework,kMttr:res[0].mttr,kCustomer:res[0].customer});case 6:case\"end\":return _context25.stop();}}},_callee25);}));return function(_x14){return _ref26.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context26.sent;case 4:case\"end\":return _context26.stop();}}},_callee26);}));_this.tarikCountKategori2=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee28(){var sql,result;return _regeneratorRuntime.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:sql=\"\\n  select  coalesce(sum(a.rm),0) rm,\\n          coalesce(sum(a.pm), 0) pm, \\n          coalesce(sum(a.bs), 0) bs, \\n          coalesce(sum(a.capacity), 0) capacity, \\n          coalesce(sum(a.leadtime), 0) leadtime,\\n          coalesce(sum(a.process), 0) process, \\n          coalesce(sum(a.yield), 0) yield, \\n          coalesce(sum(a.energy), 0) energy, \\n          coalesce(sum(a.water), 0) water, \\n          coalesce(sum(a.logistic), 0) logistic,\\n          coalesce(sum(a.repair), 0) repair, \\n          coalesce(sum(a.adm), 0) adm, \\n          coalesce(sum(a.others1), 0) others1\\n      from\\n      (select dss.ss_kategori_2_id,\\n      case when dss.ss_kategori_2_id = 1 then 1 else 0 end as rm,\\n      case when dss.ss_kategori_2_id = 2 then 1 else 0 end as pm,\\n      case when dss.ss_kategori_2_id = 3 then 1 else 0 end as bs,\\n      case when dss.ss_kategori_2_id = 4 then 1 else 0 end as capacity,\\n      case when dss.ss_kategori_2_id = 5 then 1 else 0 end as leadtime,\\n      case when dss.ss_kategori_2_id = 6 then 1 else 0 end as process,\\n      case when dss.ss_kategori_2_id = 7 then 1 else 0 end as yield,\\n      case when dss.ss_kategori_2_id = 8 then 1 else 0 end as energy,\\n      case when dss.ss_kategori_2_id = 9 then 1 else 0 end as water,\\n      case when dss.ss_kategori_2_id = 10 then 1 else 0 end as logistic,\\n      case when dss.ss_kategori_2_id = 11 then 1 else 0 end as repair,\\n      case when dss.ss_kategori_2_id = 12 then 1 else 0 end as adm,\\n      case when dss.ss_kategori_2_id = 13 then 1 else 0 end as others1\\n      from df_suggestion_system dss\\n      left join df_ss_kategori_2 dsk\\n      on dss.ss_kategori_2_id = dsk.id \\n      where dss.closed_date >= '\"+_this.state.startDate+\"'\\n      and\\tdss.closed_date < '\"+_this.state.endDate+\"'\\n      and dss.ss_status_id = 6\\n      and departement_terdampak_id = \"+_this.state.deptSelected+\"\\n      ) a\\n  \";//   console.log('sql cat 2 :', sql)\n_context28.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref28=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee27(result){var res;return _regeneratorRuntime.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\n// console.log('result query saving ytd : ', res)\n// console.log('query leng ytd :', res.length)\nif(!(res.length=='')){_context27.next=5;break;}return _context27.abrupt(\"return\",[]);case 5:_this.setState({k2Rm:res[0].rm,k2Pm:res[0].pm,k2Bs:res[0].bs,k2Capacity:res[0].capacity,k2LeadTime:res[0].leadtime,k2Process:res[0].process,k2Yield:res[0].yield,k2Energy:res[0].energy,k2Water:res[0].water,k2Logistic:res[0].logistic,k2Repair:res[0].repair,k2Adm:res[0].adm,k2Others:res[0].others1});case 6:case\"end\":return _context27.stop();}}},_callee27);}));return function(_x15){return _ref28.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context28.sent;case 4:case\"end\":return _context28.stop();}}},_callee28);}));_this.gantiDept=/*#__PURE__*/function(){var _ref29=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee29(val){return _regeneratorRuntime.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:_context29.next=2;return _this.setState({deptSelected:val.value});case 2:_context29.next=4;return _this.setState({deptLabel:val.label});case 4:_context29.next=6;return _this.reRunChart();case 6:case\"end\":return _context29.stop();}}},_callee29);}));return function(_x16){return _ref29.apply(this,arguments);};}();return _this;}_createClass(MstdDashboardSsDept,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,data=_this$state.data,columns=_this$state.columns,value=_this$state.value,filteredData=_this$state.filteredData;var basicPicker=this.state.basicPicker;return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.isLoading?/*#__PURE__*/React.createElement(Spinner,null):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"Dashboard SS Dept\",breadCrumbParent:\"SS\",breadCrumbActive:\"Dashboard SS Dept\"}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"\",md:\"12\",sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Pilih Departemen\"),/*#__PURE__*/React.createElement(Select,{className:\"React\",classNamePrefix:\"select\"// defaultValue={colourOptions[1]}\n,name:\"clear\",options:this.state.dataDepartemen// isClearable={true}\n// onChange={(val)=>this.setState({deptSelected: val.value})}\n,onChange:function onChange(val){return _this2.gantiDept(val);}}))),/*#__PURE__*/React.createElement(Col,{className:\"mb-3\",md:\"6\",sm:\"12\"},/*#__PURE__*/React.createElement(Label,null,\"Start Date\"),/*#__PURE__*/React.createElement(DatePicker,{className:\"form-control\",selected:this.state.basicPicker// onSelect={handleDateSelect} //when day is clicked\n,onChange:function onChange(date){return _this2.handleChange(date);}//only when value has changed\n})),/*#__PURE__*/React.createElement(Col,{className:\"mb-3\",md:\"6\",sm:\"12\"},/*#__PURE__*/React.createElement(Label,null,\"End Date\"),/*#__PURE__*/React.createElement(DatePicker,{className:\"form-control\",selected:this.state.basicPicker2// onSelect={handleDateSelect} //when day is clicked\n,onChange:function onChange(date){return _this2.handleChange2(date);}//only when value has changed\n}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconRight:true,iconBg:\"primary\",icon:/*#__PURE__*/React.createElement(Icon.Activity,{className:\"dark\",size:22}),stat:this.state.done>999?(this.state.done/1000).toFixed(1)+' k':this.state.done,statTitle:\"Jumlah SS\"})),/*#__PURE__*/React.createElement(Col,{lg:\"6\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconRight:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.CreditCard,{className:\"success\",size:22})// stat={this.state.keuntungan > 999999 ? (this.state.keuntungan/1000000).toFixed(1) + ' jt': this.state.keuntungan}\n// return val > 999999 ? (val / 1000000).toFixed(0) + \" kk\" : val\n// stat={this.state.keuntungan.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\n,stat:this.state.keuntungan>999999999?(this.state.keuntungan/1000000000).toFixed(1).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+' M':this.state.keuntungan.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\"),statTitle:\"Cost Saving\"})),/*#__PURE__*/React.createElement(Col,{lg:\"3\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconRight:true,iconBg:\"primary\",icon:/*#__PURE__*/React.createElement(Icon.Activity,{className:\"dark\",size:22}),stat:this.state.donePS>999?(this.state.donePS/1000).toFixed(1)+' k':this.state.donePS,statTitle:\"Jumlah SS Soft\"})),/*#__PURE__*/React.createElement(Col,{lg:\"3\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconRight:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.CreditCard,{className:\"success\",size:22})// stat={this.state.keuntunganPS > 999999 ? (this.state.keuntunganPS/1000000).toFixed(1) + ' jt': this.state.keuntunganPS}\n// return val > 999999 ? (val / 1000000).toFixed(0) + \" kk\" : val\n,stat:this.state.keuntunganPS>999999999?(this.state.keuntunganPS/1000000000).toFixed(1).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+' M':this.state.keuntunganPS.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")// stat={this.state.keuntunganPS.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\n,statTitle:\"Cost Saving Soft\"})),/*#__PURE__*/React.createElement(Col,{lg:\"3\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconRight:true,iconBg:\"primary\",icon:/*#__PURE__*/React.createElement(Icon.Activity,{className:\"dark\",size:22}),stat:this.state.doneHS>999?(this.state.doneHS/1000).toFixed(1)+' k':this.state.doneHS,statTitle:\"Jumlah SS Hard\"})),/*#__PURE__*/React.createElement(Col,{lg:\"3\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconRight:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.CreditCard,{className:\"success\",size:22})// stat={this.state.keuntunganHS > 999999 ? (this.state.keuntunganHS/1000000).toFixed(1) + ' jt': this.state.keuntunganHS}\n// return val > 999999 ? (val / 1000000).toFixed(0) + \" kk\" : val\n// stat={this.state.keuntunganHS.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\n,stat:this.state.keuntunganHS>999999999?(this.state.keuntunganHS/1000000000).toFixed(1).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+' M':this.state.keuntunganHS.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\"),statTitle:\"Cost Saving Hard\"}))),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Cost Saving \",this.state.deptLabel===null?'':this.state.deptLabel,\" (Current vs Last)\"),/*#__PURE__*/React.createElement(Settings,{size:20,className:\"cursor-pointer text-muted\"})),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Chart,{options:this.state.options,series:this.state.series,type:\"line\",height:260}))),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Actual SS (Current vs Last)\"),/*#__PURE__*/React.createElement(Settings,{size:20,className:\"cursor-pointer text-muted\"})),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Chart,{options:this.state.optionsColumn,series:this.state.seriesColumn,type:\"bar\",height:350}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xl:\"12\",lg:\"12\",sm:\"12\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center align-self-center\",style:{marginBottom:20}},\"Category Saving SS \",this.state.deptLabel===null?'':this.state.deptLabel))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"primary\",icon:/*#__PURE__*/React.createElement(Icon.Eye,{className:\"primary\",size:22}),stat:this.state.kDiversification,statTitle:\"Diversification\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.MessageSquare,{className:\"success\",size:22}),stat:this.state.kYield,statTitle:\"Yield\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.ShoppingBag,{className:\"warning\",size:22}),stat:this.state.kLeadtime,statTitle:\"Leadtime\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"danger\",icon:/*#__PURE__*/React.createElement(Icon.Heart,{className:\"danger\",size:22}),stat:this.state.kGreen,statTitle:\"Green Project\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.Smile,{className:\"success\",size:22}),stat:this.state.kDefect,statTitle:\"Defect Mode\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.Truck,{className:\"warning\",size:22}),stat:this.state.kOF,statTitle:\"OF\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"primary\",icon:/*#__PURE__*/React.createElement(Icon.Eye,{className:\"primary\",size:22}),stat:this.state.kSafety,statTitle:\"Safety & Health\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.MessageSquare,{className:\"success\",size:22}),stat:this.state.kBrft,statTitle:\"BRFT\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.ShoppingBag,{className:\"warning\",size:22}),stat:this.state.kCylce,statTitle:\"Cycle Time\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"danger\",icon:/*#__PURE__*/React.createElement(Icon.Heart,{className:\"danger\",size:22}),stat:this.state.kOee,statTitle:\"OEE\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.Smile,{className:\"success\",size:22}),stat:this.state.kRework,statTitle:\"Rework\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.Truck,{className:\"warning\",size:22}),stat:this.state.kMttr,statTitle:\"MTTR/MTBF\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.Truck,{className:\"warning\",size:22}),stat:this.state.kCustomer,statTitle:\"Customer Complain\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xl:\"12\",lg:\"12\",sm:\"12\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center align-self-center\",style:{marginBottom:20}},\"Category 2 Saving SS \",this.state.deptLabel===null?'':this.state.deptLabel))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"primary\",icon:/*#__PURE__*/React.createElement(Icon.Eye,{className:\"primary\",size:22}),stat:this.state.k2Rm,statTitle:\"RM Diversification\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.MessageSquare,{className:\"success\",size:22}),stat:this.state.k2Pm,statTitle:\"PM Diversification\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.ShoppingBag,{className:\"warning\",size:22}),stat:this.state.k2Bs,statTitle:\"BS Improvement\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"danger\",icon:/*#__PURE__*/React.createElement(Icon.Heart,{className:\"danger\",size:22}),stat:this.state.k2Capacity,statTitle:\"Capacity Improvement\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.Smile,{className:\"success\",size:22}),stat:this.state.k2LeadTime,statTitle:\"Lead Time Reduction\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.Truck,{className:\"warning\",size:22}),stat:this.state.k2Process,statTitle:\"Prod Process Efficiency\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"primary\",icon:/*#__PURE__*/React.createElement(Icon.Eye,{className:\"primary\",size:22}),stat:this.state.k2Yield,statTitle:\"\\n\"+\"Increase Yield Saving\"+\" \\n\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.MessageSquare,{className:\"success\",size:22}),stat:this.state.k2Energy,statTitle:\"Energy Cost Reduction\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.ShoppingBag,{className:\"warning\",size:22}),stat:this.state.k2Water,statTitle:\"Water Consump Reduction\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"danger\",icon:/*#__PURE__*/React.createElement(Icon.Heart,{className:\"danger\",size:22}),stat:this.state.k2Logistic,statTitle:\"Increase Logistic Productivity\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"success\",icon:/*#__PURE__*/React.createElement(Icon.Smile,{className:\"success\",size:22}),stat:this.state.k2Repair,statTitle:\"Repair & Maintenance\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.Truck,{className:\"warning\",size:22}),stat:this.state.k2Adm,statTitle:\"ADM Process Efficiency\"})),/*#__PURE__*/React.createElement(Col,{xl:\"2\",lg:\"4\",sm:\"6\"},/*#__PURE__*/React.createElement(StatisticsCard,{hideChart:true,iconBg:\"warning\",icon:/*#__PURE__*/React.createElement(Icon.Truck,{className:\"warning\",size:22}),stat:this.state.k2Others,statTitle:\"Others\"})))));}}]);return MstdDashboardSsDept;}(React.Component);export default MstdDashboardSsDept;","map":null,"metadata":{},"sourceType":"module"}