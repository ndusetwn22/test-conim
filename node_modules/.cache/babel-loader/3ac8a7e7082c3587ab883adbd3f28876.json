{"ast":null,"code":"import _classCallCheck from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pandusetiawan/Documents/react/df-v1.2/src/layouts/components/menu/vertical-menu/Sidebar.js\";\nimport React, { Component } from \"react\";\nimport classnames from \"classnames\";\nimport { ContextLayout } from \"../../../../utility/context/Layout\";\nimport { connect } from \"react-redux\";\nimport SidebarHeader from \"./SidebarHeader\";\nimport Hammer from \"react-hammerjs\";\nimport SideMenuContent from \"./sidemenu/SideMenuContent\";\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\n\nvar Sidebar = /*#__PURE__*/function (_Component) {\n  _inherits(Sidebar, _Component);\n\n  function Sidebar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Sidebar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Sidebar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      width: window.innerWidth,\n      activeIndex: null,\n      hoveredMenuItem: null,\n      activeItem: _this.props.activePath,\n      menuShadow: false,\n      ScrollbarTag: PerfectScrollbar\n    };\n    _this.mounted = false;\n\n    _this.updateWidth = function () {\n      if (_this.mounted) {\n        _this.setState(function (prevState) {\n          return {\n            width: window.innerWidth\n          };\n        });\n\n        _this.checkDevice();\n      }\n    };\n\n    _this.checkDevice = function () {\n      var prefixes = \" -webkit- -moz- -o- -ms- \".split(\" \");\n\n      var mq = function mq(query) {\n        return window.matchMedia(query).matches;\n      };\n\n      if (\"ontouchstart\" in window || window.DocumentTouch) {\n        _this.setState({\n          ScrollbarTag: \"div\"\n        });\n      } else {\n        _this.setState({\n          ScrollbarTag: PerfectScrollbar\n        });\n      }\n\n      var query = [\"(\", prefixes.join(\"touch-enabled),(\"), \"heartz\", \")\"].join(\"\");\n      return mq(query);\n    };\n\n    _this.changeActiveIndex = function (id) {\n      if (id !== _this.state.activeIndex) {\n        _this.setState({\n          activeIndex: id\n        });\n      } else {\n        _this.setState({\n          activeIndex: null\n        });\n      }\n    };\n\n    _this.handleSidebarMouseEnter = function (id) {\n      if (id !== _this.state.hoveredMenuItem) {\n        _this.setState({\n          hoveredMenuItem: id\n        });\n      } else {\n        _this.setState({\n          hoveredMenuItem: null\n        });\n      }\n    };\n\n    _this.handleActiveItem = function (url) {\n      _this.setState({\n        activeItem: url\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Sidebar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.mounted = true;\n\n      if (this.mounted) {\n        if (window !== \"undefined\") {\n          window.addEventListener(\"resize\", this.updateWidth, false);\n        }\n\n        this.checkDevice();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          visibilityState = _this$props.visibilityState,\n          toggleSidebarMenu = _this$props.toggleSidebarMenu,\n          sidebarHover = _this$props.sidebarHover,\n          toggle = _this$props.toggle,\n          color = _this$props.color,\n          sidebarVisibility = _this$props.sidebarVisibility,\n          activeTheme = _this$props.activeTheme,\n          collapsed = _this$props.collapsed,\n          activePath = _this$props.activePath,\n          sidebarState = _this$props.sidebarState,\n          currentLang = _this$props.currentLang,\n          permission = _this$props.permission,\n          currentUser = _this$props.currentUser,\n          collapsedMenuPaths = _this$props.collapsedMenuPaths;\n      var _this$state = this.state,\n          menuShadow = _this$state.menuShadow,\n          activeIndex = _this$state.activeIndex,\n          hoveredMenuItem = _this$state.hoveredMenuItem,\n          activeItem = _this$state.activeItem,\n          ScrollbarTag = _this$state.ScrollbarTag;\n\n      var scrollShadow = function scrollShadow(container, dir) {\n        if (container && dir === \"up\" && container.scrollTop >= 100) {\n          _this2.setState({\n            menuShadow: true\n          });\n        } else if (container && dir === \"down\" && container.scrollTop < 100) {\n          _this2.setState({\n            menuShadow: false\n          });\n        } else {\n          return;\n        }\n      };\n\n      return /*#__PURE__*/React.createElement(ContextLayout.Consumer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 7\n        }\n      }, function (context) {\n        var dir = context.state.direction;\n        return /*#__PURE__*/React.createElement(React.Fragment, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Hammer, {\n          onSwipe: function onSwipe(e) {\n            sidebarVisibility();\n          },\n          direction: dir === \"rtl\" ? \"DIRECTION_LEFT\" : \"DIRECTION_RIGHT\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"menu-swipe-area d-xl-none d-block vh-100\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: classnames(\"main-menu menu-fixed menu-light menu-accordion menu-shadow theme-\".concat(activeTheme), {\n            collapsed: sidebarState === true,\n            \"hide-sidebar\": _this2.state.width < 1200 && visibilityState === false\n          }),\n          onMouseEnter: function onMouseEnter() {\n            return sidebarHover(false);\n          },\n          onMouseLeave: function onMouseLeave() {\n            return sidebarHover(true);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(SidebarHeader, {\n          toggleSidebarMenu: toggleSidebarMenu,\n          toggle: toggle,\n          sidebarBgColor: color,\n          sidebarVisibility: sidebarVisibility,\n          activeTheme: activeTheme,\n          collapsed: collapsed,\n          menuShadow: menuShadow,\n          activePath: activePath,\n          sidebarState: sidebarState,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }\n        }), /*#__PURE__*/React.createElement(ScrollbarTag, Object.assign({\n          className: classnames(\"main-menu-content\", {\n            \"overflow-hidden\": ScrollbarTag !== \"div\",\n            \"overflow-scroll\": ScrollbarTag === \"div\"\n          })\n        }, ScrollbarTag !== \"div\" && {\n          options: {\n            wheelPropagation: false\n          },\n          onScrollDown: function onScrollDown(container) {\n            return scrollShadow(container, \"down\");\n          },\n          onScrollUp: function onScrollUp(container) {\n            return scrollShadow(container, \"up\");\n          },\n          onYReachStart: function onYReachStart() {\n            return menuShadow === true && _this2.setState({\n              menuShadow: false\n            });\n          }\n        }, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 17\n          }\n        }), /*#__PURE__*/React.createElement(Hammer, {\n          onSwipe: function onSwipe() {\n            sidebarVisibility();\n          },\n          direction: dir === \"rtl\" ? \"DIRECTION_RIGHT\" : \"DIRECTION_LEFT\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"ul\", {\n          className: \"navigation navigation-main\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(SideMenuContent, {\n          setActiveIndex: _this2.changeActiveIndex,\n          activeIndex: activeIndex,\n          hoverIndex: hoveredMenuItem,\n          handleSidebarMouseEnter: _this2.handleSidebarMouseEnter,\n          activeItemState: activeItem,\n          handleActiveItem: _this2.handleActiveItem,\n          activePath: activePath,\n          lang: currentLang,\n          permission: permission,\n          currentUser: currentUser,\n          collapsedMenuPaths: collapsedMenuPaths,\n          toggleMenu: sidebarVisibility,\n          deviceWidth: _this2.props.deviceWidth,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 23\n          }\n        }))))));\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.activePath !== state.activeItem) {\n        return {\n          activeItem: props.activePath\n        };\n      } // Return null if the state hasn't changed\n\n\n      return null;\n    }\n  }]);\n\n  return Sidebar;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    currentUser: state.auth.login.userRole\n  };\n};\n\nexport default connect(mapStateToProps)(Sidebar);","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/layouts/components/menu/vertical-menu/Sidebar.js"],"names":["React","Component","classnames","ContextLayout","connect","SidebarHeader","Hammer","SideMenuContent","PerfectScrollbar","Sidebar","state","width","window","innerWidth","activeIndex","hoveredMenuItem","activeItem","props","activePath","menuShadow","ScrollbarTag","mounted","updateWidth","setState","prevState","checkDevice","prefixes","split","mq","query","matchMedia","matches","DocumentTouch","join","changeActiveIndex","id","handleSidebarMouseEnter","handleActiveItem","url","addEventListener","visibilityState","toggleSidebarMenu","sidebarHover","toggle","color","sidebarVisibility","activeTheme","collapsed","sidebarState","currentLang","permission","currentUser","collapsedMenuPaths","scrollShadow","container","dir","scrollTop","context","direction","e","options","wheelPropagation","onScrollDown","onScrollUp","onYReachStart","deviceWidth","mapStateToProps","auth","login","userRole"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport classnames from \"classnames\"\nimport { ContextLayout } from \"../../../../utility/context/Layout\"\nimport { connect } from \"react-redux\"\nimport SidebarHeader from \"./SidebarHeader\"\nimport Hammer from \"react-hammerjs\"\nimport SideMenuContent from \"./sidemenu/SideMenuContent\"\nimport PerfectScrollbar from \"react-perfect-scrollbar\"\nclass Sidebar extends Component {\n  static getDerivedStateFromProps(props, state) {\n    if (props.activePath !== state.activeItem) {\n      return {\n        activeItem: props.activePath\n      }\n    }\n    // Return null if the state hasn't changed\n    return null\n  }\n  state = {\n    width: window.innerWidth,\n    activeIndex: null,\n    hoveredMenuItem: null,\n    activeItem: this.props.activePath,\n    menuShadow: false,\n    ScrollbarTag: PerfectScrollbar\n  }\n\n  mounted = false\n\n  updateWidth = () => {\n    if (this.mounted) {\n      this.setState(prevState => ({\n        width: window.innerWidth\n      }))\n      this.checkDevice()\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true\n    if (this.mounted) {\n      if (window !== \"undefined\") {\n        window.addEventListener(\"resize\", this.updateWidth, false)\n      }\n      this.checkDevice()\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false\n  }\n\n  checkDevice = () => {\n    var prefixes = \" -webkit- -moz- -o- -ms- \".split(\" \")\n    var mq = function(query) {\n      return window.matchMedia(query).matches\n    }\n\n    if (\"ontouchstart\" in window || window.DocumentTouch) {\n      this.setState({\n        ScrollbarTag: \"div\"\n      })\n    } else {\n      this.setState({\n        ScrollbarTag: PerfectScrollbar\n      })\n    }\n    var query = [\"(\", prefixes.join(\"touch-enabled),(\"), \"heartz\", \")\"].join(\"\")\n    return mq(query)\n  }\n\n  changeActiveIndex = id => {\n    if (id !== this.state.activeIndex) {\n      this.setState({\n        activeIndex: id\n      })\n    } else {\n      this.setState({\n        activeIndex: null\n      })\n    }\n  }\n\n  handleSidebarMouseEnter = id => {\n    if (id !== this.state.hoveredMenuItem) {\n      this.setState({\n        hoveredMenuItem: id\n      })\n    } else {\n      this.setState({\n        hoveredMenuItem: null\n      })\n    }\n  }\n\n  handleActiveItem = url => {\n    this.setState({\n      activeItem: url\n    })\n  }\n\n  render() {\n    let {\n      visibilityState,\n      toggleSidebarMenu,\n      sidebarHover,\n      toggle,\n      color,\n      sidebarVisibility,\n      activeTheme,\n      collapsed,\n      activePath,\n      sidebarState,\n      currentLang,\n      permission,\n      currentUser,\n      collapsedMenuPaths\n    } = this.props\n\n    let {\n      menuShadow,\n      activeIndex,\n      hoveredMenuItem,\n      activeItem,\n      ScrollbarTag\n    } = this.state\n    let scrollShadow = (container, dir) => {\n      if (container && dir === \"up\" && container.scrollTop >= 100) {\n        this.setState({ menuShadow: true })\n      } else if (container && dir === \"down\" && container.scrollTop < 100) {\n        this.setState({ menuShadow: false })\n      } else {\n        return\n      }\n    }\n    return (\n      <ContextLayout.Consumer>\n        {context => {\n          let dir = context.state.direction\n          return (\n            <React.Fragment>\n              <Hammer\n                onSwipe={e => {\n                  sidebarVisibility()\n                }}\n                direction={\n                  dir === \"rtl\" ? \"DIRECTION_LEFT\" : \"DIRECTION_RIGHT\"\n                }>\n                <div className=\"menu-swipe-area d-xl-none d-block vh-100\"></div>\n              </Hammer>\n\n              <div\n                className={classnames(\n                  `main-menu menu-fixed menu-light menu-accordion menu-shadow theme-${activeTheme}`,\n                  {\n                    collapsed: sidebarState === true,\n                    \"hide-sidebar\":\n                      this.state.width < 1200 && visibilityState === false\n                  }\n                )}\n                onMouseEnter={() => sidebarHover(false)}\n                onMouseLeave={() => sidebarHover(true)}>\n                <SidebarHeader\n                  toggleSidebarMenu={toggleSidebarMenu}\n                  toggle={toggle}\n                  sidebarBgColor={color}\n                  sidebarVisibility={sidebarVisibility}\n                  activeTheme={activeTheme}\n                  collapsed={collapsed}\n                  menuShadow={menuShadow}\n                  activePath={activePath}\n                  sidebarState={sidebarState}\n                />\n                <ScrollbarTag\n                  className={classnames(\"main-menu-content\", {\n                    \"overflow-hidden\": ScrollbarTag !== \"div\",\n                    \"overflow-scroll\": ScrollbarTag === \"div\"\n                  })}\n                  {...(ScrollbarTag !== \"div\" && {\n                    options: { wheelPropagation: false },\n                    onScrollDown: container => scrollShadow(container, \"down\"),\n                    onScrollUp: container => scrollShadow(container, \"up\"),\n                    onYReachStart: () =>\n                      menuShadow === true &&\n                      this.setState({ menuShadow: false })\n                  })}>\n                  <Hammer\n                    onSwipe={() => {\n                      sidebarVisibility()\n                    }}\n                    direction={\n                      dir === \"rtl\" ? \"DIRECTION_RIGHT\" : \"DIRECTION_LEFT\"\n                    }>\n                    <ul className=\"navigation navigation-main\">\n                      <SideMenuContent\n                        setActiveIndex={this.changeActiveIndex}\n                        activeIndex={activeIndex}\n                        hoverIndex={hoveredMenuItem}\n                        handleSidebarMouseEnter={this.handleSidebarMouseEnter}\n                        activeItemState={activeItem}\n                        handleActiveItem={this.handleActiveItem}\n                        activePath={activePath}\n                        lang={currentLang}\n                        permission={permission}\n                        currentUser={currentUser}\n                        collapsedMenuPaths={collapsedMenuPaths}\n                        toggleMenu={sidebarVisibility}\n                        deviceWidth={this.props.deviceWidth}\n                      />\n                    </ul>\n                  </Hammer>\n                </ScrollbarTag>\n              </div>\n            </React.Fragment>\n          )\n        }}\n      </ContextLayout.Consumer>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.auth.login.userRole\n  }\n}\n\nexport default connect(mapStateToProps)(Sidebar)\n"]},"metadata":{},"sourceType":"module"}