{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Card,CardBody,CardHeader,CardTitle,FormGroup,Label,Input,Row,Col,UncontrolledDropdown,UncontrolledButtonDropdown,DropdownMenu,DropdownItem,DropdownToggle,Collapse,Spinner}from\"reactstrap\";import axios from\"axios\";import{ContextLayout}from\"../../../../utility/context/Layout\";import{AgGridReact}from\"ag-grid-react\";import{Edit,Trash2,ChevronDown,Clipboard,Printer,Download,RotateCw,X}from\"react-feather\";import classnames from\"classnames\";import{history}from\"../../../../history\";import\"../../../../assets/scss/plugins/tables/_agGridStyleOverride.scss\";import\"../../../../assets/scss/pages/users.scss\";var UsersList=/*#__PURE__*/function(_React$Component){_inherits(UsersList,_React$Component);var _super=_createSuper(UsersList);function UsersList(){var _this;_classCallCheck(this,UsersList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={rowData:null,pageSize:20,isVisible:true,reload:false,collapse:true,status:\"Opened\",role:\"All\",selectStatus:\"All\",verified:\"All\",department:\"All\",defaultColDef:{sortable:true},searchVal:\"\",columnDefs:[{headerName:\"ID\",field:\"id\",width:150,filter:true,checkboxSelection:true,headerCheckboxSelectionFilteredOnly:true,headerCheckboxSelection:true},{headerName:\"Username\",field:\"username\",filter:true,width:250,cellRendererFramework:function cellRendererFramework(params){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center cursor-pointer\",onClick:function onClick(){return history.push(\"/app/user/edit\");}},/*#__PURE__*/React.createElement(\"img\",{className:\"rounded-circle mr-50\",src:params.data.avatar,alt:\"user avatar\",height:\"30\",width:\"30\"}),/*#__PURE__*/React.createElement(\"span\",null,params.data.name));}},{headerName:\"Email\",field:\"email\",filter:true,width:250},{headerName:\"Name\",field:\"name\",filter:true,width:200},{headerName:\"Country\",field:\"country\",filter:true,width:200},{headerName:\"Role\",field:\"role\",filter:true,width:150},{headerName:\"Status\",field:\"status\",filter:true,width:150,cellRendererFramework:function cellRendererFramework(params){return params.value===\"active\"?/*#__PURE__*/React.createElement(\"div\",{className:\"badge badge-pill badge-light-success\"},params.value):params.value===\"blocked\"?/*#__PURE__*/React.createElement(\"div\",{className:\"badge badge-pill badge-light-danger\"},params.value):params.value===\"deactivated\"?/*#__PURE__*/React.createElement(\"div\",{className:\"badge badge-pill badge-light-warning\"},params.value):null;}},{headerName:\"Verified\",field:\"is_verified\",filter:true,width:125,cellRendererFramework:function cellRendererFramework(params){return params.value===true?/*#__PURE__*/React.createElement(\"div\",{className:\"bullet bullet-sm bullet-primary\"}):params.value===false?/*#__PURE__*/React.createElement(\"div\",{className:\"bullet bullet-sm bullet-secondary\"}):null;}},{headerName:\"Department\",field:\"department\",filter:true,width:160},{headerName:\"Actions\",field:\"transactions\",width:150,cellRendererFramework:function cellRendererFramework(params){return/*#__PURE__*/React.createElement(\"div\",{className:\"actions cursor-pointer\"},/*#__PURE__*/React.createElement(Edit,{className:\"mr-50\",size:15,onClick:function onClick(){return history.push(\"/app/user/edit\");}}),/*#__PURE__*/React.createElement(Trash2,{size:15,onClick:function onClick(){var selectedData=_this.gridApi.getSelectedRows();_this.gridApi.updateRowData({remove:selectedData});}}));}}]};_this.onGridReady=function(params){_this.gridApi=params.api;_this.gridColumnApi=params.columnApi;};_this.filterData=function(column,val){var filter=_this.gridApi.getFilterInstance(column);var modelObj=null;if(val!==\"all\"){modelObj={type:\"equals\",filter:val};}filter.setModel(modelObj);_this.gridApi.onFilterChanged();};_this.filterSize=function(val){if(_this.gridApi){_this.gridApi.paginationSetPageSize(Number(val));_this.setState({pageSize:val});}};_this.updateSearchQuery=function(val){_this.gridApi.setQuickFilter(val);_this.setState({searchVal:val});};_this.refreshCard=function(){_this.setState({reload:true});setTimeout(function(){_this.setState({reload:false,role:\"All\",selectStatus:\"All\",verified:\"All\",department:\"All\"});},500);};_this.toggleCollapse=function(){_this.setState(function(state){return{collapse:!state.collapse};});};_this.onEntered=function(){_this.setState({status:\"Opened\"});};_this.onEntering=function(){_this.setState({status:\"Opening...\"});};_this.onEntered=function(){_this.setState({status:\"Opened\"});};_this.onExiting=function(){_this.setState({status:\"Closing...\"});};_this.onExited=function(){_this.setState({status:\"Closed\"});};_this.removeCard=function(){_this.setState({isVisible:false});};return _this;}_createClass(UsersList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"api/users/list\").then(function(response){var rowData=response.data;_this2.setState({rowData:rowData});});case 2:case\"end\":return _context.stop();}}},_callee);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,rowData=_this$state.rowData,columnDefs=_this$state.columnDefs,defaultColDef=_this$state.defaultColDef,pageSize=_this$state.pageSize;return/*#__PURE__*/React.createElement(Row,{className:\"app-user-list\"},/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Card,{className:classnames(\"card-action card-reload\",{\"d-none\":this.state.isVisible===false,\"card-collapsed\":this.state.status===\"Closed\",closing:this.state.status===\"Closing...\",opening:this.state.status===\"Opening...\",refreshing:this.state.reload})},/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Filters\"),/*#__PURE__*/React.createElement(\"div\",{className:\"actions\"},/*#__PURE__*/React.createElement(ChevronDown,{className:\"collapse-icon mr-50\",size:15,onClick:this.toggleCollapse}),/*#__PURE__*/React.createElement(RotateCw,{className:\"mr-50\",size:15,onClick:function onClick(){_this3.refreshCard();_this3.gridApi.setFilterModel(null);}}),/*#__PURE__*/React.createElement(X,{size:15,onClick:this.removeCard}))),/*#__PURE__*/React.createElement(Collapse,{isOpen:this.state.collapse,onExited:this.onExited,onEntered:this.onEntered,onExiting:this.onExiting,onEntering:this.onEntering},/*#__PURE__*/React.createElement(CardBody,null,this.state.reload?/*#__PURE__*/React.createElement(Spinner,{color:\"primary\",className:\"reload-spinner\"}):\"\",/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"3\",md:\"6\",sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Label,{for:\"role\"},\"Role\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"role\",id:\"role\",value:this.state.role,onChange:function onChange(e){_this3.setState({role:e.target.value},function(){return _this3.filterData(\"role\",_this3.state.role.toLowerCase());});}},/*#__PURE__*/React.createElement(\"option\",{value:\"All\"},\"All\"),/*#__PURE__*/React.createElement(\"option\",{value:\"User\"},\"User\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Staff\"},\"Staff\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Admin\"},\"Admin\")))),/*#__PURE__*/React.createElement(Col,{lg:\"3\",md:\"6\",sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Label,{for:\"status\"},\"Status\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"status\",id:\"status\",value:this.state.selectStatus,onChange:function onChange(e){_this3.setState({selectStatus:e.target.value},function(){return _this3.filterData(\"status\",_this3.state.selectStatus.toLowerCase());});}},/*#__PURE__*/React.createElement(\"option\",{value:\"All\"},\"All\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Active\"},\"Active\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Blocked\"},\"Blocked\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Deactivated\"},\"Deactivated\")))),/*#__PURE__*/React.createElement(Col,{lg:\"3\",md:\"6\",sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Label,{for:\"verified\"},\"Verified\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"verified\",id:\"verified\",value:this.state.verified,onChange:function onChange(e){_this3.setState({verified:e.target.value},function(){return _this3.filterData(\"is_verified\",_this3.state.verified.toLowerCase());});}},/*#__PURE__*/React.createElement(\"option\",{value:\"All\"},\"All\"),/*#__PURE__*/React.createElement(\"option\",{value:\"True\"},\"True\"),/*#__PURE__*/React.createElement(\"option\",{value:\"False\"},\"False\")))),/*#__PURE__*/React.createElement(Col,{lg:\"3\",md:\"6\",sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Label,{for:\"department\"},\"Department\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"department\",id:\"department\",value:this.state.department,onChange:function onChange(e){_this3.setState({department:e.target.value},function(){return _this3.filterData(\"department\",_this3.state.department.toLowerCase());});}},/*#__PURE__*/React.createElement(\"option\",{value:\"All\"},\"All\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Sales\"},\"Sales\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Development\"},\"Development\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Management\"},\"Management\"))))))))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"ag-theme-material ag-grid-table\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ag-grid-actions d-flex justify-content-between flex-wrap mb-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sort-dropdown\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"ag-dropdown p-1\"},/*#__PURE__*/React.createElement(DropdownToggle,{tag:\"div\"},\"1 - \",pageSize,\" of 150\",/*#__PURE__*/React.createElement(ChevronDown,{className:\"ml-50\",size:15})),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{tag:\"div\",onClick:function onClick(){return _this3.filterSize(20);}},\"20\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"div\",onClick:function onClick(){return _this3.filterSize(50);}},\"50\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"div\",onClick:function onClick(){return _this3.filterSize(100);}},\"100\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"div\",onClick:function onClick(){return _this3.filterSize(150);}},\"150\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"filter-actions d-flex\"},/*#__PURE__*/React.createElement(Input,{className:\"w-50 mr-1 mb-1 mb-sm-0\",type:\"text\",placeholder:\"search...\",onChange:function onChange(e){return _this3.updateSearchQuery(e.target.value);},value:this.state.searchVal}),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown actions-dropdown\"},/*#__PURE__*/React.createElement(UncontrolledButtonDropdown,null,/*#__PURE__*/React.createElement(DropdownToggle,{className:\"px-2 py-75\",color:\"white\"},\"Actions\",/*#__PURE__*/React.createElement(ChevronDown,{className:\"ml-50\",size:15})),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\"},/*#__PURE__*/React.createElement(Trash2,{size:15}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle ml-50\"},\"Delete\")),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\"},/*#__PURE__*/React.createElement(Clipboard,{size:15}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle ml-50\"},\"Archive\")),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\"},/*#__PURE__*/React.createElement(Printer,{size:15}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle ml-50\"},\"Print\")),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\"},/*#__PURE__*/React.createElement(Download,{size:15}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle ml-50\"},\"CSV\"))))))),this.state.rowData!==null?/*#__PURE__*/React.createElement(ContextLayout.Consumer,null,function(context){return/*#__PURE__*/React.createElement(AgGridReact,{gridOptions:{},rowSelection:\"multiple\",defaultColDef:defaultColDef,columnDefs:columnDefs,rowData:rowData,onGridReady:_this3.onGridReady,colResizeDefault:\"shift\",animateRows:true,floatingFilter:true,pagination:true,pivotPanelShow:\"always\",paginationPageSize:pageSize,resizable:true,enableRtl:context.state.direction===\"rtl\"});}):null)))));}}]);return UsersList;}(React.Component);export default UsersList;","map":null,"metadata":{},"sourceType":"module"}