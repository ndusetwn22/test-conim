{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Card,CardBody,CardHeader,CardTitle,Badge,Input,Button}from\"reactstrap\";import DataTable from\"react-data-table-component\";import{Star,Search,Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight}from\"react-feather\";import axios from'axios';import{api_query}from\"../../api/ApiConstant\";import{Link,NavLink}from\"react-router-dom\";import{Spinner}from\"reactstrap\";import{connect}from\"react-redux\";// import { changeRole } from \"../../redux/actions/auth/loginActions\"\nvar dummy_profile=require('../../assets/img/profile/user-uploads/user-07.jpg');// local\nvar dummy_profile='https://www.attendit.net/images/easyblog_shared/July_2018/7-4-18/b2ap3_large_totw_network_profile_400.jpg';//url/internet\nvar CustomHeader=function CustomHeader(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"add-new\"},/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"bg-gradient-success\",onClick:function onClick(){return props.employeesAddPage();}},\"Tambah Data\")),/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},/*#__PURE__*/React.createElement(Input,{value:props.value,onChange:function onChange(e){return props.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:\"15\"}))));};var ActionsComponent=function ActionsComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button,{className:\"bg-gradient-success\",color:\"none\",size:'sm',style:{margin:5},onClick:function onClick(){console.log('props : ',props);return props.isEdit(props.row);}},\" Edit\"),/*#__PURE__*/React.createElement(Button,{className:\"bg-gradient-danger\",color:\"none\",size:'sm',style:{margin:5},onClick:function onClick(){console.log('props : ',props);return props.isDelete(props.row);}},\" Delete\"));};var DataTableDigimon=/*#__PURE__*/function(_React$Component){_inherits(DataTableDigimon,_React$Component);var _super=_createSuper(DataTableDigimon);function DataTableDigimon(){var _this;_classCallCheck(this,DataTableDigimon);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={columns:[{name:\"Name\",selector:\"name\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.first_name+' '+row.last_name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.first_name,\" \",row.last_name)));}},{name:\"Gender\",selector:\"gender\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.gender=='M'?'Laki - Laki':'Perempuan',className:\"d-block text-bold-500 text-truncate mb-0\"},row.gender=='M'?'Laki - Laki':'Perempuan')));}},{name:\"No Karyawan\",selector:\"emp_no\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.emp_no,className:\"d-block text-bold-500 text-truncate mb-0\"},row.emp_no)));}},{name:\"Department\",selector:\"dept_name\",// ini harus sama kyk title\nsortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.dept_name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.dept_name)));}},{name:\"Position\",selector:\"position\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.position,className:\"d-block text-bold-500 text-truncate mb-0\"},row.position)));}},{name:\"Profile\",selector:\"image_profile\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-img ml-xl-0 ml-2\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-fluid rounded-circle\",height:\"36\",width:\"36\",src:row.image_profile==null||row.image_profile==\"\"?dummy_profile:row.image_profile,alt:row.image_profile==null||row.image_profile==\"\"?dummy_profile:row.image_profile// src={row.img}\n// alt={row.name}\n})));}},{name:\"Actions\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(ActionsComponent,{row:row,isEdit:_this.isEdit,isDelete:_this.isDelete});}}],data:[],tarikDataInterval:null,date:new Date().toLocaleString(),digit:0,isLoading:false,filteredData:[],role:_this.props.role,value:\"\"};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.next=3;return _this.tarikData();case 3:_context.next=5;return _this.tarikDataInterval();case 5:// localStorage.setItem('user', 'admin')\nconsole.log('my role : ',_this.state.role);_this.setState({isLoading:false});// var tarikData = setInterval(this.tarikData(), 10000); // runs every 5 seconds.\n// await this.setState({tarikDataInterval: tarikData})\ncase 7:case\"end\":return _context.stop();}}},_callee);}));_this.isEdit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(result){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('edit : ',result);_context2.next=3;return _this.props.changeViewPage('edit',result);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.isDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(result){var sql;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log('delete : ',result);sql=\"\\n        delete from employees_new where id = \"+result.id+\";\\n    \";_context3.next=4;return axios.post(api_query,{query:sql}).then(function(result){console.log('result query delete : ',result);return;}).catch(function(err){return;});case 4:result=_context3.sent;_context3.next=7;return _this.tarikData();case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.tarikDataInterval=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// Untuk refresh data setiap skala detik\nsetInterval(function(){_this.tarikData();},20000);setInterval(function(){_this.setState({date:new Date().toLocaleString()});},1000);case 2:case\"end\":return _context4.stop();}}},_callee4);}));_this.componentDidUpdate=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(prevProps,prevState,snapShot){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x3,_x4,_x5){return _ref5.apply(this,arguments);};}();_this.tarikData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var sql,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log('tarik data');// let sql = `\n//     select * from employees_new limit 10000;\n// `\nsql=\"\\n    select\\ten.id,\\n            en.first_name, \\n            en.last_name, \\n            en.emp_no, \\n            en.gender,\\n            en.image_profile,\\n            dn.id as id_dept_name,\\n            dn.dept_name,\\n            pm.id as id_position,\\n            pm.position\\n        from dept_emp_new den\\n        join employees_new en  \\n        on  en.id = den.emp_id\\n        join departments_new dn \\n        on dn.id = den.dept_id \\n        join position_management pm \\n        on pm.id  = den.position_id\\n    \";_context6.next=4;return axios.post(api_query,{query:sql}).then(function(result){var res=result.data.response;console.log('result : ',result);if(res.length==''){return[];}// console.log('result : ', (result.data))\nreturn res;}).catch(function(err){console.log('error : ',err);return[];});case 4:result=_context6.sent;_context6.next=7;return _this.setState({data:result});case 7:case\"end\":return _context6.stop();}}},_callee6);}));_this.employeesAddPage=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.props.changeViewPage('add');case 2:case\"end\":return _context7.stop();}}},_callee7);}));_this.handleFilter=function(e){var value=e.target.value;var data=_this.state.data;var filteredData=_this.state.filteredData;_this.setState({value:value});if(value.length){filteredData=data.filter(function(item){// all_name gabisa karena ada spasi\nvar all_name=item.first_name+' '+item.last_name;var gender=item.gender;var emp_no=item.emp_no;var dept_name=item.dept_name;var position=item.position;if(emp_no==null||emp_no==undefined){emp_no='';}else{emp_no=item.emp_no;}if(gender=='M'){gender='Laki - Laki';}else{gender='Perempuan';}// if(dept_name.split(\" \").length > 1){\n// }\n// console.log('ITEM : ', item)\nvar startsWithCondition=item.first_name.toLowerCase().startsWith(value.toLowerCase())||item.last_name.toLowerCase().startsWith(value.toLowerCase())||gender.toLowerCase().startsWith(value.toLowerCase())||// all_name.toLowerCase().startsWith(value.toLowerCase()) ||\nemp_no.toString().toLowerCase().includes(value.toLowerCase())||dept_name.toLowerCase().startsWith(value.toLowerCase())||position.toLowerCase().startsWith(value.toLowerCase());// item.emp_no.toString().toLowerCase().startsWith(value.toLowerCase())\n// item.name.toLowerCase().startsWith(value.toLowerCase())\n// item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.status.toLowerCase().startsWith(value.toLowerCase())\nvar includesCondition=item.first_name.toLowerCase().includes(value.toLowerCase())||item.last_name.toLowerCase().includes(value.toLowerCase())||gender.toLowerCase().includes(value.toLowerCase())||// all_name.toLowerCase().startsWith(value.toLowerCase()) ||\nemp_no.toString().toLowerCase().includes(value.toLowerCase())||dept_name.toLowerCase().startsWith(value.toLowerCase())||position.toLowerCase().startsWith(value.toLowerCase());// item.emp_no.toString().toLowerCase().includes(value.toLowerCase())\n// item.name.toLowerCase().includes(value.toLowerCase())\n// item.date.toLowerCase().includes(value.toLowerCase()) ||\n// item.email.toLowerCase().includes(value.toLowerCase()) ||\n// item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n// item.status.toLowerCase().includes(value.toLowerCase())\nif(startsWithCondition){return startsWithCondition;}else if(!startsWithCondition&&includesCondition){return includesCondition;}else return null;});_this.setState({filteredData:filteredData});}};return _this;}_createClass(DataTableDigimon,[{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,columns=_this$state.columns,value=_this$state.value,filteredData=_this$state.filteredData;return/*#__PURE__*/React.createElement(React.Fragment,null,!this.state.isLoading?/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Employees Table (\",this.state.date,\")\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:value.length?filteredData:data,columns:columns,noHeader:true,pagination:true,subHeader:true,subHeaderComponent:/*#__PURE__*/React.createElement(CustomHeader,{value:value,handleFilter:this.handleFilter,employeesAddPage:this.employeesAddPage})}))):/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Employees Table (\",this.state.date,\")\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Spinner,{color:\"none\"})))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.role!==state.role){return{role:props.role};}// Return null if the state hasn't changed\nreturn null;}}]);return DataTableDigimon;}(React.Component);// export default DataTableDigimon\nvar mapStateToProps=function mapStateToProps(state){return{role:state.auth.login.userRole};};export default connect(mapStateToProps,{// changeRole \n})(DataTableDigimon);","map":null,"metadata":{},"sourceType":"module"}