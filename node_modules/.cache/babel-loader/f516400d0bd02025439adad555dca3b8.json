{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import AddEventSidebar from\"./AddEventSidebar\";import AddEventButton from\"./AddEventButton\";import{Card,CardBody,Button,ButtonGroup}from\"reactstrap\";import{Calendar,momentLocalizer}from\"react-big-calendar\";import withDragAndDrop from\"react-big-calendar/lib/addons/dragAndDrop\";import moment from\"moment\";import{connect}from\"react-redux\";import{fetchEvents,handleSidebar,addEvent,handleSelectedEvent,updateEvent,updateDrag,updateResize}from\"../../../redux/actions/calendar/index\";import{ChevronLeft,ChevronRight}from\"react-feather\";import\"react-big-calendar/lib/addons/dragAndDrop/styles.scss\";import\"react-big-calendar/lib/css/react-big-calendar.css\";import\"../../../assets/scss/plugins/calendars/react-big-calendar.scss\";var DragAndDropCalendar=withDragAndDrop(Calendar);var localizer=momentLocalizer(moment);var eventColors={business:\"bg-success\",work:\"bg-warning\",personal:\"bg-danger\",others:\"bg-primary\"};var Toolbar=/*#__PURE__*/function(_React$Component){_inherits(Toolbar,_React$Component);var _super=_createSuper(Toolbar);function Toolbar(){_classCallCheck(this,Toolbar);return _super.apply(this,arguments);}_createClass(Toolbar,[{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-header mb-2 d-flex justify-content-between flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AddEventButton,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center view-options mt-1 mt-sm-0 ml-lg-5 ml-0\"},/*#__PURE__*/React.createElement(ButtonGroup,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn \".concat(this.props.view===\"month\"?\"btn-primary\":\"btn-outline-primary text-primary\"),onClick:function onClick(){_this.props.onView(\"month\");}},\"Month\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn \".concat(this.props.view===\"week\"?\"btn-primary\":\"btn-outline-primary text-primary\"),onClick:function onClick(){_this.props.onView(\"week\");}},\"Week\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn \".concat(this.props.view===\"day\"?\"btn-primary\":\"btn-outline-primary text-primary\"),onClick:function onClick(){_this.props.onView(\"day\");}},\"Day\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"month-label d-flex flex-column text-center text-md-right mt-1 mt-md-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-navigation\"},/*#__PURE__*/React.createElement(Button.Ripple,{className:\"btn-icon rounded-circle\",size:\"sm\",color:\"primary\",onClick:function onClick(){return _this.props.onNavigate(\"PREV\");}},/*#__PURE__*/React.createElement(ChevronLeft,{size:15})),/*#__PURE__*/React.createElement(\"div\",{className:\"month d-inline-block mx-75 text-bold-500 font-medium-2 align-middle\"},this.props.label),/*#__PURE__*/React.createElement(Button.Ripple,{className:\"btn-icon rounded-circle\",size:\"sm\",color:\"primary\",onClick:function onClick(){return _this.props.onNavigate(\"NEXT\");}},/*#__PURE__*/React.createElement(ChevronRight,{size:15}))),/*#__PURE__*/React.createElement(\"div\",{className:\"event-tags d-none d-sm-flex justify-content-end mt-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tag mr-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-success bullet-sm mr-50\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Business\")),/*#__PURE__*/React.createElement(\"div\",{className:\"tag mr-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-warning bullet-sm mr-50\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Work\")),/*#__PURE__*/React.createElement(\"div\",{className:\"tag mr-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-danger bullet-sm mr-50\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Personal\")),/*#__PURE__*/React.createElement(\"div\",{className:\"tag\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-primary bullet-sm mr-50\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Others\")))));}}]);return Toolbar;}(React.Component);var CalendarApp=/*#__PURE__*/function(_React$Component2){_inherits(CalendarApp,_React$Component2);var _super2=_createSuper(CalendarApp);function CalendarApp(props){var _this2;_classCallCheck(this,CalendarApp);_this2=_super2.call(this,props);_this2.handleEventColors=function(event){return{className:eventColors[event.label]};};_this2.moveEvent=function(_ref){var event=_ref.event,start=_ref.start,end=_ref.end,droppedOnAllDaySlot=_ref.isAllDay;var events=_this2.state.events;var idx=events.indexOf(event);var allDay=event.allDay;if(!event.allDay&&droppedOnAllDaySlot){allDay=true;}else if(event.allDay&&!droppedOnAllDaySlot){allDay=false;}var updatedEvent=_objectSpread(_objectSpread({},event),{},{start:start,end:end,allDay:allDay});var nextEvents=_toConsumableArray(events);nextEvents.splice(idx,1,updatedEvent);_this2.setState({events:nextEvents});_this2.props.updateDrag(updatedEvent);};_this2.resizeEvent=function(_ref2){var event=_ref2.event,start=_ref2.start,end=_ref2.end;var events=_this2.state.events;var nextEvents=events.map(function(existingEvent){return existingEvent.id===event.id?_objectSpread(_objectSpread({},existingEvent),{},{start:start,end:end}):existingEvent;});_this2.setState({events:nextEvents});_this2.props.updateResize(_objectSpread(_objectSpread({},event),{},{start:start,end:end}));};_this2.handleSelectEvent=function(event){var filteredState=_this2.state.events.filter(function(i){return i.id===event.id;});_this2.props.handleSidebar(true);_this2.props.handleSelectedEvent(filteredState[0]);_this2.setState({eventInfo:filteredState[0]});};_this2.state={events:[],views:{month:true,week:true,day:true},eventInfo:null};return _this2;}_createClass(CalendarApp,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.props.fetchEvents();case 2:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,events=_this$state.events,views=_this$state.views,sidebar=_this$state.sidebar;return/*#__PURE__*/React.createElement(\"div\",{className:\"app-calendar position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-content-overlay \".concat(sidebar?\"show\":\"hidden\"),onClick:function onClick(){_this3.props.handleSidebar(false);_this3.props.handleSelectedEvent(null);}}),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(DragAndDropCalendar,{localizer:localizer,events:events,onEventDrop:this.moveEvent,onEventResize:this.resizeEvent,startAccessor:\"start\",endAccessor:\"end\",resourceAccessor:\"url\",views:views,components:{toolbar:Toolbar},eventPropGetter:this.handleEventColors,popup:true,onSelectEvent:function onSelectEvent(event){_this3.handleSelectEvent(event);},onSelectSlot:function onSelectSlot(_ref3){var start=_ref3.start,end=_ref3.end;_this3.props.handleSidebar(true);_this3.props.handleSelectedEvent({title:\"\",label:null,start:new Date(start),end:new Date(end),url:\"\"});},selectable:true}))),/*#__PURE__*/React.createElement(AddEventSidebar,{sidebar:sidebar,handleSidebar:this.props.handleSidebar,addEvent:this.props.addEvent,events:this.state.events,eventInfo:this.state.eventInfo,selectedEvent:this.props.handleSelectedEvent,updateEvent:this.props.updateEvent,resizable:true}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.app.events.length!==state.events||props.app.sidebar!==state.sidebar||props.app.selectedEvent!==state.eventInfo){var dateToObj=props.app.events.map(function(event){event.start=new Date(event.start);event.end=new Date(event.end);return event;});return{events:dateToObj,sidebar:props.app.sidebar,eventInfo:props.app.selectedEvent};}// Return null if the state hasn't changed\nreturn null;}}]);return CalendarApp;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{app:state.calendar};};export default connect(mapStateToProps,{fetchEvents:fetchEvents,handleSidebar:handleSidebar,addEvent:addEvent,handleSelectedEvent:handleSelectedEvent,updateEvent:updateEvent,updateDrag:updateDrag,updateResize:updateResize})(CalendarApp);","map":null,"metadata":{},"sourceType":"module"}