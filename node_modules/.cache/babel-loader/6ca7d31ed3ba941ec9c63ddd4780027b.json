{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import AddEventSidebar from\"./AddEventSidebar\";import AddEventButton from\"./AddEventButton\";import{Card,CardBody,Button,ButtonGroup}from\"reactstrap\";import{Calendar,momentLocalizer}from\"react-big-calendar\";import withDragAndDrop from\"react-big-calendar/lib/addons/dragAndDrop\";import moment from\"moment\";import{connect}from\"react-redux\";import{fetchEvents,handleSidebar,addEvent,handleSelectedEvent,updateEvent,updateDrag,updateResize}from\"../../../redux/actions/calendar/index\";import{ChevronLeft,ChevronRight}from\"react-feather\";import\"react-big-calendar/lib/addons/dragAndDrop/styles.scss\";import\"react-big-calendar/lib/css/react-big-calendar.css\";import\"../../../assets/scss/plugins/calendars/react-big-calendar.scss\";var DragAndDropCalendar=withDragAndDrop(Calendar);var localizer=momentLocalizer(moment);var eventColors={business:\"bg-success\",work:\"bg-warning\",personal:\"bg-danger\",others:\"bg-primary\"};var Toolbar=/*#__PURE__*/function(_React$Component){_inherits(Toolbar,_React$Component);var _super=_createSuper(Toolbar);function Toolbar(){_classCallCheck(this,Toolbar);return _super.apply(this,arguments);}_createClass(Toolbar,[{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-header mb-2 d-flex justify-content-between flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AddEventButton,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center view-options mt-1 mt-sm-0 ml-lg-5 ml-0\"},/*#__PURE__*/React.createElement(ButtonGroup,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn \".concat(this.props.view===\"month\"?\"btn-primary\":\"btn-outline-primary text-primary\"),onClick:function onClick(){_this.props.onView(\"month\");}},\"Month\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn \".concat(this.props.view===\"week\"?\"btn-primary\":\"btn-outline-primary text-primary\"),onClick:function onClick(){_this.props.onView(\"week\");}},\"Week\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn \".concat(this.props.view===\"day\"?\"btn-primary\":\"btn-outline-primary text-primary\"),onClick:function onClick(){_this.props.onView(\"day\");}},\"Day\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"month-label d-flex flex-column text-center text-md-right mt-1 mt-md-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-navigation\"},/*#__PURE__*/React.createElement(Button.Ripple,{className:\"btn-icon rounded-circle\",size:\"sm\",color:\"primary\",onClick:function onClick(){return _this.props.onNavigate(\"PREV\");}},/*#__PURE__*/React.createElement(ChevronLeft,{size:15})),/*#__PURE__*/React.createElement(\"div\",{className:\"month d-inline-block mx-75 text-bold-500 font-medium-2 align-middle\"},this.props.label),/*#__PURE__*/React.createElement(Button.Ripple,{className:\"btn-icon rounded-circle\",size:\"sm\",color:\"primary\",onClick:function onClick(){return _this.props.onNavigate(\"NEXT\");}},/*#__PURE__*/React.createElement(ChevronRight,{size:15}))),/*#__PURE__*/React.createElement(\"div\",{className:\"event-tags d-none d-sm-flex justify-content-end mt-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tag mr-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-success bullet-sm mr-50\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Business\")),/*#__PURE__*/React.createElement(\"div\",{className:\"tag mr-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-warning bullet-sm mr-50\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Work\")),/*#__PURE__*/React.createElement(\"div\",{className:\"tag mr-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-danger bullet-sm mr-50\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Personal\")),/*#__PURE__*/React.createElement(\"div\",{className:\"tag\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-primary bullet-sm mr-50\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Others\")))));}}]);return Toolbar;}(React.Component);var CalendarApp=/*#__PURE__*/function(_React$Component2){_inherits(CalendarApp,_React$Component2);var _super2=_createSuper(CalendarApp);function CalendarApp(props){var _this2;_classCallCheck(this,CalendarApp);_this2=_super2.call(this,props);_this2.handleEventColors=function(event){return{className:eventColors[event.label]};};_this2.moveEvent=function(_ref){var event=_ref.event,start=_ref.start,end=_ref.end,droppedOnAllDaySlot=_ref.isAllDay;var events=_this2.state.events;var idx=events.indexOf(event);var allDay=event.allDay;if(!event.allDay&&droppedOnAllDaySlot){allDay=true;}else if(event.allDay&&!droppedOnAllDaySlot){allDay=false;}var updatedEvent=_objectSpread(_objectSpread({},event),{},{start:start,end:end,allDay:allDay});var nextEvents=_toConsumableArray(events);nextEvents.splice(idx,1,updatedEvent);_this2.setState({events:nextEvents});_this2.props.updateDrag(updatedEvent);};_this2.resizeEvent=function(_ref2){var event=_ref2.event,start=_ref2.start,end=_ref2.end;var events=_this2.state.events;var nextEvents=events.map(function(existingEvent){return existingEvent.id===event.id?_objectSpread(_objectSpread({},existingEvent),{},{start:start,end:end}):existingEvent;});_this2.setState({events:nextEvents});_this2.props.updateResize(_objectSpread(_objectSpread({},event),{},{start:start,end:end}));};_this2.handleSelectEvent=function(event){var filteredState=_this2.state.events.filter(function(i){return i.id===event.id;});_this2.props.handleSidebar(true);_this2.props.handleSelectedEvent(filteredState[0]);_this2.setState({eventInfo:filteredState[0]});};_this2.state={events:[],views:{month:true,week:true,day:true},eventInfo:null};return _this2;}_createClass(CalendarApp,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.props.fetchEvents();case 2:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,events=_this$state.events,views=_this$state.views,sidebar=_this$state.sidebar;return/*#__PURE__*/React.createElement(\"div\",{className:\"app-calendar position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-content-overlay \".concat(sidebar?\"show\":\"hidden\"),onClick:function onClick(){_this3.props.handleSidebar(false);_this3.props.handleSelectedEvent(null);}}),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(DragAndDropCalendar,{localizer:localizer,events:events,onEventDrop:this.moveEvent,onEventResize:this.resizeEvent,startAccessor:\"start\",endAccessor:\"end\",resourceAccessor:\"url\",views:views,components:{toolbar:Toolbar},eventPropGetter:this.handleEventColors,popup:true,onSelectEvent:function onSelectEvent(event){_this3.handleSelectEvent(event);},onSelectSlot:function onSelectSlot(_ref3){var start=_ref3.start,end=_ref3.end;_this3.props.handleSidebar(true);_this3.props.handleSelectedEvent({title:\"\",label:null,start:new Date(start),end:new Date(end),url:\"\"});},selectable:true}))),/*#__PURE__*/React.createElement(AddEventSidebar,{sidebar:sidebar,handleSidebar:this.props.handleSidebar,addEvent:this.props.addEvent,events:this.state.events,eventInfo:this.state.eventInfo,selectedEvent:this.props.handleSelectedEvent,updateEvent:this.props.updateEvent,resizable:true}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.app.events.length!==state.events||props.app.sidebar!==state.sidebar||props.app.selectedEvent!==state.eventInfo){var dateToObj=props.app.events.map(function(event){event.start=new Date(event.start);event.end=new Date(event.end);return event;});return{events:dateToObj,sidebar:props.app.sidebar,eventInfo:props.app.selectedEvent};}// Return null if the state hasn't changed\nreturn null;}}]);return CalendarApp;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{app:state.calendar};};export default connect(mapStateToProps,{fetchEvents:fetchEvents,handleSidebar:handleSidebar,addEvent:addEvent,handleSelectedEvent:handleSelectedEvent,updateEvent:updateEvent,updateDrag:updateDrag,updateResize:updateResize})(CalendarApp);","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/apps/calendar/Calendar.js"],"names":["React","AddEventSidebar","AddEventButton","Card","CardBody","Button","ButtonGroup","Calendar","momentLocalizer","withDragAndDrop","moment","connect","fetchEvents","handleSidebar","addEvent","handleSelectedEvent","updateEvent","updateDrag","updateResize","ChevronLeft","ChevronRight","DragAndDropCalendar","localizer","eventColors","business","work","personal","others","Toolbar","props","view","onView","onNavigate","label","Component","CalendarApp","handleEventColors","event","className","moveEvent","start","end","droppedOnAllDaySlot","isAllDay","events","state","idx","indexOf","allDay","updatedEvent","nextEvents","splice","setState","resizeEvent","map","existingEvent","id","handleSelectEvent","filteredState","filter","i","eventInfo","views","month","week","day","sidebar","toolbar","title","Date","url","app","length","selectedEvent","dateToObj","mapStateToProps","calendar"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport AddEventSidebar from \"./AddEventSidebar\"\nimport AddEventButton from \"./AddEventButton\"\nimport { Card, CardBody, Button, ButtonGroup } from \"reactstrap\"\nimport { Calendar, momentLocalizer } from \"react-big-calendar\"\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\"\nimport moment from \"moment\"\nimport { connect } from \"react-redux\"\nimport {\n  fetchEvents,\n  handleSidebar,\n  addEvent,\n  handleSelectedEvent,\n  updateEvent,\n  updateDrag,\n  updateResize\n} from \"../../../redux/actions/calendar/index\"\nimport { ChevronLeft, ChevronRight } from \"react-feather\"\n\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.scss\"\nimport \"react-big-calendar/lib/css/react-big-calendar.css\"\nimport \"../../../assets/scss/plugins/calendars/react-big-calendar.scss\"\nconst DragAndDropCalendar = withDragAndDrop(Calendar)\nconst localizer = momentLocalizer(moment)\nconst eventColors = {\n  business: \"bg-success\",\n  work: \"bg-warning\",\n  personal: \"bg-danger\",\n  others: \"bg-primary\"\n}\n\nclass Toolbar extends React.Component {\n  render() {\n    return (\n      <div className=\"calendar-header mb-2 d-flex justify-content-between flex-wrap\">\n        <div>\n          <AddEventButton />\n        </div>\n        <div className=\"text-center view-options mt-1 mt-sm-0 ml-lg-5 ml-0\">\n          <ButtonGroup>\n            <button\n              className={`btn ${\n                this.props.view === \"month\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"month\")\n              }}\n            >\n              Month\n            </button>\n            <button\n              className={`btn ${\n                this.props.view === \"week\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"week\")\n              }}\n            >\n              Week\n            </button>\n            <button\n              className={`btn ${\n                this.props.view === \"day\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"day\")\n              }}\n            >\n              Day\n            </button>\n          </ButtonGroup>\n        </div>\n        <div className=\"month-label d-flex flex-column text-center text-md-right mt-1 mt-md-0\">\n          <div className=\"calendar-navigation\">\n            <Button.Ripple\n              className=\"btn-icon rounded-circle\"\n              size=\"sm\"\n              color=\"primary\"\n              onClick={() => this.props.onNavigate(\"PREV\")}\n            >\n              <ChevronLeft size={15} />\n            </Button.Ripple>\n            <div className=\"month d-inline-block mx-75 text-bold-500 font-medium-2 align-middle\">\n              {this.props.label}\n            </div>\n            <Button.Ripple\n              className=\"btn-icon rounded-circle\"\n              size=\"sm\"\n              color=\"primary\"\n              onClick={() => this.props.onNavigate(\"NEXT\")}\n            >\n              <ChevronRight size={15} />\n            </Button.Ripple>\n          </div>\n          <div className=\"event-tags d-none d-sm-flex justify-content-end mt-1\">\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-success bullet-sm mr-50\"></span>\n              <span>Business</span>\n            </div>\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-warning bullet-sm mr-50\"></span>\n              <span>Work</span>\n            </div>\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-danger bullet-sm mr-50\"></span>\n              <span>Personal</span>\n            </div>\n            <div className=\"tag\">\n              <span className=\"bullet bullet-primary bullet-sm mr-50\"></span>\n              <span>Others</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass CalendarApp extends React.Component {\n  static getDerivedStateFromProps(props, state) {\n    if (\n      props.app.events.length !== state.events ||\n      props.app.sidebar !== state.sidebar ||\n      props.app.selectedEvent !== state.eventInfo\n    ) {\n      let dateToObj = props.app.events.map(event => {\n        event.start = new Date(event.start)\n        event.end = new Date(event.end)\n        return event\n      })\n      return {\n        events: dateToObj,\n        sidebar: props.app.sidebar,\n        eventInfo: props.app.selectedEvent\n      }\n    }\n    // Return null if the state hasn't changed\n    return null\n  }\n  constructor(props) {\n    super(props)\n    this.state = {\n      events: [],\n      views: {\n        month: true,\n        week: true,\n        day: true\n      },\n      eventInfo: null\n    }\n  }\n\n  async componentDidMount() {\n    await this.props.fetchEvents()\n  }\n\n  handleEventColors = event => {\n    return { className: eventColors[event.label] }\n  }\n\n  moveEvent = ({ event, start, end, isAllDay: droppedOnAllDaySlot }) => {\n    const { events } = this.state\n    const idx = events.indexOf(event)\n    let allDay = event.allDay\n    if (!event.allDay && droppedOnAllDaySlot) {\n      allDay = true\n    } else if (event.allDay && !droppedOnAllDaySlot) {\n      allDay = false\n    }\n    const updatedEvent = { ...event, start, end, allDay }\n    const nextEvents = [...events]\n    nextEvents.splice(idx, 1, updatedEvent)\n    this.setState({\n      events: nextEvents\n    })\n    this.props.updateDrag(updatedEvent)\n  }\n\n  resizeEvent = ({ event, start, end }) => {\n    const { events } = this.state\n    const nextEvents = events.map(existingEvent => {\n      return existingEvent.id === event.id\n        ? { ...existingEvent, start, end }\n        : existingEvent\n    })\n\n    this.setState({\n      events: nextEvents\n    })\n\n    this.props.updateResize({ ...event, start, end })\n  }\n\n  handleSelectEvent = event => {\n    let filteredState = this.state.events.filter(i => i.id === event.id)\n    this.props.handleSidebar(true)\n    this.props.handleSelectedEvent(filteredState[0])\n    this.setState({\n      eventInfo: filteredState[0]\n    })\n  }\n\n  render() {\n    const { events, views, sidebar } = this.state\n    return (\n      <div className=\"app-calendar position-relative\">\n        <div\n          className={`app-content-overlay ${sidebar ? \"show\" : \"hidden\"}`}\n          onClick={() => {\n            this.props.handleSidebar(false)\n            this.props.handleSelectedEvent(null)\n          }}\n        ></div>\n        <Card>\n          <CardBody>\n            <DragAndDropCalendar\n              localizer={localizer}\n              events={events}\n              onEventDrop={this.moveEvent}\n              onEventResize={this.resizeEvent}\n              startAccessor=\"start\"\n              endAccessor=\"end\"\n              resourceAccessor=\"url\"\n              views={views}\n              components={{ toolbar: Toolbar }}\n              eventPropGetter={this.handleEventColors}\n              popup={true}\n              onSelectEvent={event => {\n                this.handleSelectEvent(event)\n              }}\n              onSelectSlot={({ start, end }) => {\n                this.props.handleSidebar(true)\n                this.props.handleSelectedEvent({\n                  title: \"\",\n                  label: null,\n                  start: new Date(start),\n                  end: new Date(end),\n                  url: \"\"\n                })\n              }}\n              selectable={true}\n            />\n          </CardBody>\n        </Card>\n        <AddEventSidebar\n          sidebar={sidebar}\n          handleSidebar={this.props.handleSidebar}\n          addEvent={this.props.addEvent}\n          events={this.state.events}\n          eventInfo={this.state.eventInfo}\n          selectedEvent={this.props.handleSelectedEvent}\n          updateEvent={this.props.updateEvent}\n          resizable\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    app: state.calendar\n  }\n}\n\nexport default connect(mapStateToProps, {\n  fetchEvents,\n  handleSidebar,\n  addEvent,\n  handleSelectedEvent,\n  updateEvent,\n  updateDrag,\n  updateResize\n})(CalendarApp)\n"]},"metadata":{},"sourceType":"module"}