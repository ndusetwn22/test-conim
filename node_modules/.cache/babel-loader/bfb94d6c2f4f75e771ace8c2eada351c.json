{"ast":null,"code":"import _defineProperty from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var initialState={chats:[],contacts:[],chatContacts:[],pinned:[],status:\"active\",filteredContacts:[],filteredChats:[]};var chats=function chats(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case\"GET_CONTACTS\":return _objectSpread(_objectSpread({},state),{},{chats:action.chats,contacts:action.contacts});case\"GET_CHAT_CONTACTS\":return _objectSpread(_objectSpread({},state),{},{chatContacts:action.chats});case\"SEND_MESSAGE\":var sendMsg,newChatContacts,oldChatContactsId=state.chatContacts.map(function(j){return j.uid;});if(state.chats[action.id]){var oldState=state.chats[action.id].msg;sendMsg=[].concat(_toConsumableArray(oldState),[action.msg]);}else{sendMsg=_objectSpread(_objectSpread({},state.chats),{},_defineProperty({},action.id,{isPinned:action.isPinned,msg:[action.msg]}));}if(!oldChatContactsId.includes(action.id)){var extractContactInfo=state.contacts.find(function(k){return k.uid===action.id;});newChatContacts=state.chatContacts.concat(extractContactInfo);}else{newChatContacts=state.chatContacts;}return _objectSpread(_objectSpread({},state),{},{chats:sendMsg,chatContacts:newChatContacts});case\"CHANGE_STATUS\":return _objectSpread(_objectSpread({},state),{},{status:action.status});case\"MARK_AS_SEEN\":var marked=state.chats[action.id];marked!==undefined&&marked.msg.forEach(function(msg){msg.isSeen=true;});return _objectSpread({},state);case\"SEARCH_CONTACTS\":if(action.query.length){var filteredContacts=state.contacts.filter(function(contact){return contact.displayName.toLowerCase().includes(action.query.toLowerCase());});var filteredChats=state.chatContacts.filter(function(chat){return chat.displayName.toLowerCase().includes(action.query.toLowerCase());});return _objectSpread(_objectSpread({},state),{},{filteredContacts:filteredContacts,filteredChats:filteredChats});}else{return _objectSpread({},state);}case\"SET_PINNED\":var pinned=state.chats[action.id];if(pinned){pinned.isPinned=action.value;state.chatContacts.sort(function(a,b){return b.uid-a.uid;});return _objectSpread({},state);}else{return _objectSpread({},state);}default:return _objectSpread({},state);}};export default chats;","map":null,"metadata":{},"sourceType":"module"}