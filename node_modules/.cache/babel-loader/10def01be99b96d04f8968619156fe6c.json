{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Row,Col,Spinner}from\"reactstrap\";import Breadcrumbs from\"../../components/@vuexy/breadCrumbs/BreadCrumb\";import DataTableEmployees from\"./DataTableEmployees\";import EmployeesAdd from\"./EmployeesAdd\";import EmployeesEdit from\"./EmployeesEdit\";import axios from'axios';import{api_query}from\"../../api/ApiConstant\";var EmployeesPage=/*#__PURE__*/function(_React$Component){_inherits(EmployeesPage,_React$Component);var _super=_createSuper(EmployeesPage);function EmployeesPage(props){var _this;_classCallCheck(this,EmployeesPage);_this=_super.call(this,props);_this.changeViewPage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(typeView,resultEdit){var tmp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeView=='add')){_context.next=5;break;}_context.next=3;return _this.setState({addPage:true,editPage:false});case 3:_context.next=19;break;case 5:if(!(typeView=='edit')){_context.next=17;break;}_context.next=8;return _this.tarikDataDept();case 8:_context.next=10;return _this.tarikDataPosition();case 10:tmp=resultEdit;tmp.all_dept_name=_this.state.dept_name;tmp.all_position=_this.state.position;// console.log('new data tmp : ', tmp)\n_context.next=15;return _this.setState({editPage:true,editData:tmp,addPage:false});case 15:_context.next=19;break;case 17:_context.next=19;return _this.setState({addPage:false,editPage:false});case 19:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.tarikDataDept=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var sql,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('tarik data');// let sql = `\n//     select * from employees_new limit 10000;\n// `\nsql=\"\\n    select * from departments_new\\n    \";_context2.next=4;return axios.post(api_query,{query:sql}).then(function(result){var res=result.data.response;// console.log('result : ', result)\nif(res.length==''){return[];}var tmp=[];for(var index=0;index<res.length;index++){var element=res[index];// console.log('dataaaaa : ', element)\nvar data={};data.id=element.id;data.value=element.id;data.label=element.dept_name;tmp.push(data);// console.log('tiap push : ', tmp)\n}// console.log('hasil push : ', tmp)\n// return res;\nreturn tmp;}).catch(function(err){console.log('error : ',err);return[];});case 4:result=_context2.sent;_context2.next=7;return _this.setState({dept_name:result});case 7:case\"end\":return _context2.stop();}}},_callee2);}));_this.tarikDataPosition=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var sql,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// console.log('tarik data')\n// let sql = `\n//     select * from employees_new limit 10000;\n// `\nsql=\"\\n      select * from position_management\\n      \";_context3.next=3;return axios.post(api_query,{query:sql}).then(function(result){var res=result.data.response;// console.log('result : ', result)\nif(res.length==''){return[];}var tmp=[];for(var index=0;index<res.length;index++){var element=res[index];// console.log('dataaaaa : ', element)\nvar data={};data.id=element.id;data.value=element.id;data.label=element.position;tmp.push(data);// console.log('tiap push : ', tmp)\n}// console.log('hasil push : ', tmp)\n// return res;\nreturn tmp;}).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context3.sent;_context3.next=6;return _this.setState({position:result});case 6:case\"end\":return _context3.stop();}}},_callee3);}));_this.state={addPage:false,editPage:false,editData:null,dept_name:null,position:null};return _this;}_createClass(EmployeesPage,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.addPage?/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"Employees Add\",breadCrumbParent:\"Employees\",breadCrumbActive:\"Employees Add\"}):this.state.editPage?/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"Employees Edit\",breadCrumbParent:\"Employees\",breadCrumbActive:\"Employees Edit\"}):/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"Employees\",breadCrumbParent:\"Employees\",breadCrumbActive:\"Employees\"}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},this.state.addPage?/*#__PURE__*/React.createElement(EmployeesAdd,Object.assign({},this.state,this.props,{changeViewPage:this.changeViewPage}))// <Spinner color=\"primary\" />\n:this.state.editPage?/*#__PURE__*/React.createElement(EmployeesEdit,Object.assign({},this.state,this.props,{changeViewPage:this.changeViewPage})):/*#__PURE__*/React.createElement(DataTableEmployees,Object.assign({},this.state,this.props,{changeViewPage:this.changeViewPage})))));}}]);return EmployeesPage;}(React.Component);export default EmployeesPage;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/employees/EmployeesPage.js"],"names":["React","Row","Col","Spinner","Breadcrumbs","DataTableEmployees","EmployeesAdd","EmployeesEdit","axios","api_query","EmployeesPage","props","changeViewPage","typeView","resultEdit","setState","addPage","editPage","tarikDataDept","tarikDataPosition","tmp","all_dept_name","state","dept_name","all_position","position","editData","console","log","sql","post","query","then","result","res","data","response","length","index","element","id","value","label","push","catch","err","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { Row, Col, Spinner } from \"reactstrap\"\r\nimport Breadcrumbs from \"../../components/@vuexy/breadCrumbs/BreadCrumb\"\r\nimport DataTableEmployees from \"./DataTableEmployees\"\r\nimport EmployeesAdd from \"./EmployeesAdd\"\r\nimport EmployeesEdit from \"./EmployeesEdit\"\r\nimport axios from 'axios';\r\nimport { api_query } from \"../../api/ApiConstant\"\r\n\r\n\r\nclass EmployeesPage extends React.Component {\r\n  constructor(props){\r\n      super(props);\r\n      this.state = {\r\n          addPage: false,\r\n          editPage: false,\r\n          editData: null,\r\n          dept_name: null,\r\n          position: null,\r\n\r\n      }\r\n  }\r\n\r\n  changeViewPage = async(typeView, resultEdit) =>{\r\n    if (typeView == 'add') {\r\n        await this.setState({addPage: true, editPage: false})\r\n    }else if (typeView == 'edit') {\r\n      await this.tarikDataDept();\r\n      await this.tarikDataPosition();\r\n      var tmp = resultEdit\r\n      tmp.all_dept_name = this.state.dept_name\r\n      tmp.all_position = this.state.position\r\n      // console.log('new data tmp : ', tmp)\r\n      await this.setState({editPage: true, editData: tmp, addPage: false})\r\n      // await this.setState({editPage: true, editData: resultEdit, addPage: false})\r\n    }\r\n    else{\r\n        await this.setState({addPage: false, editPage: false})\r\n    }\r\n  }\r\n\r\n  tarikDataDept = async() =>{\r\n    console.log('tarik data')\r\n    // let sql = `\r\n    //     select * from employees_new limit 10000;\r\n    // `\r\n\r\n    let sql = `\r\n    select * from departments_new\r\n    `\r\n    var result = await axios.post(api_query, {\r\n                                query : sql\r\n                            })\r\n                                .then(result => {\r\n                                let res = result.data.response\r\n                                // console.log('result : ', result)\r\n                                if (res.length == '') {\r\n                                    return []\r\n                                }\r\n\r\n                                var tmp = []\r\n                                for (let index = 0; index < res.length; index++) {\r\n                                  const element = res[index];\r\n                                  // console.log('dataaaaa : ', element)\r\n                                  var data = {}\r\n                                  data.id = element.id\r\n                                  data.value = element.id\r\n                                  data.label = element.dept_name\r\n                                  tmp.push(data)\r\n                                  // console.log('tiap push : ', tmp)\r\n                                }\r\n                                // console.log('hasil push : ', tmp)\r\n                                // return res;\r\n                                return tmp;\r\n                            }).catch(err => {\r\n                                console.log('error : ', err)\r\n                                return []\r\n                            })\r\n    await this.setState({dept_name: result})\r\n    }\r\n\r\n  tarikDataPosition = async() =>{\r\n      // console.log('tarik data')\r\n      // let sql = `\r\n      //     select * from employees_new limit 10000;\r\n      // `\r\n  \r\n      let sql = `\r\n      select * from position_management\r\n      `\r\n      var result = await axios.post(api_query, {\r\n                                  query : sql\r\n                              })\r\n                                  .then(result => {\r\n                                  let res = result.data.response\r\n                                  // console.log('result : ', result)\r\n                                  if (res.length == '') {\r\n                                      return []\r\n                                  }\r\n  \r\n                                  var tmp = []\r\n                                  for (let index = 0; index < res.length; index++) {\r\n                                    const element = res[index];\r\n                                    // console.log('dataaaaa : ', element)\r\n                                    var data = {}\r\n                                    data.id = element.id\r\n                                    data.value = element.id\r\n                                    data.label = element.position\r\n                                    tmp.push(data)\r\n                                    // console.log('tiap push : ', tmp)\r\n                                  }\r\n                                  // console.log('hasil push : ', tmp)\r\n                                  // return res;\r\n                                  return tmp;\r\n                              }).catch(err => {\r\n                                  console.log('error : ', err)\r\n                                  return []\r\n                              })\r\n        await this.setState({position: result})\r\n      }\r\n      \r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.state.addPage ? \r\n            <Breadcrumbs\r\n                breadCrumbTitle=\"Employees Add\"\r\n                breadCrumbParent=\"Employees\"\r\n                breadCrumbActive=\"Employees Add\"\r\n            />\r\n        :\r\n        this.state.editPage ? \r\n            <Breadcrumbs\r\n                breadCrumbTitle=\"Employees Edit\"\r\n                breadCrumbParent=\"Employees\"\r\n                breadCrumbActive=\"Employees Edit\"\r\n            />\r\n        :\r\n            <Breadcrumbs\r\n                breadCrumbTitle=\"Employees\"\r\n                breadCrumbParent=\"Employees\"\r\n                breadCrumbActive=\"Employees\"\r\n            />\r\n         }\r\n        <Row>\r\n\r\n          <Col sm=\"12\">\r\n              {this.state.addPage ? \r\n                <EmployeesAdd {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\r\n                // <Spinner color=\"primary\" />\r\n              : \r\n              this.state.editPage ? \r\n                <EmployeesEdit {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\r\n              : \r\n                <DataTableEmployees {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\r\n              }\r\n          </Col>\r\n\r\n        </Row>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EmployeesPage"]},"metadata":{},"sourceType":"module"}