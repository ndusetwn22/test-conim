{"ast":null,"code":"import _toConsumableArray from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import ReactDOM from\"react-dom\";import classnames from\"classnames\";import{history}from\"../../../history\";import PerfectScrollbar from\"react-perfect-scrollbar\";import{AlertTriangle}from\"react-feather\";var Autocomplete=/*#__PURE__*/function(_React$Component){_inherits(Autocomplete,_React$Component);var _super=_createSuper(Autocomplete);function Autocomplete(props){var _this;_classCallCheck(this,Autocomplete);_this=_super.call(this,props);_this.onSuggestionItemClick=function(url,e){if(_this.props.onSuggestionClick){_this.props.onSuggestionClick(e);}_this.setState({activeSuggestion:0,showSuggestions:false,userInput:e.currentTarget.innerText});if(url)history.push(url);};_this.onSuggestionItemHover=function(index){_this.setState({activeSuggestion:index});};_this.onChange=function(e){var userInput=e.currentTarget.value;_this.setState({activeSuggestion:0,showSuggestions:true,userInput:userInput});if(e.target.value<1){_this.setState({showSuggestions:false});}};_this.onInputClick=function(e){e.stopPropagation();};_this.onKeyDown=function(e){var _this$state=_this.state,activeSuggestion=_this$state.activeSuggestion,showSuggestions=_this$state.showSuggestions,userInput=_this$state.userInput;var filterKey=_this.props.filterKey;var suggestionList=ReactDOM.findDOMNode(_this.suggestionList);// User pressed the up arrow\nif(e.keyCode===38&&activeSuggestion!==0){_this.setState({activeSuggestion:activeSuggestion-1});if(e.target.value.length>-1&&suggestionList!==null&&activeSuggestion<=_this.filteredData.length/2){suggestionList.scrollTop=0;}}// User pressed the down arrow\nelse if(e.keyCode===40&&activeSuggestion<_this.filteredData.length-1){_this.setState({activeSuggestion:activeSuggestion+1});if(e.target.value.length>-1&&suggestionList!==null&&activeSuggestion>=_this.filteredData.length/2){suggestionList.scrollTop=suggestionList.scrollHeight;}}// User Pressed ESC\nelse if(e.keyCode===27){_this.setState({showSuggestions:false,userInput:\"\"});}// User Pressed ENTER\nelse if(e.keyCode===13&&showSuggestions){if(typeof _this.filteredData[activeSuggestion]==\"undefined\"){return;}else{_this.onSuggestionItemClick(_this.filteredData[activeSuggestion].link,e);_this.setState({userInput:_this.filteredData[activeSuggestion][filterKey],showSuggestions:false});}}else{return;}// Custom Keydown Event\nif(_this.props.onKeyDown!==undefined&&_this.props.onKeyDown!==null&&_this.props.onKeyDown){_this.props.onKeyDown(e,userInput);}};_this.renderGroupedSuggestion=function(arr){var _this$props=_this.props,filterKey=_this$props.filterKey,customRender=_this$props.customRender;var _assertThisInitialize=_assertThisInitialized(_this),onSuggestionItemClick=_assertThisInitialize.onSuggestionItemClick,onSuggestionItemHover=_assertThisInitialize.onSuggestionItemHover,_assertThisInitialize2=_assertThisInitialize.state,activeSuggestion=_assertThisInitialize2.activeSuggestion,userInput=_assertThisInitialize2.userInput;var renderSuggestion=function renderSuggestion(item,i){if(!customRender){return/*#__PURE__*/React.createElement(\"li\",{className:classnames(\"suggestion-item\",{active:_this.filteredData.indexOf(item)===activeSuggestion}),key:item[filterKey],onClick:function onClick(e){return onSuggestionItemClick(item.link,e);},onMouseEnter:function onMouseEnter(){_this.onSuggestionItemHover(_this.filteredData.indexOf(item));}},item[filterKey]);}else if(customRender){return customRender(item,i,_this.filteredData,activeSuggestion,onSuggestionItemClick,onSuggestionItemHover,userInput);}else{return null;}};return arr.map(function(item,i){return renderSuggestion(item,i);});};_this.renderUngroupedSuggestions=function(){var _this$filteredData;var _this$props2=_this.props,filterKey=_this$props2.filterKey,suggestions=_this$props2.suggestions,customRender=_this$props2.customRender,suggestionLimit=_this$props2.suggestionLimit;var _assertThisInitialize3=_assertThisInitialized(_this),onSuggestionItemClick=_assertThisInitialize3.onSuggestionItemClick,onSuggestionItemHover=_assertThisInitialize3.onSuggestionItemHover,_assertThisInitialize4=_assertThisInitialize3.state,activeSuggestion=_assertThisInitialize4.activeSuggestion,userInput=_assertThisInitialize4.userInput;_this.filteredData=[];var sortSingleData=suggestions.filter(function(i){var startCondition=i[filterKey].toLowerCase().startsWith(userInput.toLowerCase()),includeCondition=i[filterKey].toLowerCase().includes(userInput.toLowerCase());if(startCondition){return startCondition;}else if(!startCondition&&includeCondition){return includeCondition;}else{return null;}}).slice(0,suggestionLimit);(_this$filteredData=_this.filteredData).push.apply(_this$filteredData,_toConsumableArray(sortSingleData));return sortSingleData.map(function(suggestion,index){if(!customRender){return/*#__PURE__*/React.createElement(\"li\",{className:classnames(\"suggestion-item\",{active:_this.filteredData.indexOf(suggestion)===activeSuggestion}),key:suggestion[filterKey],onClick:function onClick(e){return onSuggestionItemClick(suggestion.link?suggestion.link:null,e);},onMouseEnter:function onMouseEnter(){return _this.onSuggestionItemHover(_this.filteredData.indexOf(suggestion));}},suggestion[filterKey]);}else if(customRender){return customRender(suggestion,index,_this.filteredData,activeSuggestion,onSuggestionItemClick,onSuggestionItemHover,userInput);}else{return null;}});};_this.renderSuggestions=function(){var _this$props3=_this.props,filterKey=_this$props3.filterKey,grouped=_this$props3.grouped,filterHeaderKey=_this$props3.filterHeaderKey,suggestions=_this$props3.suggestions;var _assertThisInitialize5=_assertThisInitialized(_this),renderUngroupedSuggestions=_assertThisInitialize5.renderUngroupedSuggestions,userInput=_assertThisInitialize5.state.userInput;// Checks if suggestions are grouped or not.\nif(grouped===undefined||grouped===null||!grouped){return renderUngroupedSuggestions();}else{_this.filteredData=[];return suggestions.map(function(suggestion){var _this$filteredData2;var sortData=suggestion.data.filter(function(i){var startCondition=i[filterKey].toLowerCase().startsWith(userInput.toLowerCase()),includeCondition=i[filterKey].toLowerCase().includes(userInput.toLowerCase());if(startCondition){return startCondition;}else if(!startCondition&&includeCondition){return includeCondition;}else{return null;}}).slice(0,suggestion.searchLimit);(_this$filteredData2=_this.filteredData).push.apply(_this$filteredData2,_toConsumableArray(sortData));return/*#__PURE__*/React.createElement(React.Fragment,{key:suggestion[filterHeaderKey]},/*#__PURE__*/React.createElement(\"li\",{className:\"suggestion-item suggestion-title text-primary text-bold-600\"},suggestion[filterHeaderKey]),sortData.length?_this.renderGroupedSuggestion(sortData):/*#__PURE__*/React.createElement(\"li\",{className:\"suggestion-item no-result\"},/*#__PURE__*/React.createElement(AlertTriangle,{size:15}),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle ml-50\"},\"No Result\")));});}};_this.clearInput=function(val){if(_this.props.clearInput&&!val){_this.setState({userInput:\"\"});}};_this.handleExtenalClick=function(e){var container=_this.refs.container;var target=e.target;if(target!==container&&!container.contains(target)){_this.setState({showSuggestions:false});if(_this.props.externalClick)_this.props.externalClick(e);}};_this.state={activeSuggestion:0,showSuggestions:false,userInput:\"\",focused:false,openUp:false};_this.filteredData=[];document.body.addEventListener(\"click\",_this.handleExtenalClick);return _this;}// Suggestion Click Event\n_createClass(Autocomplete,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var textInput=ReactDOM.findDOMNode(this.input);var _this$props4=this.props,autoFocus=_this$props4.autoFocus,onSuggestionsShown=_this$props4.onSuggestionsShown,clearInput=_this$props4.clearInput;// For searchbar focus\nif(textInput!==null&&autoFocus){textInput.focus();}if(this.props.defaultSuggestions&&prevState.showSuggestions===false&&this.state.focused){this.setState({showSuggestions:true});}// Clear Input\nif(clearInput===false&&this.state.userInput.length){this.setState({userInput:\"\"});}// Function on Suggestions Shown\nif(onSuggestionsShown&&this.state.showSuggestions){onSuggestionsShown(this.state.userInput);}if(this.props.defaultSuggestions&&prevState.focused===false&&this.state.focused===true){this.setState({showSuggestions:true});}}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.defaultSuggestions&&this.state.focused){this.setState({showSuggestions:true});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.body.removeEventListener(\"click\",this.handleExtenalClick);}},{key:\"render\",value:function render(){var _this2=this;var _onChange=this.onChange,_onKeyDown=this.onKeyDown,_this$state2=this.state,showSuggestions=_this$state2.showSuggestions,userInput=_this$state2.userInput,openUp=_this$state2.openUp;var suggestionsListComponent;if(showSuggestions){suggestionsListComponent=/*#__PURE__*/React.createElement(PerfectScrollbar,{className:classnames(\"suggestions-list\",{\"open-up\":openUp}),ref:function ref(el){return _this2.suggestionList=el;},component:\"ul\",options:{wheelPropagation:false}},this.renderSuggestions());}return/*#__PURE__*/React.createElement(\"div\",{className:\"vx-autocomplete-container\",ref:\"container\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:function onChange(e){_onChange(e);if(_this2.props.onChange){_this2.props.onChange(e);}},onKeyDown:function onKeyDown(e){return _onKeyDown(e);},value:userInput,className:\"vx-autocomplete-search \".concat(this.props.className?this.props.className:\"\"),placeholder:this.props.placeholder,onClick:this.onInputClick,ref:function ref(el){return _this2.input=el;},onFocus:function onFocus(e){_this2.setState({focused:true});},autoFocus:this.props.autoFocus,onBlur:function onBlur(e){// this.onBlur(e)\nif(_this2.props.onBlur)_this2.props.onBlur(e);_this2.setState({focused:false});}}),suggestionsListComponent);}}]);return Autocomplete;}(React.Component);export default Autocomplete;","map":null,"metadata":{},"sourceType":"module"}