{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{api_query}from\"../../../api/ApiConstant\";import{Card,CardBody,CardHeader,CardTitle,Badge,Input,Button}from\"reactstrap\";import DataTable from\"react-data-table-component\";import{Star,Search,Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight,Inbox,Settings}from\"react-feather\";import axios from'axios';// import ModalDigimon from \"./ModalDigimon\"\nimport{history}from\"../../../../src/history\";import{CSVLink,CSVDownload}from\"react-csv\";import ReactExport from\"react-data-export\";var ExcelFile=ReactExport.ExcelFile;var ExcelSheet=ReactExport.ExcelFile.ExcelSheet;var ExcelColumn=ReactExport.ExcelFile.ExcelColumn;var CustomHeader=function CustomHeader(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"add-new\"},/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"bg-gradient-success\",onClick:function onClick(){return props.karyawanAdd();}},\"Tambah Karyawan\")),/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},/*#__PURE__*/React.createElement(Input,{value:props.value,onChange:function onChange(e){return props.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:\"15\"}))));};var ApprovalComponent=function ApprovalComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button.Ripple,{className:\"mr-1 bg-gradient-success\",color:\"none\",size:\"sm\",onClick:function onClick(){console.log('props : ',props);console.log('digimon : ',props.row.name);return props.isVisible(props.row.name,props.row.img);}},\" Approve\"));};var RejectComponent=function RejectComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button.Ripple,{className:\"mr-1 bg-gradient-danger\",color:\"none\",size:\"sm\",onClick:function onClick(){console.log('props : ',props);console.log('digimon : ',props.row.name);return props.isVisible(props.row.name,props.row.img);}},\" Reject\"));};var ActionsComponent=function ActionsComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-icon bg-gradient-success\",color:\"none\",onClick:function onClick(){// console.log('props : ', props);\nreturn props.isView(props.row,props.row.id,props.row.cff_id);}},/*#__PURE__*/React.createElement(Settings,{size:16})));};var KaryawanTable=/*#__PURE__*/function(_React$Component){_inherits(KaryawanTable,_React$Component);var _super=_createSuper(KaryawanTable);function KaryawanTable(){var _this;_classCallCheck(this,KaryawanTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modalVisible:false,modalImage:'',modalDigimonName:'',myProfile:null,columns:[{name:\"NIK\",selector:\"nik\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.nik,className:\"d-block text-bold-500 text-truncate mb-0\"},row.nik)));}},{name:\"Nama Lengkap\",selector:\"name\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.name)));}},{name:\"Departemen\",selector:\"nama_departemen\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.nama_departemen,className:\"d-block text-bold-500 text-truncate mb-0\"},row.nama_departemen)));}},{name:\"Status Aktif\",selector:\"active\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.active=='Y'?'Aktif':'Tidak Aktif',className:\"d-block text-bold-500 text-truncate mb-0\"},row.active=='Y'?'Aktif':'Tidak Aktif')));}},{name:\"Actions\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ActionsComponent,{row:row,isView:_this.viewSS}));}}],data:[],csvData:[{firstname:\"Ahmed\",lastname:\"Tomi\",email:\"ah@smthing.co.com\"},{firstname:\"Raed\",lastname:\"Labes\",email:\"rl@smthing.co.com\"},{firstname:\"Yezzi\",lastname:\"Min l3b\",email:\"ymin@cocococo.com\"}],filteredData:[],value:\"\"};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.isLogin('super_admin');case 2:_context.next=4;return _this.tarikDataTable();case 4:case\"end\":return _context.stop();}}},_callee);}));_this.karyawanAdd=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('karyawan add');_context2.next=3;return _this.props.changeViewPage('add');case 3:case\"end\":return _context2.stop();}}},_callee2);}));_this.isLogin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(role){var myProfile;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}else if(JSON.parse(localStorage.getItem('account')).role!==role){history.push(\"/pages/login\");}else{myProfile=JSON.parse(localStorage.getItem('account'));console.log('myProfile',myProfile);_this.setState({myProfile:myProfile});}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.tarikDataTable=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var sql,result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sql=\"\\n        select dmu.id, dmu.nik, dmu.name, convert_from(df_decrypt(dmu.password), 'UTF8') as \\\"password\\\",\\n        dmu.role, dmu.job_level, dmu.departement_id, dmu.active, dmd.nama_departemen from df_master_user dmu\\n        join df_master_departement dmd\\n        on dmu.departement_id = dmd.id\\n        where dmu.departement_id != 0\\n    \";_context5.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(result){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\nconsole.log('result query : ',res);console.log('query leng :',res.length);if(!(res.length=='')){_context4.next=7;break;}return _context4.abrupt(\"return\",[]);case 7:_context4.next=9;return _this.setState({data:res});case 9:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref5.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context5.sent;case 4:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleFilter=function(e){var value=e.target.value;var data=_this.state.data;var filteredData=_this.state.filteredData;_this.setState({value:value});if(value.length){filteredData=data.filter(function(item){// console.log('ITEM : ', item)\nvar startsWithCondition=item.nik.toLowerCase().startsWith(value.toLowerCase())||item.name.toLowerCase().startsWith(value.toLowerCase())||item.nama_departemen.toLowerCase().startsWith(value.toLowerCase());// item.name.toLowerCase().startsWith(value.toLowerCase())\n// item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.status.toLowerCase().startsWith(value.toLowerCase())\nvar includesCondition=item.nik.toLowerCase().includes(value.toLowerCase())||item.name.toLowerCase().includes(value.toLowerCase())||item.nama_departemen.toLowerCase().includes(value.toLowerCase());// item.name.toLowerCase().includes(value.toLowerCase())\n// item.date.toLowerCase().includes(value.toLowerCase()) ||\n// item.email.toLowerCase().includes(value.toLowerCase()) ||\n// item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n// item.status.toLowerCase().includes(value.toLowerCase())\nif(startsWithCondition){return startsWithCondition;}else if(!startsWithCondition&&includesCondition){return includesCondition;}else return null;});_this.setState({filteredData:filteredData});}};_this.viewSS=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data,id,cff_id){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log('view SS : ',id);console.log('data row : ',data);_this.props.changeViewPage('edit',data,id);case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x3,_x4,_x5){return _ref6.apply(this,arguments);};}();return _this;}_createClass(KaryawanTable,[{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,columns=_this$state.columns,value=_this$state.value,filteredData=_this$state.filteredData;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Karyawan\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:value.length?filteredData:data,columns:columns,noHeader:true,pagination:true,subHeader:true,subHeaderComponent:/*#__PURE__*/React.createElement(CustomHeader,{value:value,handleFilter:this.handleFilter,karyawanAdd:this.karyawanAdd})// <CustomHeader value={value} handleFilter={this.handleFilter} tarikData={this.tarikDataTable}/>\n}))));}}]);return KaryawanTable;}(React.Component);export default KaryawanTable;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/admin/data-karyawan/KaryawanTable.js"],"names":["React","api_query","Card","CardBody","CardHeader","CardTitle","Badge","Input","Button","DataTable","Star","Search","Edit","Trash","ChevronDown","Plus","Check","ChevronLeft","ChevronRight","Inbox","Settings","axios","history","CSVLink","CSVDownload","ReactExport","ExcelFile","ExcelSheet","ExcelColumn","CustomHeader","props","karyawanAdd","value","e","handleFilter","ApprovalComponent","console","log","row","name","isVisible","img","RejectComponent","ActionsComponent","isView","id","cff_id","KaryawanTable","state","modalVisible","modalImage","modalDigimonName","myProfile","columns","selector","sortable","minWidth","cell","nik","nama_departemen","active","viewSS","data","csvData","firstname","lastname","email","filteredData","componentDidMount","isLogin","tarikDataTable","changeViewPage","role","localStorage","getItem","undefined","push","JSON","parse","setState","sql","post","query","then","result","res","response","rows","length","catch","err","target","filter","item","startsWithCondition","toLowerCase","startsWith","includesCondition","includes","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport { api_query } from \"../../../api/ApiConstant\"\nimport {\n  Card,\n  CardBody,\n  CardHeader,\n  CardTitle,\n  Badge,\n  Input,\n  Button\n} from \"reactstrap\"\nimport DataTable from \"react-data-table-component\"\nimport { Star, Search,\n    Edit,\n    Trash,\n    ChevronDown,\n    Plus,\n    Check,\n    ChevronLeft,\n    ChevronRight,\n    Inbox,\n    Settings} from \"react-feather\"\nimport axios from 'axios'\n// import ModalDigimon from \"./ModalDigimon\"\nimport { history } from \"../../../../src/history\"\nimport { CSVLink, CSVDownload } from \"react-csv\";\nimport ReactExport from \"react-data-export\";\n\nconst ExcelFile = ReactExport.ExcelFile;\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\n\n\nconst CustomHeader = props => {\n  return (\n    <div className=\"d-flex flex-wrap justify-content-between\">\n      {/* <div className=\"d-flex flex-wrap justify-content-end\"> */}\n      <div className=\"add-new\">\n        <Button.Ripple color=\"none\" className=\"bg-gradient-success\" onClick={() => props.karyawanAdd()}>Tambah Karyawan</Button.Ripple>\n      </div>\n      <div className=\"position-relative has-icon-left mb-1\">\n        <Input value={props.value} onChange={e => props.handleFilter(e)} />\n        <div className=\"form-control-position\">\n          <Search size=\"15\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst ApprovalComponent = props => {\n    return (\n      <div className=\"data-list-action\">\n        <Button.Ripple className=\"mr-1 bg-gradient-success\" color=\"none\" size=\"sm\"\n          onClick={()=> {\n            console.log('props : ', props);\n            console.log('digimon : ', props.row.name);\n            return props.isVisible(props.row.name, props.row.img)\n          }}> Approve</Button.Ripple>\n      </div>\n    )\n  }\n\n  const RejectComponent = props => {\n    return (\n      <div className=\"data-list-action\">\n        <Button.Ripple className=\"mr-1 bg-gradient-danger\" color=\"none\" size=\"sm\"\n          onClick={()=> {\n            console.log('props : ', props);\n            console.log('digimon : ', props.row.name);\n            return props.isVisible(props.row.name, props.row.img)\n          }}> Reject</Button.Ripple>\n      </div>\n    )\n  }\n\n  const ActionsComponent = props => {\n    return (\n      <div className=\"data-list-action\">\n        {/* <Button.Ripple className=\"mr-1 bg-gradient-success\" color=\"none\" size=\"sm\"\n          onClick={()=> {\n            // console.log('props : ', props);\n            return props.isView(props.row, props.row.id, props.row.cff_id)\n          }}>View</Button.Ripple> */}\n\n            {/* <Button color=\"none\" className=\"bg-gradient-success\" onClick={() => console.log('wkwk')}>\n              <Check size={14}/>\n            </Button> */}\n\n            <Button className='btn-icon bg-gradient-success' color='none'\n              onClick={()=> {\n                // console.log('props : ', props);\n                return props.isView(props.row, props.row.id, props.row.cff_id)\n              }}>\n              <Settings size={16} />\n            </Button>\n      </div>\n    )\n  }\n\n\n\nclass KaryawanTable extends React.Component {\n  state = {\n    modalVisible: false,\n    modalImage: '',\n    modalDigimonName: '',\n    myProfile: null,\n    columns: [\n      {\n        name: \"NIK\",\n        selector: \"nik\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row =>\n        (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.nik}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.nik}\n                {/* {row.tema} */}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Nama Lengkap\",\n        selector: \"name\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.name}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.name}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Departemen\",\n        selector: \"nama_departemen\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.nama_departemen}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.nama_departemen}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Status Aktif\",\n        selector: \"active\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.active == 'Y' ? 'Aktif':'Tidak Aktif'}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.active == 'Y' ? 'Aktif':'Tidak Aktif'}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Actions\",\n        sortable: true,\n        cell: row =>\n        (\n          <>\n            <ActionsComponent\n              row={row}\n              isView={this.viewSS}\n            />\n          </>\n        )\n      }\n    ],\n    data: [],\n    csvData:  [\n      { firstname: \"Ahmed\", lastname: \"Tomi\", email: \"ah@smthing.co.com\" },\n      { firstname: \"Raed\", lastname: \"Labes\", email: \"rl@smthing.co.com\" },\n      { firstname: \"Yezzi\", lastname: \"Min l3b\", email: \"ymin@cocococo.com\" }\n    ],\n    filteredData: [],\n    value: \"\"\n  }\n\n  componentDidMount=async()=>{\n    await this.isLogin('super_admin');\n    await this.tarikDataTable();\n\n  }\n\n  karyawanAdd = async() =>{\n    console.log('karyawan add')\n    await this.props.changeViewPage('add')\n\n  }\n\n  isLogin = async(role) =>{\n    if (localStorage.getItem('account') == undefined || localStorage.getItem('account') == null) {\n      history.push(\"/pages/login\")\n    }else if(JSON.parse(localStorage.getItem('account')).role !== role){\n      history.push(\"/pages/login\")\n    }\n    else{\n      var myProfile = JSON.parse(localStorage.getItem('account'))\n      console.log('myProfile', myProfile)\n      this.setState({myProfile: myProfile})\n    }\n  }\n\n  tarikDataTable = async() =>{\n\n    let sql = `\n        select dmu.id, dmu.nik, dmu.name, convert_from(df_decrypt(dmu.password), 'UTF8') as \"password\",\n        dmu.role, dmu.job_level, dmu.departement_id, dmu.active, dmd.nama_departemen from df_master_user dmu\n        join df_master_departement dmd\n        on dmu.departement_id = dmd.id\n        where dmu.departement_id != 0\n    `\n    var result = await axios.post(api_query, {\n                                query : sql\n                            })\n                                .then(async(result) => {\n                                // let res = result.data.response\n                                var res = result.data.response.rows\n\n                                // console.log('result : ', result)\n                                // console.log('result postgres : ', result)\n                                console.log('result query : ', res)\n                                console.log('query leng :', res.length)\n                                if (res.length == '') {\n                                    return []\n                                }else{\n                                  await this.setState({data: res})\n                                }\n                            }).catch(err => {\n                                console.log('error : ', err)\n                                return []\n                            })\n      // await this.setState({data: result})\n    }\n\n  handleFilter = e => {\n    let value = e.target.value\n    let data = this.state.data\n    let filteredData = this.state.filteredData\n    this.setState({ value })\n\n    if (value.length) {\n      filteredData = data.filter(item => {\n        // console.log('ITEM : ', item)\n        let startsWithCondition =\n          item.nik.toLowerCase().startsWith(value.toLowerCase()) ||\n          item.name.toLowerCase().startsWith(value.toLowerCase()) ||\n          item.nama_departemen.toLowerCase().startsWith(value.toLowerCase())\n          // item.name.toLowerCase().startsWith(value.toLowerCase())\n          // item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n          // item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n          // item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n          // item.status.toLowerCase().startsWith(value.toLowerCase())\n        let includesCondition =\n          item.nik.toLowerCase().includes(value.toLowerCase()) ||\n          item.name.toLowerCase().includes(value.toLowerCase()) ||\n          item.nama_departemen.toLowerCase().includes(value.toLowerCase())\n          // item.name.toLowerCase().includes(value.toLowerCase())\n          // item.date.toLowerCase().includes(value.toLowerCase()) ||\n          // item.email.toLowerCase().includes(value.toLowerCase()) ||\n          // item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n          // item.status.toLowerCase().includes(value.toLowerCase())\n\n        if (startsWithCondition) {\n          return startsWithCondition\n        } else if (!startsWithCondition && includesCondition) {\n          return includesCondition\n        } else return null\n      })\n      this.setState({ filteredData })\n    }\n  }\n\n  viewSS = async(data, id, cff_id) =>{\n    console.log('view SS : ', id)\n    console.log('data row : ', data)\n    this.props.changeViewPage('edit', data, id)\n  }\n\n  render() {\n    let { data, columns, value, filteredData } = this.state\n    return (\n        <>\n        {/* <CSVLink data={this.state.csvData}>Download me</CSVLink>;\n\n        <CSVDownload data={this.state.csvData} target=\"_blank\" />; */}\n\n            {/* <ExcelFile element={<button>Download Data</button>}>\n                <ExcelSheet data={this.state.csvData} name=\"Employees\">\n                    <ExcelColumn label=\"First Name\" value=\"firstname\"/>\n                    <ExcelColumn label=\"Last Name\" value=\"lastname\"/>\n                    <ExcelColumn label=\"Email\" value=\"email\"/>\n                    <ExcelColumn label=\"Marital Status\"\n                                 value={(col) => col.is_married ? \"Married\" : \"Single\"}/>\n                </ExcelSheet>\n                <ExcelSheet data={dataSet2} name=\"Leaves\">\n                    <ExcelColumn label=\"Name\" value=\"name\"/>\n                    <ExcelColumn label=\"Total Leaves\" value=\"total\"/>\n                    <ExcelColumn label=\"Remaining Leaves\" value=\"remaining\"/>\n                </ExcelSheet>\n            </ExcelFile> */}\n\n            \n            <Card>\n                <CardHeader>\n                <CardTitle>Karyawan</CardTitle>\n                </CardHeader>\n                <CardBody className=\"rdt_Wrapper\">\n                <DataTable\n                    className=\"dataTable-custom\"\n                    data={value.length ? filteredData : data}\n                    columns={columns}\n                    noHeader\n                    pagination\n                    subHeader\n                    subHeaderComponent={\n                    <CustomHeader value={value} handleFilter={this.handleFilter} karyawanAdd={this.karyawanAdd}/>\n                    // <CustomHeader value={value} handleFilter={this.handleFilter} tarikData={this.tarikDataTable}/>\n                    }\n                />\n                </CardBody>\n            </Card>\n            {/* <ModalDigimon {...this.state} {...this.props}\n                        // modalImage={this.state.modalImage}\n                        // modalVisible={this.state.modalVisible}\n                        toggleModal={this.toggleModalDigimon}></ModalDigimon> */}\n      </>\n    )\n  }\n}\n\nexport default KaryawanTable\n"]},"metadata":{},"sourceType":"module"}