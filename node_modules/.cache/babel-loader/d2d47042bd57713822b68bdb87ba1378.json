{"ast":null,"code":"import _defineProperty from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{api_query,project}from\"../../../../api/ApiConstant\";import firebase from\"../../../../firebase/firebase\";import axios from'axios';import{Card,CardHeader,CardTitle,CardBody,FormGroup,Row,Col,Input,Form,Button,Label,CustomInput,CardImg}from\"reactstrap\";// import img1 from \"../../../../assets/img/pages/content-img-1.jpg\"\n// import img2 from \"../../../../assets/img/pages/content-img-2.jpg\"\n// import img3 from \"../../../../assets/img/pages/content-img-3.jpg\"\nimport img1 from\"../../../../assets/img/pages/1.png\";import img2 from\"../../../../assets/img/pages/2.png\";import Checkbox from\"../../../../components/@vuexy/checkbox/CheckboxesVuexy\";import{Check,Star,Save,Send}from\"react-feather\";import{history}from\"../../../../../src/history\";import Select from\"react-select\";import SweetAlert from\"react-bootstrap-sweetalert\";import Spinner from\"../../../../components/@vuexy/spinner/Fallback-spinner\";import Toggle from\"react-toggle\";import\"react-toggle/style.css\";import\"../../../../assets/scss/plugins/forms/switch/react-toggle.scss\";var OpSsCreate=/*#__PURE__*/function(_React$Component){_inherits(OpSsCreate,_React$Component);var _super=_createSuper(OpSsCreate);function OpSsCreate(props){var _this;_classCallCheck(this,OpSsCreate);_this=_super.call(this,props);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.setState({isLoading:true});case 2:_context.next=4;return _this.isLogin('op_df');case 4:_context.next=6;return _this.tarikPartner();case 6:_context.next=8;return _this.tarikAtasan();case 8:_context.next=10;return _this.setState({isLoading:false});case 10:case\"end\":return _context.stop();}}},_callee);}));_this.onImageChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var reader;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({fotoKondisiSebelumFile:event.target.files});if(event.target.files&&event.target.files[0]){reader=new FileReader();reader.onload=function(e){_this.setState({fotoKondisiSebelum:e.target.result});};reader.readAsDataURL(event.target.files[0]);}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.onImageChange2=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var reader;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.setState({fotoKondisiSesudahFile:event.target.files});if(event.target.files&&event.target.files[0]){reader=new FileReader();reader.onload=function(e){_this.setState({fotoKondisiSesudah:e.target.result});};reader.readAsDataURL(event.target.files[0]);}case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.isLogin=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(role){var myProfile;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}else if(JSON.parse(localStorage.getItem('account')).role!==role){history.push(\"/pages/login\");}else{myProfile=JSON.parse(localStorage.getItem('account'));console.log('myProfile ss : ',myProfile);_this.setState({myProfile:myProfile});}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.tarikAtasan=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var sql,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:sql=\"\\n  select id as value,\\n    name as label,\\n    departement_id\\n  from df_master_user dmu\\n  where departement_id = \"+_this.state.myProfile.departement_id+\"\\n  and job_level = '4'\\n  \";_context6.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(result){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:res=result.data.response.rows;console.log('result query atasan : ',res);if(!(res.length=='')){_context5.next=4;break;}return _context5.abrupt(\"return\",[]);case 4:_context5.next=6;return _this.setState({dataAtasan:res});case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref6.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context6.sent;case 4:case\"end\":return _context6.stop();}}},_callee6);}));_this.tarikPartner=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var sql,result;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:sql=\"\\n  select id as value,\\n    name as label,\\n    departement_id\\n  from df_master_user dmu\\n  where departement_id = \"+_this.state.myProfile.departement_id+\"\\n  and job_level != '4'\\n  and job_level != '5'\\n  and dmu.id != \"+_this.state.myProfile.id+\"\\n  order by dmu.name asc\\n  \";_context8.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(result){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:res=result.data.response.rows;console.log('result query atasan : ',res);if(!(res.length=='')){_context7.next=4;break;}return _context7.abrupt(\"return\",[]);case 4:_context7.next=6;return _this.setState({dataPartner:res});case 6:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x5){return _ref8.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context8.sent;case 4:case\"end\":return _context8.stop();}}},_callee8);}));_this.formatNumber=function(num){var div=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\",\";console.log(num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,div));_this.setState({ssTest:num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,div)});// return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, div);\n};_this.numberWithCommas=function(x){// console.log('console with commas', parseInt(x.toLocaleString()))\nvar dummy=x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");_this.setState({ssTest:dummy});console.log('dummy : ',dummy);// x = x.toLocaleString();\n// x = parseInt(x)\n// x = x.toLocaleString();\n// console.log('x : ', x)\n// this.setState({ssTest: x})\n// this.setState({ssTest: x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")})\n// return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n// return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n};_this.handleAlertConfirm=function(state,value,title,text,type){if(value){_this.setState(_defineProperty({},state,value));_this.setState({sweetAlertTitleConfirm:title,sweetAlertTextConfirm:text,sweetAlertTypeConfirm:type});}else{_this.setState(_defineProperty({},state,value));_this.props.changeViewPage('page');}// if(text == \"Berhasil membuat SS\"){\n//   this.setState({ [state] : value })\n//   this.setState({sweetAlertTitle: title, sweetAlertText: text, sweetAlertType: type});\n//   // this.props.changeViewPage('page')\n// }else{}\n};_this.handleAlert=function(state,value,title,text,type){if(value){_this.setState(_defineProperty({},state,value));_this.setState({sweetAlertTitle:title,sweetAlertText:text,sweetAlertType:type});}else{_this.setState(_defineProperty({},state,value));}};_this.submitForm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var r,r2,myurl,myurl2,bucketName,file,storageRef,uploadTask,bucketName2,file2,storageRef2,uploadTask2,sql,result;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!(_this.state.ssAtasanSelected==''||_this.state.ssAtasanSelected==null)){_context11.next=4;break;}_context11.next=3;return _this.handleAlert('isSweetAlert',true,'Warning','Fasilitator Tidak Boleh Kosong','warning');case 3:return _context11.abrupt(\"return\",_context11.sent);case 4:if(!(_this.state.ssTema==''||_this.state.ssTema==null)){_context11.next=8;break;}_context11.next=7;return _this.handleAlert('isSweetAlert',true,'Warning','Tema Tidak Boleh Kosong','warning');case 7:return _context11.abrupt(\"return\",_context11.sent);case 8:if(!(_this.state.ssLokasi==''||_this.state.ssLokasi==null)){_context11.next=12;break;}_context11.next=11;return _this.handleAlert('isSweetAlert',true,'Warning','Lokasi Tidak Boleh Kosong','warning');case 11:return _context11.abrupt(\"return\",_context11.sent);case 12:if(!(_this.state.ssPermasalahan==''||_this.state.ssPermasalahan==null)){_context11.next=16;break;}_context11.next=15;return _this.handleAlert('isSweetAlert',true,'Warning','Permasalahan Tidak Boleh Kosong','warning');case 15:return _context11.abrupt(\"return\",_context11.sent);case 16:if(!(_this.state.ssImprovement==''||_this.state.ssImprovement==null)){_context11.next=20;break;}_context11.next=19;return _this.handleAlert('isSweetAlert',true,'Warning','Improvement Tidak Boleh Kosong','warning');case 19:return _context11.abrupt(\"return\",_context11.sent);case 20:if(!(_this.state.ssBiayaUraian==''||_this.state.ssBiayaUraian==null)){_context11.next=24;break;}_context11.next=23;return _this.handleAlert('isSweetAlert',true,'Warning','Biaya Uraian Tidak Boleh Kosong','warning');case 23:return _context11.abrupt(\"return\",_context11.sent);case 24:if(!(_this.state.ssBiaya==''||_this.state.ssBiaya==null)){_context11.next=28;break;}_context11.next=27;return _this.handleAlert('isSweetAlert',true,'Warning','Biaya Tidak Boleh Kosong','warning');case 27:return _context11.abrupt(\"return\",_context11.sent);case 28:if(!(_this.state.ssKeuntunganUraian==''||_this.state.ssKeuntunganUraian==null)){_context11.next=32;break;}_context11.next=31;return _this.handleAlert('isSweetAlert',true,'Warning','Keuntungan Uraian Tidak Boleh Kosong','warning');case 31:return _context11.abrupt(\"return\",_context11.sent);case 32:if(!(_this.state.ssKeuntungan==''||_this.state.ssKeuntungan==null)){_context11.next=38;break;}_context11.next=35;return _this.handleAlert('isSweetAlert',true,'Warning','Keuntungan Tidak Boleh Kosong','warning');case 35:return _context11.abrupt(\"return\",_context11.sent);case 38:_this.setState({isLoading:true});r=(Math.random()+5).toString(36).substring(2);r2=(Math.random()+10).toString(36).substring(2);// console.log(\"random\", r);\n// console.log(\"random\", r2);\nmyurl='';myurl2='';if(!(_this.state.fotoKondisiSebelum!=img1)){_context11.next=56;break;}bucketName=project;file=_this.state.fotoKondisiSebelumFile[0];_context11.next=48;return firebase.storage().ref(\"\".concat(bucketName,\"/ss/\").concat(_this.state.myProfile.id,\"/KondisiSebelum-\").concat(r));case 48:storageRef=_context11.sent;_context11.next=51;return storageRef.put(file);case 51:uploadTask=_context11.sent;_context11.next=54;return storageRef.getDownloadURL().catch(function(error){throw error;});case 54:myurl=_context11.sent;console.log('myurl : ',myurl);case 56:if(!(_this.state.fotoKondisiSesudah!=img2)){_context11.next=69;break;}bucketName2=project;file2=_this.state.fotoKondisiSesudahFile[0];_context11.next=61;return firebase.storage().ref(\"\".concat(bucketName2,\"/ss/\").concat(_this.state.myProfile.id,\"/KondisiSesudah-\").concat(r2));case 61:storageRef2=_context11.sent;_context11.next=64;return storageRef2.put(file2);case 64:uploadTask2=_context11.sent;_context11.next=67;return storageRef2.getDownloadURL().catch(function(error){throw error;});case 67:myurl2=_context11.sent;console.log('myurl : ',myurl2);case 69:if(!_this.state.isCheckedFoto){myurl='';myurl2='';}if(!_this.state.isChecked){_context11.next=80;break;}if(!(_this.state.ssPartner==''||_this.state.ssPartner==null)){_context11.next=77;break;}_context11.next=74;return _this.handleAlert('isSweetAlert',true,'Warning','Pengusul 2 Tidak Boleh Kosong','warning');case 74:return _context11.abrupt(\"return\",_context11.sent);case 77:sql=\"\\n            with ins1 as (INSERT INTO df_suggestion_system\\n            (tema, pengusul_id, pengusul_id_2, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date, departement_terdampak_id, foto_kondisi_sebelum, foto_kondisi_sesudah)\\n            VALUES('\"+_this.state.ssTema+\"', \"+_this.state.myProfile.id+\", \"+_this.state.ssPartner+\", '\"+_this.state.ssAtasanSelected+\"', '\"+_this.state.ssLokasi+\"', '\"+_this.state.ssPermasalahan+\"', '\"+_this.state.ssImprovement+\"', \"+_this.state.ssBiaya+\", '\"+_this.state.ssBiayaUraian+\"', \"+_this.state.ssKeuntungan+\", '\"+_this.state.ssKeuntunganUraian+\"', 2, \"+_this.state.myProfile.id+\", now(), \"+_this.state.myProfile.id+\", now(), \"+_this.state.myProfile.departement_id+\", '\"+myurl+\"', '\"+myurl2+\"')\\n            returning id as return_id)\\n\\n            INSERT INTO df_ss_history_approval\\n            (ss_id, approved_rejected_by_id, approval_rejected_status, create_by, create_date)\\n            VALUES((select return_id from ins1), \"+_this.state.myProfile.id+\", 'Approved', \"+_this.state.myProfile.id+\", now());\\n          \";case 78:_context11.next=81;break;case 80:sql=\"\\n          with ins1 as(INSERT INTO df_suggestion_system\\n          (tema, pengusul_id, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date, departement_terdampak_id, foto_kondisi_sebelum, foto_kondisi_sesudah)\\n          VALUES('\"+_this.state.ssTema+\"', \"+_this.state.myProfile.id+\", '\"+_this.state.ssAtasanSelected+\"', '\"+_this.state.ssLokasi+\"', '\"+_this.state.ssPermasalahan+\"', '\"+_this.state.ssImprovement+\"', \"+_this.state.ssBiaya+\", '\"+_this.state.ssBiayaUraian+\"', \"+_this.state.ssKeuntungan+\", '\"+_this.state.ssKeuntunganUraian+\"', 2, \"+_this.state.myProfile.id+\", now(), \"+_this.state.myProfile.id+\", now(), \"+_this.state.myProfile.departement_id+\", '\"+myurl+\"', '\"+myurl2+\"')\\n          returning id as return_id)\\n\\n          INSERT INTO df_ss_history_approval\\n          (ss_id, approved_rejected_by_id, approval_rejected_status, create_by, create_date)\\n          VALUES((select return_id from ins1), \"+_this.state.myProfile.id+\", 'Approved', \"+_this.state.myProfile.id+\", now());\\n        \\n          \";case 81:console.log('sql : ',sql);_context11.next=84;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(result){var res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:res=result.data.response;// Beda dgn sweetAlert yg lain\n_context9.next=3;return _this.handleAlertConfirm('isSweetAlertConfirm',true,'Success','Berhasil membuat SS','success');case 3:return _context9.abrupt(\"return\",_context9.sent);case 4:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x6){return _ref10.apply(this,arguments);};}()).catch(/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(err){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:console.log('error : ',err);_context10.next=3;return _this.handleAlertConfirm('isSweetAlertConfirm',true,'Danger','Gagal buat SS','danger');case 3:return _context10.abrupt(\"return\",_context10.sent);case 4:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x7){return _ref11.apply(this,arguments);};}());case 84:result=_context11.sent;case 85:_this.setState({isLoading:false});case 86:case\"end\":return _context11.stop();}}},_callee11);}));_this.saveForm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){var title,text,type,r,r2,myurl,myurl2,bucketName,file,storageRef,uploadTask,bucketName2,file2,storageRef2,uploadTask2,sql,result;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:title='';text='';type='';// console.log('SUBMIT : ', this.state.first_name)\n// console.log('SUBMIT : ', this.state.last_name)\n// console.log('event : ', e)\n// if (this.state.cffKondisiSaatIni == '' || this.state.cffKondisiSaatIni == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Kondisi Saat Ini Tidak Boleh Kosong', 'warning')}\n// if (this.state.cffKondisiDiusulkan == '' || this.state.cffKondisiDiusulkan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Kondisi Diusulkan Tidak Boleh Kosong', 'warning')}\n// if (this.state.cffAlasanPerubahan == '' || this.state.cffAlasanPerubahan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Alasan Perubahan Tidak Boleh Kosong', 'warning')}\n// if (this.state.cffDampakPerubahan == '' || this.state.cffDampakPerubahan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Dampak Perubahan Tidak Boleh Kosong', 'warning')}\nif(!(_this.state.ssAtasanSelected==''||_this.state.ssAtasanSelected==null)){_context14.next=7;break;}_context14.next=6;return _this.handleAlert('isSweetAlert',true,'Warning','Fasilitator Tidak Boleh Kosong','warning');case 6:return _context14.abrupt(\"return\",_context14.sent);case 7:if(!(_this.state.ssTema==''||_this.state.ssTema==null)){_context14.next=11;break;}_context14.next=10;return _this.handleAlert('isSweetAlert',true,'Warning','Tema Tidak Boleh Kosong','warning');case 10:return _context14.abrupt(\"return\",_context14.sent);case 11:if(!(_this.state.ssLokasi==''||_this.state.ssLokasi==null)){_context14.next=15;break;}_context14.next=14;return _this.handleAlert('isSweetAlert',true,'Warning','Lokasi Tidak Boleh Kosong','warning');case 14:return _context14.abrupt(\"return\",_context14.sent);case 15:if(!(_this.state.ssPermasalahan==''||_this.state.ssPermasalahan==null)){_context14.next=19;break;}_context14.next=18;return _this.handleAlert('isSweetAlert',true,'Warning','Permasalahan Tidak Boleh Kosong','warning');case 18:return _context14.abrupt(\"return\",_context14.sent);case 19:if(!(_this.state.ssImprovement==''||_this.state.ssImprovement==null)){_context14.next=23;break;}_context14.next=22;return _this.handleAlert('isSweetAlert',true,'Warning','Improvement Tidak Boleh Kosong','warning');case 22:return _context14.abrupt(\"return\",_context14.sent);case 23:if(!(_this.state.ssBiayaUraian==''||_this.state.ssBiayaUraian==null)){_context14.next=27;break;}_context14.next=26;return _this.handleAlert('isSweetAlert',true,'Warning','Biaya Uraian Tidak Boleh Kosong','warning');case 26:return _context14.abrupt(\"return\",_context14.sent);case 27:if(!(_this.state.ssBiaya==''||_this.state.ssBiaya==null)){_context14.next=31;break;}_context14.next=30;return _this.handleAlert('isSweetAlert',true,'Warning','Biaya Tidak Boleh Kosong','warning');case 30:return _context14.abrupt(\"return\",_context14.sent);case 31:if(!(_this.state.ssKeuntunganUraian==''||_this.state.ssKeuntunganUraian==null)){_context14.next=35;break;}_context14.next=34;return _this.handleAlert('isSweetAlert',true,'Warning','Keuntungan Uraian Tidak Boleh Kosong','warning');case 34:return _context14.abrupt(\"return\",_context14.sent);case 35:if(!(_this.state.ssKeuntungan==''||_this.state.ssKeuntungan==null)){_context14.next=41;break;}_context14.next=38;return _this.handleAlert('isSweetAlert',true,'Warning','Keuntungan Tidak Boleh Kosong','warning');case 38:return _context14.abrupt(\"return\",_context14.sent);case 41:_this.setState({isLoading:true});r=(Math.random()+5).toString(36).substring(2);r2=(Math.random()+10).toString(36).substring(2);// console.log(\"random\", r);\n// console.log(\"random\", r2);\nmyurl='';myurl2='';if(!(_this.state.fotoKondisiSebelum!=img1)){_context14.next=59;break;}bucketName=project;file=_this.state.fotoKondisiSebelumFile[0];_context14.next=51;return firebase.storage().ref(\"\".concat(bucketName,\"/ss/\").concat(_this.state.myProfile.id,\"/KondisiSebelum-\").concat(r));case 51:storageRef=_context14.sent;_context14.next=54;return storageRef.put(file);case 54:uploadTask=_context14.sent;_context14.next=57;return storageRef.getDownloadURL().catch(function(error){throw error;});case 57:myurl=_context14.sent;console.log('myurl : ',myurl);case 59:if(!(_this.state.fotoKondisiSesudah!=img2)){_context14.next=72;break;}bucketName2=project;file2=_this.state.fotoKondisiSesudahFile[0];_context14.next=64;return firebase.storage().ref(\"\".concat(bucketName2,\"/ss/\").concat(_this.state.myProfile.id,\"/KondisiSesudah-\").concat(r2));case 64:storageRef2=_context14.sent;_context14.next=67;return storageRef2.put(file2);case 67:uploadTask2=_context14.sent;_context14.next=70;return storageRef2.getDownloadURL().catch(function(error){throw error;});case 70:myurl2=_context14.sent;console.log('myurl : ',myurl2);case 72:if(!_this.state.isCheckedFoto){myurl='';myurl2='';}if(!_this.state.isChecked){_context14.next=83;break;}if(!(_this.state.ssPartner==''||_this.state.ssPartner==null)){_context14.next=80;break;}_context14.next=77;return _this.handleAlert('isSweetAlert',true,'Warning','Pengusul 2 Tidak Boleh Kosong','warning');case 77:return _context14.abrupt(\"return\",_context14.sent);case 80:sql=\"\\n            INSERT INTO df_suggestion_system\\n            (tema, pengusul_id, pengusul_id_2, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date, departement_terdampak_id, foto_kondisi_sebelum, foto_kondisi_sesudah)\\n            VALUES('\"+_this.state.ssTema+\"', \"+_this.state.myProfile.id+\", \"+_this.state.ssPartner+\", '\"+_this.state.ssAtasanSelected+\"', '\"+_this.state.ssLokasi+\"', '\"+_this.state.ssPermasalahan+\"', '\"+_this.state.ssImprovement+\"', \"+_this.state.ssBiaya+\", '\"+_this.state.ssBiayaUraian+\"', \"+_this.state.ssKeuntungan+\", '\"+_this.state.ssKeuntunganUraian+\"', 1, \"+_this.state.myProfile.id+\", now(), \"+_this.state.myProfile.id+\", now(), \"+_this.state.myProfile.departement_id+\", '\"+myurl+\"', '\"+myurl2+\"');\\n          \";case 81:_context14.next=84;break;case 83:sql=\"\\n          INSERT INTO df_suggestion_system\\n          (tema, pengusul_id, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date, departement_terdampak_id, foto_kondisi_sebelum, foto_kondisi_sesudah)\\n          VALUES('\"+_this.state.ssTema+\"', \"+_this.state.myProfile.id+\", '\"+_this.state.ssAtasanSelected+\"', '\"+_this.state.ssLokasi+\"', '\"+_this.state.ssPermasalahan+\"', '\"+_this.state.ssImprovement+\"', \"+_this.state.ssBiaya+\", '\"+_this.state.ssBiayaUraian+\"', \"+_this.state.ssKeuntungan+\", '\"+_this.state.ssKeuntunganUraian+\"', 1, \"+_this.state.myProfile.id+\", now(), \"+_this.state.myProfile.id+\", now(), \"+_this.state.myProfile.departement_id+\", '\"+myurl+\"', '\"+myurl2+\"');\\n        \";case 84:// var sql = `\n// INSERT INTO df_suggestion_system\n// (tema, pengusul_id, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date)\n// VALUES('`+this.state.ssTema+`', `+this.state.myProfile.id+`, '`+this.state.ssAtasanSelected+`', '`+this.state.ssLokasi+`', '`+this.state.ssPermasalahan+`', '`+this.state.ssImprovement+`', `+this.state.ssBiaya+`, '`+this.state.ssBiayaUraian+`', `+this.state.ssKeuntungan+`, '`+this.state.ssKeuntunganUraian+`', 1, `+this.state.myProfile.id+`, now(), `+this.state.myProfile.id+`, now());\n// `\nconsole.log('sql : ',sql);_context14.next=87;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(result){var res;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:res=result.data.response;// Beda dgn sweetAlert yg lain\n_context12.next=3;return _this.handleAlertConfirm('isSweetAlertConfirm',true,'Success','Berhasil membuat & simpan SS','success');case 3:return _context12.abrupt(\"return\",_context12.sent);case 4:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x8){return _ref13.apply(this,arguments);};}()).catch(/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(err){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:console.log('error : ',err);_context13.next=3;return _this.handleAlertConfirm('isSweetAlertConfirm',true,'Danger','Gagal buat & simpan SS','danger');case 3:return _context13.abrupt(\"return\",_context13.sent);case 4:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x9){return _ref14.apply(this,arguments);};}());case 87:result=_context14.sent;_this.setState({isLoading:false});case 89:case\"end\":return _context14.stop();}}},_callee14);}));_this.state={fotoKondisiSebelum:img1,fotoKondisiSebelumFile:null,fotoKondisiSesudah:img2,fotoKondisiSesudahFile:null,ssTest:'',myProfile:null,img:img2,step:0,isChecked:false,isCheckedFoto:false,ssPartner:null,isSweetAlert:false,sweetAlertTitle:'Judul',sweetAlertText:'Text',sweetAlertType:'warning',isSweetAlertConfirm:false,sweetAlertTitleConfirm:'Judul',sweetAlertTextConfirm:'Text',sweetAlertTypeConfirm:'warning',dataAtasan:[],dataPartner:[],cffNik:'',cffName:'',cffKondisiSaatIni:'',cffKondisiDiusulkan:'',cffAlasanPerubahan:'',cffDampakPerubahan:'',ssAtasanSelected:null,ssTema:'',ssLokasi:'',ssKondisiSebelum:'',ssKondisiSesudah:'',ssPermasalahan:'',ssImprovement:'',ssBiaya:0,ssBiayaUraian:'',ssKeuntungan:0,ssKeuntunganUraian:''};return _this;}_createClass(OpSsCreate,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.isLoading?/*#__PURE__*/React.createElement(Spinner,null):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"bg-gradient-warning mb-1\",onClick:function onClick(){return _this2.props.changeViewPage();}},\"Back\"),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"SS Form\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"nik\"},\"NIK\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"nik\",id:\"nik\",placeholder:\"NIK\",value:this.state.myProfile==null?'':this.state.myProfile.nik,disabled:true}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"name\"},\"Name\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"name\",id:\"name\",placeholder:\"Name\",value:this.state.myProfile==null?'':this.state.myProfile.name,disabled:true}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"departement\"},\"Departement\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"departement\",id:\"departement\",placeholder:\"Departement\",value:this.state.myProfile==null?'':this.state.myProfile.nama_departemen,disabled:true}))),/*#__PURE__*/React.createElement(Col,{sm:\"3\"},/*#__PURE__*/React.createElement(FormGroup,null,\"Pengusul 2 : \\xA0\",/*#__PURE__*/React.createElement(\"i\",null,\"*optional\"),\"\\n\",/*#__PURE__*/React.createElement(\"label\",{className:\"react-toggle-wrapper\"},/*#__PURE__*/React.createElement(Toggle,{checked:this.state.isChecked// onChange={this.handleSwitchChange}\n,onChange:function onChange(){return _this2.setState({isChecked:!_this2.state.isChecked});},name:\"controlledSwitch\",className:\"mt-1\"// value=\"yes\"\n})))),this.state.isChecked?/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Pilih Pengusul 2\"),/*#__PURE__*/React.createElement(Select,{className:\"React\",classNamePrefix:\"select\"// defaultValue={colourOptions[1]}\n,name:\"clear\",options:this.state.dataPartner// isClearable={true}\n,onChange:function onChange(val){return _this2.setState({ssPartner:val.value});}// onChange={(val)=>this.setState({ssPartner: val.target.value})}\n}))):null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Pilih Fasilitator\"),/*#__PURE__*/React.createElement(Select,{className:\"React\",classNamePrefix:\"select\"// defaultValue={colourOptions[1]}\n,name:\"clear\",options:this.state.dataAtasan// isClearable={true}\n,onChange:function onChange(val){return _this2.setState({ssAtasanSelected:val.value});}// onChange={(val)=>this.setState({ssAtasanSelected: val.target.value})}\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"ssTema\"},\"Tema\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"ssTema\",id:\"ssTema\",placeholder:\"Tema\",value:this.state.ssTema,onChange:function onChange(val){return _this2.setState({ssTema:val.target.value});}// required\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"ssLokasi\"},\"Lokasi\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"ssLokasi\",id:\"ssLokasi\",placeholder:\"Lokasi Suggestion System\",value:this.state.ssLokasi,onChange:function onChange(val){return _this2.setState({ssLokasi:val.target.value});}// required\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Permasalahan yang ada\"),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",rows:\"3\",id:\"ssPermasalahan\",onChange:function onChange(val){return _this2.setState({ssPermasalahan:val.target.value});},value:this.state.ssPermasalahan,placeholder:'Jelaskan permasalahan yang ada'// required\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Improvement yang dilakukan\"),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",rows:\"3\",id:\"ssImprovement\",onChange:function onChange(val){return _this2.setState({ssImprovement:val.target.value});},value:this.state.ssImprovement,placeholder:'Jelaskan improvement yang dilakukan'// required\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"3\"},/*#__PURE__*/React.createElement(FormGroup,null,\"Melampirkan foto : \\xA0\",/*#__PURE__*/React.createElement(\"i\",null,\"*optional\"),\"\\n\",/*#__PURE__*/React.createElement(\"label\",{className:\"react-toggle-wrapper\"},/*#__PURE__*/React.createElement(Toggle,{checked:this.state.isCheckedFoto// onChange={this.handleSwitchChange}\n,onChange:function onChange(){return _this2.setState({isCheckedFoto:!_this2.state.isCheckedFoto});},name:\"controlledSwitch\",className:\"mt-1\"// value=\"yes\"\n})))),this.state.isCheckedFoto?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,{className:\"d-flex flex-wrap justify-content-center\"},/*#__PURE__*/React.createElement(Col,{lg:\"4\",md:\"6\",sm:\"6\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(CardImg,{onContextMenu:function onContextMenu(e){return e.preventDefault();},className:\"img-fluid mb-2\"// src={'https://firebasestorage.googleapis.com/v0/b/df-conim.appspot.com/o/dev%2Fss%2F2%2FKondisiSebelum?alt=media&token=4e77a992-3047-46d4-a141-f2dbe63b6b94'}\n,src:this.state.fotoKondisiSebelum,alt:\"card image cap\"// style={{width: 400, height: 300}}\n}),/*#__PURE__*/React.createElement(\"p\",null,\"Kondisi Sebelum\")))),/*#__PURE__*/React.createElement(Col,{lg:\"4\",md:\"6\",sm:\"6\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(CardImg,{onContextMenu:function onContextMenu(e){return e.preventDefault();},className:\"img-fluid mb-2\",src:this.state.fotoKondisiSesudah,alt:\"card image cap\"// style={{width: 400, height: 300}}\n}),/*#__PURE__*/React.createElement(\"p\",null,\"Kondisi Sesudah\"))))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Label,{for:\"profileImage\"},\"Pilih Foto Kondisi Sebelum\"),/*#__PURE__*/React.createElement(CustomInput,{type:\"file\",id:\"exampleCustomFileBrowser\",name:\"profileImage\",accept:\"image/*\",onChange:function onChange(event){return _this2.onImageChange(event);}// onChange={(val)=>this.setState({fotoKondisiSebelum:val.target.files})}\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Label,{for:\"profileImage\"},\"Pilih Foto Kondisi Sesudah\"),/*#__PURE__*/React.createElement(CustomInput,{type:\"file\",id:\"exampleCustomFileBrowser\",name:\"profileImage\",accept:\"image/*\",onChange:function onChange(event){return _this2.onImageChange2(event);}// onChange={(val)=>this.setState({fotoKondisiSebelum:val.target.files})}\n})))):null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Biaya Uraian\"),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",rows:\"3\",id:\"ssBiayaUraian\",onChange:function onChange(val){return _this2.setState({ssBiayaUraian:val.target.value});},value:this.state.ssBiayaUraian,placeholder:'Jelaskan uraian biaya yang dibutuhkan'// required\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"ssBiaya\"},\"Total Biaya\"),/*#__PURE__*/React.createElement(Input,{type:\"number\",name:\"ssBiaya\",id:\"ssBiaya\",placeholder:\"Total biaya\"// value={this.state.ssBiaya}\n// pattern=\"\\d+((\\.|,)\\d+)?\"\n// pattern=\"[+-]?\\d+(?:[.,]\\d+)?\"\n// pattern=\"[0-9]*\"\n,onChange:function onChange(val){return _this2.setState({ssBiaya:val.target.value});}// onChange={(val)=> this.formatNumber(val.target.value)}\n// required\n// .replace(/,/g, \"\")\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Keuntungan (Cost Saving) Uraian\"),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",rows:\"3\",id:\"ssKeuntunganUraian\",onChange:function onChange(val){return _this2.setState({ssKeuntunganUraian:val.target.value});},value:this.state.ssKeuntunganUraian,placeholder:'Jelaskan uraian keuntungan (cost saving)'// required\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"ssKeuntungan\"},\"Total Keuntungan (cost saving)\"),/*#__PURE__*/React.createElement(Input,{type:\"number\",name:\"ssKeuntungan\",id:\"ssKeuntungan\",placeholder:\"Total keuntungan (cost saving)\"// value={this.state.ssBiaya}\n,onChange:function onChange(val){return _this2.setState({ssKeuntungan:val.target.value});}// required\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"justify-content-end\"},/*#__PURE__*/React.createElement(Button,{color:\"none\",className:\"bg-gradient-warning mr-1\",onClick:function onClick(){return _this2.saveForm();}},/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle ml-25\"},\"Simpan  \"),/*#__PURE__*/React.createElement(Save,{size:14})),/*#__PURE__*/React.createElement(Button,{color:\"none\",className:\"bg-gradient-success\",onClick:function onClick(){return _this2.submitForm();}},/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle ml-25\"},\"Kirim  \"),/*#__PURE__*/React.createElement(Send,{size:14}))))))))))),/*#__PURE__*/React.createElement(SweetAlert,{type:this.state.sweetAlertType,title:this.state.sweetAlertTitle,show:this.state.isSweetAlert,onConfirm:function onConfirm(){return _this2.handleAlert(\"isSweetAlert\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-alert-text\"},this.state.sweetAlertText)),/*#__PURE__*/React.createElement(SweetAlert,{type:this.state.sweetAlertTypeConfirm,title:this.state.sweetAlertTitleConfirm,show:this.state.isSweetAlertConfirm,onConfirm:function onConfirm(){return _this2.handleAlertConfirm(\"isSweetAlertConfirm\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-alert-text\"},this.state.sweetAlertTextConfirm)));}}]);return OpSsCreate;}(React.Component);export default OpSsCreate;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/ss/op-ss/op-ss-component/OpSsCreate.js"],"names":["React","api_query","project","firebase","axios","Card","CardHeader","CardTitle","CardBody","FormGroup","Row","Col","Input","Form","Button","Label","CustomInput","CardImg","img1","img2","Checkbox","Check","Star","Save","Send","history","Select","SweetAlert","Spinner","Toggle","OpSsCreate","props","componentDidMount","setState","isLoading","isLogin","tarikPartner","tarikAtasan","onImageChange","event","fotoKondisiSebelumFile","target","files","reader","FileReader","onload","e","fotoKondisiSebelum","result","readAsDataURL","onImageChange2","fotoKondisiSesudahFile","fotoKondisiSesudah","role","localStorage","getItem","undefined","push","JSON","parse","myProfile","console","log","sql","state","departement_id","post","query","then","res","data","response","rows","length","dataAtasan","catch","err","id","dataPartner","formatNumber","num","div","toString","replace","ssTest","numberWithCommas","x","dummy","handleAlertConfirm","value","title","text","type","sweetAlertTitleConfirm","sweetAlertTextConfirm","sweetAlertTypeConfirm","changeViewPage","handleAlert","sweetAlertTitle","sweetAlertText","sweetAlertType","submitForm","ssAtasanSelected","ssTema","ssLokasi","ssPermasalahan","ssImprovement","ssBiayaUraian","ssBiaya","ssKeuntunganUraian","ssKeuntungan","r","Math","random","substring","r2","myurl","myurl2","bucketName","file","storage","ref","storageRef","put","uploadTask","getDownloadURL","error","bucketName2","file2","storageRef2","uploadTask2","isCheckedFoto","isChecked","ssPartner","saveForm","img","step","isSweetAlert","isSweetAlertConfirm","cffNik","cffName","cffKondisiSaatIni","cffKondisiDiusulkan","cffAlasanPerubahan","cffDampakPerubahan","ssKondisiSebelum","ssKondisiSesudah","nik","name","nama_departemen","val","preventDefault","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport { api_query, project } from \"../../../../api/ApiConstant\"\nimport firebase from \"../../../../firebase/firebase\"\nimport axios from 'axios'\nimport {\n  Card,\n  CardHeader,\n  CardTitle,\n  CardBody,\n  FormGroup,\n  Row,\n  Col,\n  Input,\n  Form,\n  Button,\n  Label,\n  CustomInput,\n  CardImg\n} from \"reactstrap\"\n// import img1 from \"../../../../assets/img/pages/content-img-1.jpg\"\n// import img2 from \"../../../../assets/img/pages/content-img-2.jpg\"\n// import img3 from \"../../../../assets/img/pages/content-img-3.jpg\"\n\nimport img1 from \"../../../../assets/img/pages/1.png\"\nimport img2 from \"../../../../assets/img/pages/2.png\"\n\n\nimport Checkbox from \"../../../../components/@vuexy/checkbox/CheckboxesVuexy\"\nimport { Check, Star, Save, Send } from \"react-feather\"\nimport { history } from \"../../../../../src/history\"\nimport Select from \"react-select\"\nimport SweetAlert from \"react-bootstrap-sweetalert\"\nimport Spinner from \"../../../../components/@vuexy/spinner/Fallback-spinner\"\nimport Toggle from \"react-toggle\"\nimport \"react-toggle/style.css\"\nimport \"../../../../assets/scss/plugins/forms/switch/react-toggle.scss\"\n\n\nclass OpSsCreate extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      fotoKondisiSebelum: img1,\n      fotoKondisiSebelumFile: null,\n      fotoKondisiSesudah: img2,\n      fotoKondisiSesudahFile: null,\n      ssTest: '',\n      myProfile:null,\n      img: img2,\n      step: 0,\n      isChecked: false,\n      isCheckedFoto: false,\n      ssPartner: null,\n      isSweetAlert: false,\n      sweetAlertTitle: 'Judul',\n      sweetAlertText: 'Text',\n      sweetAlertType: 'warning',\n      isSweetAlertConfirm: false,\n      sweetAlertTitleConfirm: 'Judul',\n      sweetAlertTextConfirm: 'Text',\n      sweetAlertTypeConfirm: 'warning',\n      dataAtasan: [],\n      dataPartner: [],\n      cffNik: '',\n      cffName: '',\n      cffKondisiSaatIni: '',\n      cffKondisiDiusulkan: '',\n      cffAlasanPerubahan: '',\n      cffDampakPerubahan: '',\n      ssAtasanSelected: null,\n      ssTema: '',\n      ssLokasi: '',\n      ssKondisiSebelum: '',\n      ssKondisiSesudah: '',\n      ssPermasalahan: '',\n      ssImprovement: '',\n      ssBiaya: 0,\n      ssBiayaUraian: '',\n      ssKeuntungan: 0,\n      ssKeuntunganUraian: '',\n\n    }\n}\n\ncomponentDidMount = async() => {\n  await this.setState({isLoading: true})\n  await this.isLogin('op_df');\n  await this.tarikPartner();\n  await this.tarikAtasan();\n  await this.setState({isLoading: false})\n\n  // let r = (Math.random() + 5).toString(36).substring(2);\n  // let r2 = (Math.random() + 10).toString(36).substring(2);\n  // console.log(\"random\", r);\n  // console.log(\"random\", r2);\n\n  // var wkwk = 35000000000\n  // console.log('wkwk : ', wkwk.toLocaleString())\n  // console.log(typeof(wkwk.toLocaleString()))\n}\n\nonImageChange = async(event) => {\n  this.setState({fotoKondisiSebelumFile: event.target.files})\n  if (event.target.files && event.target.files[0]) {\n    let reader = new FileReader();\n    reader.onload = (e) => {\n      this.setState({fotoKondisiSebelum: e.target.result});\n    };\n    reader.readAsDataURL(event.target.files[0]);\n  }\n}\n\nonImageChange2 = async(event) => {\n  this.setState({fotoKondisiSesudahFile: event.target.files})\n  if (event.target.files && event.target.files[0]) {\n    let reader = new FileReader();\n    reader.onload = (e) => {\n      this.setState({fotoKondisiSesudah: e.target.result});\n    };\n    reader.readAsDataURL(event.target.files[0]);\n  }\n}\n\nisLogin = async(role) =>{\n  if (localStorage.getItem('account') == undefined || localStorage.getItem('account') == null) {\n    history.push(\"/pages/login\")\n  }else if(JSON.parse(localStorage.getItem('account')).role !== role){\n    history.push(\"/pages/login\")\n  }\n  else{\n    var myProfile = JSON.parse(localStorage.getItem('account'))\n    console.log('myProfile ss : ', myProfile)\n    this.setState({myProfile: myProfile})\n  }\n}\n\n\ntarikAtasan = async() =>{\n\n  let sql = `\n  select id as value,\n    name as label,\n    departement_id\n  from df_master_user dmu\n  where departement_id = `+this.state.myProfile.departement_id+`\n  and job_level = '4'\n  `\n\n  var result = await axios.post(api_query, {\n                              query : sql\n                          })\n                              .then(async(result) => {\n                                var res = result.data.response.rows\n                                console.log('result query atasan : ', res)\n                                if (res.length == '') {\n                                    return []\n                                }\n\n                                await this.setState({dataAtasan: res})\n\n                              }).catch(err => {\n                                  console.log('error : ', err)\n                                  return []\n                              })\n    // await this.setState({data: result})\n  }\n\ntarikPartner = async() =>{\n\n  let sql = `\n  select id as value,\n    name as label,\n    departement_id\n  from df_master_user dmu\n  where departement_id = `+this.state.myProfile.departement_id+`\n  and job_level != '4'\n  and job_level != '5'\n  and dmu.id != `+this.state.myProfile.id+`\n  order by dmu.name asc\n  `\n\n  var result = await axios.post(api_query, {\n                              query : sql\n                          })\n                              .then(async(result) => {\n                                var res = result.data.response.rows\n                                console.log('result query atasan : ', res)\n                                if (res.length == '') {\n                                    return []\n                                }\n\n                                await this.setState({dataPartner: res})\n\n                              }).catch(err => {\n                                  console.log('error : ', err)\n                                  return []\n                              })\n    // await this.setState({data: result})\n  }\n\nformatNumber = (num,div=\",\")=>{\n   console.log(num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, div))\n   this.setState({ssTest: num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, div)})\n  // return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, div);\n}\n\nnumberWithCommas=(x)=> {\n  // console.log('console with commas', parseInt(x.toLocaleString()))\n  var dummy = x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  this.setState({ssTest: dummy})\n\n  console.log('dummy : ', dummy)\n\n  // x = x.toLocaleString();\n  // x = parseInt(x)\n  // x = x.toLocaleString();\n  // console.log('x : ', x)\n  // this.setState({ssTest: x})\n\n  // this.setState({ssTest: x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")})\n  // return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  // return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\n}\n\nhandleAlertConfirm = (state, value, title, text, type) => {\n\n  if (value) {\n    this.setState({ [state] : value })\n    this.setState({sweetAlertTitleConfirm: title, sweetAlertTextConfirm: text, sweetAlertTypeConfirm: type});\n  }else{\n    this.setState({ [state] : value })\n    this.props.changeViewPage('page')\n}\n  // if(text == \"Berhasil membuat SS\"){\n  //   this.setState({ [state] : value })\n  //   this.setState({sweetAlertTitle: title, sweetAlertText: text, sweetAlertType: type});\n  //   // this.props.changeViewPage('page')\n  // }else{}\n}\n\nhandleAlert = (state, value, title, text, type) => {\n    if (value) {\n      this.setState({ [state] : value })\n      this.setState({sweetAlertTitle: title, sweetAlertText: text, sweetAlertType: type});\n    }else{\n      this.setState({ [state] : value })\n    }\n}\n\nsubmitForm = async() =>{\n\n\n  // if (this.state.cffKondisiSaatIni == '' || this.state.cffKondisiSaatIni == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Kondisi Saat Ini Tidak Boleh Kosong', 'warning')}\n  // if (this.state.cffKondisiDiusulkan == '' || this.state.cffKondisiDiusulkan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Kondisi Diusulkan Tidak Boleh Kosong', 'warning')}\n  // if (this.state.cffAlasanPerubahan == '' || this.state.cffAlasanPerubahan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Alasan Perubahan Tidak Boleh Kosong', 'warning')}\n  // if (this.state.cffDampakPerubahan == '' || this.state.cffDampakPerubahan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Dampak Perubahan Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssAtasanSelected == '' || this.state.ssAtasanSelected == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Fasilitator Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssTema == '' || this.state.ssTema == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Tema Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssLokasi == '' || this.state.ssLokasi == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Lokasi Tidak Boleh Kosong', 'warning')}\n  // if (this.state.ssKondisiSebelum == '' || this.state.ssKondisiSebelum == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Kondisi Sebelum Tidak Boleh Kosong', 'warning')}\n  // if (this.state.ssKondisiSesudah == '' || this.state.ssKondisiSesudah == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Kondisi Sesudah Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssPermasalahan == '' || this.state.ssPermasalahan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Permasalahan Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssImprovement == '' || this.state.ssImprovement == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Improvement Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssBiayaUraian == '' || this.state.ssBiayaUraian == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Biaya Uraian Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssBiaya == '' || this.state.ssBiaya == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Biaya Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssKeuntunganUraian == '' || this.state.ssKeuntunganUraian == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Keuntungan Uraian Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssKeuntungan == '' || this.state.ssKeuntungan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Keuntungan Tidak Boleh Kosong', 'warning')}\n  else {\n\n    this.setState({isLoading: true})\n\n    let r = (Math.random() + 5).toString(36).substring(2);\n    let r2 = (Math.random() + 10).toString(36).substring(2);\n    // console.log(\"random\", r);\n    // console.log(\"random\", r2);\n    var myurl = ''\n    var myurl2 = ''\n\n    if (this.state.fotoKondisiSebelum != img1) {\n      var bucketName = project\n      var file = this.state.fotoKondisiSebelumFile[0]\n      var storageRef = await firebase.storage().ref(`${bucketName}/ss/${this.state.myProfile.id}/KondisiSebelum-${r}`)\n      let uploadTask = await storageRef.put(file)\n      myurl = await storageRef.getDownloadURL().catch((error)=>{throw error});\n      console.log('myurl : ', myurl)\n    }\n    \n    if (this.state.fotoKondisiSesudah != img2){\n      var bucketName2 = project\n      var file2 = this.state.fotoKondisiSesudahFile[0]\n      var storageRef2 = await firebase.storage().ref(`${bucketName2}/ss/${this.state.myProfile.id}/KondisiSesudah-${r2}`)\n      let uploadTask2 = await storageRef2.put(file2)\n      myurl2 = await storageRef2.getDownloadURL().catch((error)=>{throw error});\n      console.log('myurl : ', myurl2)\n    }\n\n    if (!this.state.isCheckedFoto) {\n      myurl = ''\n      myurl2 = ''\n    }\n\n\n      if (this.state.isChecked) {\n        if (this.state.ssPartner == '' || this.state.ssPartner == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Pengusul 2 Tidak Boleh Kosong', 'warning')}\n        else{\n          var sql = `\n            with ins1 as (INSERT INTO df_suggestion_system\n            (tema, pengusul_id, pengusul_id_2, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date, departement_terdampak_id, foto_kondisi_sebelum, foto_kondisi_sesudah)\n            VALUES('`+this.state.ssTema+`', `+this.state.myProfile.id+`, `+this.state.ssPartner+`, '`+this.state.ssAtasanSelected+`', '`+this.state.ssLokasi+`', '`+this.state.ssPermasalahan+`', '`+this.state.ssImprovement+`', `+this.state.ssBiaya+`, '`+this.state.ssBiayaUraian+`', `+this.state.ssKeuntungan+`, '`+this.state.ssKeuntunganUraian+`', 2, `+this.state.myProfile.id+`, now(), `+this.state.myProfile.id+`, now(), `+this.state.myProfile.departement_id+`, '`+myurl+`', '`+myurl2+`')\n            returning id as return_id)\n\n            INSERT INTO df_ss_history_approval\n            (ss_id, approved_rejected_by_id, approval_rejected_status, create_by, create_date)\n            VALUES((select return_id from ins1), `+this.state.myProfile.id+`, 'Approved', `+this.state.myProfile.id+`, now());\n          `\n        }\n      }else{\n        var sql = `\n          with ins1 as(INSERT INTO df_suggestion_system\n          (tema, pengusul_id, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date, departement_terdampak_id, foto_kondisi_sebelum, foto_kondisi_sesudah)\n          VALUES('`+this.state.ssTema+`', `+this.state.myProfile.id+`, '`+this.state.ssAtasanSelected+`', '`+this.state.ssLokasi+`', '`+this.state.ssPermasalahan+`', '`+this.state.ssImprovement+`', `+this.state.ssBiaya+`, '`+this.state.ssBiayaUraian+`', `+this.state.ssKeuntungan+`, '`+this.state.ssKeuntunganUraian+`', 2, `+this.state.myProfile.id+`, now(), `+this.state.myProfile.id+`, now(), `+this.state.myProfile.departement_id+`, '`+myurl+`', '`+myurl2+`')\n          returning id as return_id)\n\n          INSERT INTO df_ss_history_approval\n          (ss_id, approved_rejected_by_id, approval_rejected_status, create_by, create_date)\n          VALUES((select return_id from ins1), `+this.state.myProfile.id+`, 'Approved', `+this.state.myProfile.id+`, now());\n        \n          `\n      }\n\n      \n      console.log('sql : ', sql)\n\n      var result = await axios.post(api_query, {\n                                  query : sql\n                              })\n                                  .then(async(result) => {\n                                  let res = result.data.response\n                                  // Beda dgn sweetAlert yg lain\n                                  return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Success', 'Berhasil membuat SS', 'success')\n                                  // this.props.changeViewPage('page')\n                              }).catch(async(err) => {\n                                  console.log('error : ', err)\n                                  return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Danger', 'Gagal buat SS', 'danger')\n                                  // return []\n                              })\n  }\n\n  this.setState({isLoading: false})\n\n\n}\n\nsaveForm = async() =>{\n\n  var title = ''\n  var text = ''\n  var type = ''\n  // console.log('SUBMIT : ', this.state.first_name)\n  // console.log('SUBMIT : ', this.state.last_name)\n  // console.log('event : ', e)\n\n\n  // if (this.state.cffKondisiSaatIni == '' || this.state.cffKondisiSaatIni == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Kondisi Saat Ini Tidak Boleh Kosong', 'warning')}\n  // if (this.state.cffKondisiDiusulkan == '' || this.state.cffKondisiDiusulkan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Kondisi Diusulkan Tidak Boleh Kosong', 'warning')}\n  // if (this.state.cffAlasanPerubahan == '' || this.state.cffAlasanPerubahan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Alasan Perubahan Tidak Boleh Kosong', 'warning')}\n  // if (this.state.cffDampakPerubahan == '' || this.state.cffDampakPerubahan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'CFF Dampak Perubahan Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssAtasanSelected == '' || this.state.ssAtasanSelected == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Fasilitator Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssTema == '' || this.state.ssTema == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Tema Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssLokasi == '' || this.state.ssLokasi == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Lokasi Tidak Boleh Kosong', 'warning')}\n  // if (this.state.ssKondisiSebelum == '' || this.state.ssKondisiSebelum == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Kondisi Sebelum Tidak Boleh Kosong', 'warning')}\n  // if (this.state.ssKondisiSesudah == '' || this.state.ssKondisiSesudah == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Kondisi Sesudah Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssPermasalahan == '' || this.state.ssPermasalahan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Permasalahan Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssImprovement == '' || this.state.ssImprovement == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Improvement Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssBiayaUraian == '' || this.state.ssBiayaUraian == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Biaya Uraian Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssBiaya == '' || this.state.ssBiaya == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Biaya Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssKeuntunganUraian == '' || this.state.ssKeuntunganUraian == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Keuntungan Uraian Tidak Boleh Kosong', 'warning')}\n  if (this.state.ssKeuntungan == '' || this.state.ssKeuntungan == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Keuntungan Tidak Boleh Kosong', 'warning')}\n  else {\n\n    this.setState({isLoading: true})\n\n    let r = (Math.random() + 5).toString(36).substring(2);\n    let r2 = (Math.random() + 10).toString(36).substring(2);\n    // console.log(\"random\", r);\n    // console.log(\"random\", r2);\n    var myurl = ''\n    var myurl2 = ''\n\n    if (this.state.fotoKondisiSebelum != img1) {\n      var bucketName = project\n      var file = this.state.fotoKondisiSebelumFile[0]\n      var storageRef = await firebase.storage().ref(`${bucketName}/ss/${this.state.myProfile.id}/KondisiSebelum-${r}`)\n      let uploadTask = await storageRef.put(file)\n      myurl = await storageRef.getDownloadURL().catch((error)=>{throw error});\n      console.log('myurl : ', myurl)\n    }\n    \n    if (this.state.fotoKondisiSesudah != img2){\n      var bucketName2 = project\n      var file2 = this.state.fotoKondisiSesudahFile[0]\n      var storageRef2 = await firebase.storage().ref(`${bucketName2}/ss/${this.state.myProfile.id}/KondisiSesudah-${r2}`)\n      let uploadTask2 = await storageRef2.put(file2)\n      myurl2 = await storageRef2.getDownloadURL().catch((error)=>{throw error});\n      console.log('myurl : ', myurl2)\n    }\n\n    if (!this.state.isCheckedFoto) {\n      myurl = ''\n      myurl2 = ''\n    }\n\n\n      if (this.state.isChecked) {\n        if (this.state.ssPartner == '' || this.state.ssPartner == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Pengusul 2 Tidak Boleh Kosong', 'warning')}\n        else{\n          var sql = `\n            INSERT INTO df_suggestion_system\n            (tema, pengusul_id, pengusul_id_2, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date, departement_terdampak_id, foto_kondisi_sebelum, foto_kondisi_sesudah)\n            VALUES('`+this.state.ssTema+`', `+this.state.myProfile.id+`, `+this.state.ssPartner+`, '`+this.state.ssAtasanSelected+`', '`+this.state.ssLokasi+`', '`+this.state.ssPermasalahan+`', '`+this.state.ssImprovement+`', `+this.state.ssBiaya+`, '`+this.state.ssBiayaUraian+`', `+this.state.ssKeuntungan+`, '`+this.state.ssKeuntunganUraian+`', 1, `+this.state.myProfile.id+`, now(), `+this.state.myProfile.id+`, now(), `+this.state.myProfile.departement_id+`, '`+myurl+`', '`+myurl2+`');\n          `\n        }\n      }else{\n        var sql = `\n          INSERT INTO df_suggestion_system\n          (tema, pengusul_id, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date, departement_terdampak_id, foto_kondisi_sebelum, foto_kondisi_sesudah)\n          VALUES('`+this.state.ssTema+`', `+this.state.myProfile.id+`, '`+this.state.ssAtasanSelected+`', '`+this.state.ssLokasi+`', '`+this.state.ssPermasalahan+`', '`+this.state.ssImprovement+`', `+this.state.ssBiaya+`, '`+this.state.ssBiayaUraian+`', `+this.state.ssKeuntungan+`, '`+this.state.ssKeuntunganUraian+`', 1, `+this.state.myProfile.id+`, now(), `+this.state.myProfile.id+`, now(), `+this.state.myProfile.departement_id+`, '`+myurl+`', '`+myurl2+`');\n        `\n      }\n      // var sql = `\n      // INSERT INTO df_suggestion_system\n      // (tema, pengusul_id, fasilitator_id, lokasi, permasalahan, improvement, biaya, biaya_uraian, keuntungan, keuntungan_uraian, ss_status_id, create_by, create_date, update_by, update_date)\n      // VALUES('`+this.state.ssTema+`', `+this.state.myProfile.id+`, '`+this.state.ssAtasanSelected+`', '`+this.state.ssLokasi+`', '`+this.state.ssPermasalahan+`', '`+this.state.ssImprovement+`', `+this.state.ssBiaya+`, '`+this.state.ssBiayaUraian+`', `+this.state.ssKeuntungan+`, '`+this.state.ssKeuntunganUraian+`', 1, `+this.state.myProfile.id+`, now(), `+this.state.myProfile.id+`, now());\n      // `\n      console.log('sql : ', sql)\n\n      var result = await axios.post(api_query, {\n                                  query : sql\n                              })\n                                  .then(async(result) => {\n                                  let res = result.data.response\n                                  // Beda dgn sweetAlert yg lain\n                                  return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Success', 'Berhasil membuat & simpan SS', 'success')\n                                  // this.props.changeViewPage('page')\n                              }).catch(async(err) => {\n                                  console.log('error : ', err)\n                                  return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Danger', 'Gagal buat & simpan SS', 'danger')\n                                  // return []\n                              })\n\n        this.setState({isLoading: false})\n\n  }\n\n}\n\n  render() {\n    return (\n      <>\n      {this.state.isLoading?\n        <Spinner/>\n      :\n      <div>\n        <Button.Ripple color=\"none\" className=\"bg-gradient-warning mb-1\" onClick={() => this.props.changeViewPage()}>Back</Button.Ripple>\n\n        <Card>\n        <CardHeader>\n          <CardTitle>SS Form</CardTitle>\n        </CardHeader>\n        <CardBody>\n          <Form>\n            <Row>\n            <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"nik\">NIK</Label>\n                  <Input\n                    type=\"text\"\n                    name=\"nik\"\n                    id=\"nik\"\n                    placeholder=\"NIK\"\n                    value={this.state.myProfile == null ? '':this.state.myProfile.nik}\n                    disabled\n                  />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"name\">Name</Label>\n                  <Input\n                    type=\"text\"\n                    name=\"name\"\n                    id=\"name\"\n                    placeholder=\"Name\"\n                    value={this.state.myProfile == null ? '':this.state.myProfile.name}\n                    disabled\n                  />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"departement\">Departement</Label>\n                  <Input\n                    type=\"text\"\n                    name=\"departement\"\n                    id=\"departement\"\n                    placeholder=\"Departement\"\n                    value={this.state.myProfile == null ? '':this.state.myProfile.nama_departemen}\n                    disabled\n                  />\n                </FormGroup>\n              </Col>\n              <Col sm=\"3\">\n                  <FormGroup>\n                      Pengusul 2 : &nbsp;<i>*optional</i>{\"\\n\"}\n                    <label className=\"react-toggle-wrapper\">\n                      <Toggle\n                        checked={this.state.isChecked}\n                        // onChange={this.handleSwitchChange}\n                        onChange={()=> this.setState({isChecked: !this.state.isChecked})}\n                        name=\"controlledSwitch\"\n                        className={\"mt-1\"}\n                        // value=\"yes\"\n                      />\n                    </label>\n                  </FormGroup>\n              </Col>\n              {this.state.isChecked?\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"\">Pilih Pengusul 2</Label>\n                  <Select\n                    className=\"React\"\n                    classNamePrefix=\"select\"\n                    // defaultValue={colourOptions[1]}\n                    name=\"clear\"\n                    options={this.state.dataPartner}\n                    // isClearable={true}\n                    onChange={(val)=>this.setState({ssPartner: val.value})}\n                    // onChange={(val)=>this.setState({ssPartner: val.target.value})}\n                  />\n                </FormGroup>\n              </Col>\n              :null}\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"\">Pilih Fasilitator</Label>\n                  <Select\n                    className=\"React\"\n                    classNamePrefix=\"select\"\n                    // defaultValue={colourOptions[1]}\n                    name=\"clear\"\n                    options={this.state.dataAtasan}\n                    // isClearable={true}\n                    onChange={(val)=>this.setState({ssAtasanSelected: val.value})}\n                    // onChange={(val)=>this.setState({ssAtasanSelected: val.target.value})}\n                  />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"ssTema\">Tema</Label>\n                  <Input\n                    type=\"text\"\n                    name=\"ssTema\"\n                    id=\"ssTema\"\n                    placeholder=\"Tema\"\n                    value={this.state.ssTema}\n                    onChange={(val)=>this.setState({ssTema: val.target.value})}\n                    // required\n                  />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"ssLokasi\">Lokasi</Label>\n                  <Input\n                    type=\"text\"\n                    name=\"ssLokasi\"\n                    id=\"ssLokasi\"\n                    placeholder=\"Lokasi Suggestion System\"\n                    value={this.state.ssLokasi}\n                    onChange={(val)=>this.setState({ssLokasi: val.target.value})}\n                    // required\n                  />\n                </FormGroup>\n              </Col>\n              {/* <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"\">Kondisi Sebelum Perbaikan</Label>\n                  <Input\n                    type=\"textarea\"\n                    rows=\"3\"\n                    id='ssKondisiSebelum'\n                    onChange={(val)=>this.setState({ssKondisiSebelum: val.target.value})}\n                    value={this.state.ssKondisiSebelum}\n                    placeholder={'Jelaskan kondisi sebelum perbaikan'}\n                    // required\n                    />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"\">Kondisi Sesudah Perbaikan</Label>\n                  <Input\n                    type=\"textarea\"\n                    rows=\"3\"\n                    id='ssKondisiSesudah'\n                    onChange={(val)=>this.setState({ssKondisiSesudah: val.target.value})}\n                    value={this.state.ssKondisiSesudah}\n                    placeholder={'Jelaskan kondisi setelah perbaikan'}\n                    // required\n                    />\n                </FormGroup>\n              </Col> */}\n\n\n\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"\">Permasalahan yang ada</Label>\n                  <Input\n                    type=\"textarea\"\n                    rows=\"3\"\n                    id='ssPermasalahan'\n                    onChange={(val)=>this.setState({ssPermasalahan: val.target.value})}\n                    value={this.state.ssPermasalahan}\n                    placeholder={'Jelaskan permasalahan yang ada'}\n                    // required\n                    />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"\">Improvement yang dilakukan</Label>\n                  <Input\n                    type=\"textarea\"\n                    rows=\"3\"\n                    id='ssImprovement'\n                    onChange={(val)=>this.setState({ssImprovement: val.target.value})}\n                    value={this.state.ssImprovement}\n                    placeholder={'Jelaskan improvement yang dilakukan'}\n                    // required\n                    />\n                </FormGroup>\n              </Col>\n              <Col sm=\"3\">\n                  <FormGroup>\n                      Melampirkan foto : &nbsp;<i>*optional</i>{\"\\n\"}\n                    <label className=\"react-toggle-wrapper\">\n                      <Toggle\n                        checked={this.state.isCheckedFoto}\n                        // onChange={this.handleSwitchChange}\n                        onChange={()=> this.setState({isCheckedFoto: !this.state.isCheckedFoto})}\n                        name=\"controlledSwitch\"\n                        className={\"mt-1\"}\n                        // value=\"yes\"\n                      />\n                    </label>\n                  </FormGroup>\n              </Col>\n          {this.state.isCheckedFoto?\n          <div>\n              <Row  className=\"d-flex flex-wrap justify-content-center\">\n              <Col lg=\"4\" md=\"6\" sm=\"6\">\n                <Card>\n                  <CardBody>\n                    <CardImg\n                      onContextMenu={(e)=> e.preventDefault()}\n                      className=\"img-fluid mb-2\"\n                      // src={'https://firebasestorage.googleapis.com/v0/b/df-conim.appspot.com/o/dev%2Fss%2F2%2FKondisiSebelum?alt=media&token=4e77a992-3047-46d4-a141-f2dbe63b6b94'}\n                      src={this.state.fotoKondisiSebelum}\n                      alt=\"card image cap\"\n                      // style={{width: 400, height: 300}}\n                    />\n                    <p>Kondisi Sebelum</p>\n                  </CardBody>\n                </Card>\n              </Col>\n              <Col lg=\"4\" md=\"6\" sm=\"6\">\n                <Card>\n                  <CardBody>\n                    <CardImg\n                      onContextMenu={(e)=> e.preventDefault()}\n                      className=\"img-fluid mb-2\"\n                      src={this.state.fotoKondisiSesudah}\n                      alt=\"card image cap\"\n                      // style={{width: 400, height: 300}}\n                    />\n                    <p>Kondisi Sesudah</p>\n                  </CardBody>\n                </Card>\n              </Col>\n              </Row>\n              <Col sm=\"12\">\n                <FormGroup className=\"has-icon-left position-relative\">\n                  <Label for=\"profileImage\">Pilih Foto Kondisi Sebelum</Label>\n                  <CustomInput\n                    type=\"file\"\n                    id=\"exampleCustomFileBrowser\"\n                    name=\"profileImage\"\n                    accept=\"image/*\"\n                    onChange={(event)=> this.onImageChange(event)}\n                    // onChange={(val)=>this.setState({fotoKondisiSebelum:val.target.files})}\n                  />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup className=\"has-icon-left position-relative\">\n                  <Label for=\"profileImage\">Pilih Foto Kondisi Sesudah</Label>\n                  <CustomInput\n                    type=\"file\"\n                    id=\"exampleCustomFileBrowser\"\n                    name=\"profileImage\"\n                    accept=\"image/*\"\n                    onChange={(event)=> this.onImageChange2(event)}\n                    // onChange={(val)=>this.setState({fotoKondisiSebelum:val.target.files})}\n                  />\n                </FormGroup>\n              </Col>\n              </div>\n            :null}\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"\">Biaya Uraian</Label>\n                  <Input\n                    type=\"textarea\"\n                    rows=\"3\"\n                    id='ssBiayaUraian'\n                    onChange={(val)=>this.setState({ssBiayaUraian: val.target.value})}\n                    value={this.state.ssBiayaUraian}\n                    placeholder={'Jelaskan uraian biaya yang dibutuhkan'}\n                    // required\n                    />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"ssBiaya\">Total Biaya</Label>\n                  <Input\n                    type=\"number\"\n                    name=\"ssBiaya\"\n                    id=\"ssBiaya\"\n                    placeholder=\"Total biaya\"\n                    // value={this.state.ssBiaya}\n                    // pattern=\"\\d+((\\.|,)\\d+)?\"\n                    // pattern=\"[+-]?\\d+(?:[.,]\\d+)?\"\n                    // pattern=\"[0-9]*\"\n                    onChange={(val)=>this.setState({ssBiaya: val.target.value})}\n                    // onChange={(val)=> this.formatNumber(val.target.value)}\n                    // required\n                    // .replace(/,/g, \"\")\n                  />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"\">Keuntungan (Cost Saving) Uraian</Label>\n                  <Input\n                    type=\"textarea\"\n                    rows=\"3\"\n                    id='ssKeuntunganUraian'\n                    onChange={(val)=>this.setState({ssKeuntunganUraian: val.target.value})}\n                    value={this.state.ssKeuntunganUraian}\n                    placeholder={'Jelaskan uraian keuntungan (cost saving)'}\n                    // required\n                    />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <Label for=\"ssKeuntungan\">Total Keuntungan (cost saving)</Label>\n                  <Input\n                    type=\"number\"\n                    name=\"ssKeuntungan\"\n                    id=\"ssKeuntungan\"\n                    placeholder=\"Total keuntungan (cost saving)\"\n                    // value={this.state.ssBiaya}\n                    onChange={(val)=>this.setState({ssKeuntungan: val.target.value})}\n                    // required\n                  />\n                </FormGroup>\n              </Col>\n              <Col sm=\"12\">\n                <FormGroup>\n                  <div className=\"d-flex flex-wrap justify-content-end\">\n                    {/* <div>\n                      <Button color=\"none\" className=\"bg-gradient-warning\" onClick={() => this.setState({step: 0})}>Prev</Button>\n                    </div> */}\n                    <div className=\"justify-content-end\">\n                      <Button color=\"none\" className=\"bg-gradient-warning mr-1\" onClick={() => this.saveForm()}>\n                        <span className='align-middle ml-25'>Simpan  </span>\n                        <Save size={14}/>\n                      </Button>\n                      <Button color=\"none\" className=\"bg-gradient-success\" onClick={() => this.submitForm()}>\n                        {/* Kirim */}\n                        <span className='align-middle ml-25'>Kirim  </span>\n                        <Send size={14}/>\n                      </Button>\n                    </div>\n                  </div>\n                </FormGroup>\n              </Col>\n            </Row>\n          </Form>\n        </CardBody>\n      </Card>\n      </div>\n      }\n      \n        <SweetAlert type={this.state.sweetAlertType} title={this.state.sweetAlertTitle}\n          show={this.state.isSweetAlert}\n          onConfirm={() => this.handleAlert(\"isSweetAlert\", false)}\n        >\n            <p className=\"sweet-alert-text\">\n              {this.state.sweetAlertText}\n            </p>\n        </SweetAlert>\n\n        <SweetAlert type={this.state.sweetAlertTypeConfirm} title={this.state.sweetAlertTitleConfirm}\n          show={this.state.isSweetAlertConfirm}\n          onConfirm={() => this.handleAlertConfirm(\"isSweetAlertConfirm\", false)}\n        >\n            <p className=\"sweet-alert-text\">\n              {this.state.sweetAlertTextConfirm}\n            </p>\n        </SweetAlert>\n      </>\n    )\n  }\n}\nexport default OpSsCreate\n"]},"metadata":{},"sourceType":"module"}