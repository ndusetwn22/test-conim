{"ast":null,"code":"var _jsxFileName = \"E:\\\\react\\\\rombak-react-vuexy2\\\\src\\\\views\\\\employees\\\\EmployeesPage.js\";\nimport React from \"react\";\nimport { Row, Col, Spinner } from \"reactstrap\";\nimport Breadcrumbs from \"../../components/@vuexy/breadCrumbs/BreadCrumb\";\nimport DataTableEmployees from \"./DataTableEmployees\";\nimport EmployeesAdd from \"./EmployeesAdd\";\nimport EmployeesEdit from \"./EmployeesEdit\";\nimport axios from 'axios';\nimport { api_query } from \"../../api/ApiConstant\";\n\nclass EmployeesPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.changeViewPage = async (typeView, resultEdit) => {\n      if (typeView == 'add') {\n        await this.setState({\n          addPage: true,\n          editPage: false\n        });\n      } else if (typeView == 'edit') {\n        await this.tarikDataDept();\n        await this.tarikDataPosition();\n        var tmp = resultEdit;\n        tmp.all_dept_name = this.state.dept_name;\n        tmp.all_position = this.state.position; // console.log('new data tmp : ', tmp)\n\n        await this.setState({\n          editPage: true,\n          editData: tmp,\n          addPage: false\n        }); // await this.setState({editPage: true, editData: resultEdit, addPage: false})\n      } else {\n        await this.setState({\n          addPage: false,\n          editPage: false\n        });\n      }\n    };\n\n    this.tarikDataDept = async () => {\n      console.log('tarik data'); // let sql = `\n      //     select * from employees_new limit 10000;\n      // `\n\n      let sql = `\n    select * from departments_new\n    `;\n      var result = await axios.post(api_query, {\n        query: sql\n      }).then(result => {\n        let res = result.data.response; // console.log('result : ', result)\n\n        if (res.length == '') {\n          return [];\n        }\n\n        var tmp = [];\n\n        for (let index = 0; index < res.length; index++) {\n          const element = res[index]; // console.log('dataaaaa : ', element)\n\n          var data = {};\n          data.id = element.id;\n          data.value = element.id;\n          data.label = element.dept_name;\n          tmp.push(data); // console.log('tiap push : ', tmp)\n        } // console.log('hasil push : ', tmp)\n        // return res;\n\n\n        return tmp;\n      }).catch(err => {\n        console.log('error : ', err);\n        return [];\n      });\n      await this.setState({\n        dept_name: result\n      });\n    };\n\n    this.tarikDataPosition = async () => {\n      // console.log('tarik data')\n      // let sql = `\n      //     select * from employees_new limit 10000;\n      // `\n      let sql = `\n      select * from position_management\n      `;\n      var result = await axios.post(api_query, {\n        query: sql\n      }).then(result => {\n        let res = result.data.response; // console.log('result : ', result)\n\n        if (res.length == '') {\n          return [];\n        }\n\n        var tmp = [];\n\n        for (let index = 0; index < res.length; index++) {\n          const element = res[index]; // console.log('dataaaaa : ', element)\n\n          var data = {};\n          data.id = element.id;\n          data.value = element.id;\n          data.label = element.position;\n          tmp.push(data); // console.log('tiap push : ', tmp)\n        } // console.log('hasil push : ', tmp)\n        // return res;\n\n\n        return tmp;\n      }).catch(err => {\n        console.log('error : ', err);\n        return [];\n      });\n      await this.setState({\n        position: result\n      });\n    };\n\n    this.state = {\n      addPage: false,\n      editPage: false,\n      editData: null,\n      dept_name: null,\n      position: null\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }\n    }, this.state.addPage ? /*#__PURE__*/React.createElement(Breadcrumbs, {\n      breadCrumbTitle: \"Employees Add\",\n      breadCrumbParent: \"Employees\",\n      breadCrumbActive: \"Employees Add\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }) : this.state.editPage ? /*#__PURE__*/React.createElement(Breadcrumbs, {\n      breadCrumbTitle: \"Employees Edit\",\n      breadCrumbParent: \"Employees\",\n      breadCrumbActive: \"Employees Edit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(Breadcrumbs, {\n      breadCrumbTitle: \"Employees\",\n      breadCrumbParent: \"Employees\",\n      breadCrumbActive: \"Employees\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      sm: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, this.state.addPage ?\n    /*#__PURE__*/\n    // <EmployeesAdd {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\n    React.createElement(Spinner, {\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }) : this.state.editPage ? /*#__PURE__*/React.createElement(EmployeesEdit, Object.assign({}, this.state, this.props, {\n      changeViewPage: this.changeViewPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    })) : /*#__PURE__*/React.createElement(DataTableEmployees, Object.assign({}, this.state, this.props, {\n      changeViewPage: this.changeViewPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n}\n\nexport default EmployeesPage;","map":{"version":3,"sources":["E:/react/rombak-react-vuexy2/src/views/employees/EmployeesPage.js"],"names":["React","Row","Col","Spinner","Breadcrumbs","DataTableEmployees","EmployeesAdd","EmployeesEdit","axios","api_query","EmployeesPage","Component","constructor","props","changeViewPage","typeView","resultEdit","setState","addPage","editPage","tarikDataDept","tarikDataPosition","tmp","all_dept_name","state","dept_name","all_position","position","editData","console","log","sql","result","post","query","then","res","data","response","length","index","element","id","value","label","push","catch","err","render"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { Row, Col, Spinner } from \"reactstrap\"\r\nimport Breadcrumbs from \"../../components/@vuexy/breadCrumbs/BreadCrumb\"\r\nimport DataTableEmployees from \"./DataTableEmployees\"\r\nimport EmployeesAdd from \"./EmployeesAdd\"\r\nimport EmployeesEdit from \"./EmployeesEdit\"\r\nimport axios from 'axios';\r\nimport { api_query } from \"../../api/ApiConstant\"\r\n\r\n\r\nclass EmployeesPage extends React.Component {\r\n  constructor(props){\r\n      super(props);\r\n      this.state = {\r\n          addPage: false,\r\n          editPage: false,\r\n          editData: null,\r\n          dept_name: null,\r\n          position: null,\r\n\r\n      }\r\n  }\r\n\r\n  changeViewPage = async(typeView, resultEdit) =>{\r\n    if (typeView == 'add') {\r\n        await this.setState({addPage: true, editPage: false})\r\n    }else if (typeView == 'edit') {\r\n      await this.tarikDataDept();\r\n      await this.tarikDataPosition();\r\n      var tmp = resultEdit\r\n      tmp.all_dept_name = this.state.dept_name\r\n      tmp.all_position = this.state.position\r\n      // console.log('new data tmp : ', tmp)\r\n      await this.setState({editPage: true, editData: tmp, addPage: false})\r\n      // await this.setState({editPage: true, editData: resultEdit, addPage: false})\r\n    }\r\n    else{\r\n        await this.setState({addPage: false, editPage: false})\r\n    }\r\n  }\r\n\r\n  tarikDataDept = async() =>{\r\n    console.log('tarik data')\r\n    // let sql = `\r\n    //     select * from employees_new limit 10000;\r\n    // `\r\n\r\n    let sql = `\r\n    select * from departments_new\r\n    `\r\n    var result = await axios.post(api_query, {\r\n                                query : sql\r\n                            })\r\n                                .then(result => {\r\n                                let res = result.data.response\r\n                                // console.log('result : ', result)\r\n                                if (res.length == '') {\r\n                                    return []\r\n                                }\r\n\r\n                                var tmp = []\r\n                                for (let index = 0; index < res.length; index++) {\r\n                                  const element = res[index];\r\n                                  // console.log('dataaaaa : ', element)\r\n                                  var data = {}\r\n                                  data.id = element.id\r\n                                  data.value = element.id\r\n                                  data.label = element.dept_name\r\n                                  tmp.push(data)\r\n                                  // console.log('tiap push : ', tmp)\r\n                                }\r\n                                // console.log('hasil push : ', tmp)\r\n                                // return res;\r\n                                return tmp;\r\n                            }).catch(err => {\r\n                                console.log('error : ', err)\r\n                                return []\r\n                            })\r\n    await this.setState({dept_name: result})\r\n    }\r\n\r\n  tarikDataPosition = async() =>{\r\n      // console.log('tarik data')\r\n      // let sql = `\r\n      //     select * from employees_new limit 10000;\r\n      // `\r\n  \r\n      let sql = `\r\n      select * from position_management\r\n      `\r\n      var result = await axios.post(api_query, {\r\n                                  query : sql\r\n                              })\r\n                                  .then(result => {\r\n                                  let res = result.data.response\r\n                                  // console.log('result : ', result)\r\n                                  if (res.length == '') {\r\n                                      return []\r\n                                  }\r\n  \r\n                                  var tmp = []\r\n                                  for (let index = 0; index < res.length; index++) {\r\n                                    const element = res[index];\r\n                                    // console.log('dataaaaa : ', element)\r\n                                    var data = {}\r\n                                    data.id = element.id\r\n                                    data.value = element.id\r\n                                    data.label = element.position\r\n                                    tmp.push(data)\r\n                                    // console.log('tiap push : ', tmp)\r\n                                  }\r\n                                  // console.log('hasil push : ', tmp)\r\n                                  // return res;\r\n                                  return tmp;\r\n                              }).catch(err => {\r\n                                  console.log('error : ', err)\r\n                                  return []\r\n                              })\r\n        await this.setState({position: result})\r\n      }\r\n      \r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.state.addPage ? \r\n            <Breadcrumbs\r\n                breadCrumbTitle=\"Employees Add\"\r\n                breadCrumbParent=\"Employees\"\r\n                breadCrumbActive=\"Employees Add\"\r\n            />\r\n        :\r\n        this.state.editPage ? \r\n            <Breadcrumbs\r\n                breadCrumbTitle=\"Employees Edit\"\r\n                breadCrumbParent=\"Employees\"\r\n                breadCrumbActive=\"Employees Edit\"\r\n            />\r\n        :\r\n            <Breadcrumbs\r\n                breadCrumbTitle=\"Employees\"\r\n                breadCrumbParent=\"Employees\"\r\n                breadCrumbActive=\"Employees\"\r\n            />\r\n         }\r\n        <Row>\r\n\r\n          <Col sm=\"12\">\r\n              {this.state.addPage ? \r\n                // <EmployeesAdd {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\r\n                <Spinner color=\"primary\" />\r\n              : \r\n              this.state.editPage ? \r\n                <EmployeesEdit {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\r\n              : \r\n                <DataTableEmployees {...this.state} {...this.props} changeViewPage={this.changeViewPage}/>\r\n              }\r\n          </Col>\r\n\r\n        </Row>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EmployeesPage"]},"metadata":{},"sourceType":"module"}