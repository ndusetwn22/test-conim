{"ast":null,"code":"var _jsxFileName = \"E:\\\\react\\\\rombak-react-vuexy2\\\\src\\\\views\\\\apps\\\\calendar\\\\Calendar.js\";\nimport React from \"react\";\nimport AddEventSidebar from \"./AddEventSidebar\";\nimport AddEventButton from \"./AddEventButton\";\nimport { Card, CardBody, Button, ButtonGroup } from \"reactstrap\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport { fetchEvents, handleSidebar, addEvent, handleSelectedEvent, updateEvent, updateDrag, updateResize } from \"../../../redux/actions/calendar/index\";\nimport { ChevronLeft, ChevronRight } from \"react-feather\";\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.scss\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport \"../../../assets/scss/plugins/calendars/react-big-calendar.scss\";\nconst DragAndDropCalendar = withDragAndDrop(Calendar);\nconst localizer = momentLocalizer(moment);\nconst eventColors = {\n  business: \"bg-success\",\n  work: \"bg-warning\",\n  personal: \"bg-danger\",\n  others: \"bg-primary\"\n};\n\nclass Toolbar extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"calendar-header mb-2 d-flex justify-content-between flex-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(AddEventButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center view-options mt-1 mt-sm-0 ml-lg-5 ml-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: `btn ${this.props.view === \"month\" ? \"btn-primary\" : \"btn-outline-primary text-primary\"}`,\n      onClick: () => {\n        this.props.onView(\"month\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, \"Month\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: `btn ${this.props.view === \"week\" ? \"btn-primary\" : \"btn-outline-primary text-primary\"}`,\n      onClick: () => {\n        this.props.onView(\"week\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, \"Week\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: `btn ${this.props.view === \"day\" ? \"btn-primary\" : \"btn-outline-primary text-primary\"}`,\n      onClick: () => {\n        this.props.onView(\"day\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, \"Day\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"month-label d-flex flex-column text-center text-md-right mt-1 mt-md-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"calendar-navigation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button.Ripple, {\n      className: \"btn-icon rounded-circle\",\n      size: \"sm\",\n      color: \"primary\",\n      onClick: () => this.props.onNavigate(\"PREV\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ChevronLeft, {\n      size: 15,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"month d-inline-block mx-75 text-bold-500 font-medium-2 align-middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, this.props.label), /*#__PURE__*/React.createElement(Button.Ripple, {\n      className: \"btn-icon rounded-circle\",\n      size: \"sm\",\n      color: \"primary\",\n      onClick: () => this.props.onNavigate(\"NEXT\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ChevronRight, {\n      size: 15,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"event-tags d-none d-sm-flex justify-content-end mt-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tag mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bullet bullet-success bullet-sm mr-50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 15\n      }\n    }, \"Business\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tag mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bullet bullet-warning bullet-sm mr-50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, \"Work\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tag mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bullet bullet-danger bullet-sm mr-50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, \"Personal\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bullet bullet-primary bullet-sm mr-50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, \"Others\")))));\n  }\n\n}\n\nclass CalendarApp extends React.Component {\n  static getDerivedStateFromProps(props, state) {\n    if (props.app.events.length !== state.events || props.app.sidebar !== state.sidebar || props.app.selectedEvent !== state.eventInfo) {\n      let dateToObj = props.app.events.map(event => {\n        event.start = new Date(event.start);\n        event.end = new Date(event.end);\n        return event;\n      });\n      return {\n        events: dateToObj,\n        sidebar: props.app.sidebar,\n        eventInfo: props.app.selectedEvent\n      };\n    } // Return null if the state hasn't changed\n\n\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleEventColors = event => {\n      return {\n        className: eventColors[event.label]\n      };\n    };\n\n    this.moveEvent = ({\n      event,\n      start,\n      end,\n      isAllDay: droppedOnAllDaySlot\n    }) => {\n      const {\n        events\n      } = this.state;\n      const idx = events.indexOf(event);\n      let allDay = event.allDay;\n\n      if (!event.allDay && droppedOnAllDaySlot) {\n        allDay = true;\n      } else if (event.allDay && !droppedOnAllDaySlot) {\n        allDay = false;\n      }\n\n      const updatedEvent = { ...event,\n        start,\n        end,\n        allDay\n      };\n      const nextEvents = [...events];\n      nextEvents.splice(idx, 1, updatedEvent);\n      this.setState({\n        events: nextEvents\n      });\n      this.props.updateDrag(updatedEvent);\n    };\n\n    this.resizeEvent = ({\n      event,\n      start,\n      end\n    }) => {\n      const {\n        events\n      } = this.state;\n      const nextEvents = events.map(existingEvent => {\n        return existingEvent.id === event.id ? { ...existingEvent,\n          start,\n          end\n        } : existingEvent;\n      });\n      this.setState({\n        events: nextEvents\n      });\n      this.props.updateResize({ ...event,\n        start,\n        end\n      });\n    };\n\n    this.handleSelectEvent = event => {\n      let filteredState = this.state.events.filter(i => i.id === event.id);\n      this.props.handleSidebar(true);\n      this.props.handleSelectedEvent(filteredState[0]);\n      this.setState({\n        eventInfo: filteredState[0]\n      });\n    };\n\n    this.state = {\n      events: [],\n      views: {\n        month: true,\n        week: true,\n        day: true\n      },\n      eventInfo: null\n    };\n  }\n\n  async componentDidMount() {\n    await this.props.fetchEvents();\n  }\n\n  render() {\n    const {\n      events,\n      views,\n      sidebar\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-calendar position-relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `app-content-overlay ${sidebar ? \"show\" : \"hidden\"}`,\n      onClick: () => {\n        this.props.handleSidebar(false);\n        this.props.handleSelectedEvent(null);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(DragAndDropCalendar, {\n      localizer: localizer,\n      events: events,\n      onEventDrop: this.moveEvent,\n      onEventResize: this.resizeEvent,\n      startAccessor: \"start\",\n      endAccessor: \"end\",\n      resourceAccessor: \"url\",\n      views: views,\n      components: {\n        toolbar: Toolbar\n      },\n      eventPropGetter: this.handleEventColors,\n      popup: true,\n      onSelectEvent: event => {\n        this.handleSelectEvent(event);\n      },\n      onSelectSlot: ({\n        start,\n        end\n      }) => {\n        this.props.handleSidebar(true);\n        this.props.handleSelectedEvent({\n          title: \"\",\n          label: null,\n          start: new Date(start),\n          end: new Date(end),\n          url: \"\"\n        });\n      },\n      selectable: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(AddEventSidebar, {\n      sidebar: sidebar,\n      handleSidebar: this.props.handleSidebar,\n      addEvent: this.props.addEvent,\n      events: this.state.events,\n      eventInfo: this.state.eventInfo,\n      selectedEvent: this.props.handleSelectedEvent,\n      updateEvent: this.props.updateEvent,\n      resizable: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    app: state.calendar\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchEvents,\n  handleSidebar,\n  addEvent,\n  handleSelectedEvent,\n  updateEvent,\n  updateDrag,\n  updateResize\n})(CalendarApp);","map":{"version":3,"sources":["E:/react/rombak-react-vuexy2/src/views/apps/calendar/Calendar.js"],"names":["React","AddEventSidebar","AddEventButton","Card","CardBody","Button","ButtonGroup","Calendar","momentLocalizer","withDragAndDrop","moment","connect","fetchEvents","handleSidebar","addEvent","handleSelectedEvent","updateEvent","updateDrag","updateResize","ChevronLeft","ChevronRight","DragAndDropCalendar","localizer","eventColors","business","work","personal","others","Toolbar","Component","render","props","view","onView","onNavigate","label","CalendarApp","getDerivedStateFromProps","state","app","events","length","sidebar","selectedEvent","eventInfo","dateToObj","map","event","start","Date","end","constructor","handleEventColors","className","moveEvent","isAllDay","droppedOnAllDaySlot","idx","indexOf","allDay","updatedEvent","nextEvents","splice","setState","resizeEvent","existingEvent","id","handleSelectEvent","filteredState","filter","i","views","month","week","day","componentDidMount","toolbar","title","url","mapStateToProps","calendar"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport AddEventSidebar from \"./AddEventSidebar\"\nimport AddEventButton from \"./AddEventButton\"\nimport { Card, CardBody, Button, ButtonGroup } from \"reactstrap\"\nimport { Calendar, momentLocalizer } from \"react-big-calendar\"\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\"\nimport moment from \"moment\"\nimport { connect } from \"react-redux\"\nimport {\n  fetchEvents,\n  handleSidebar,\n  addEvent,\n  handleSelectedEvent,\n  updateEvent,\n  updateDrag,\n  updateResize\n} from \"../../../redux/actions/calendar/index\"\nimport { ChevronLeft, ChevronRight } from \"react-feather\"\n\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.scss\"\nimport \"react-big-calendar/lib/css/react-big-calendar.css\"\nimport \"../../../assets/scss/plugins/calendars/react-big-calendar.scss\"\nconst DragAndDropCalendar = withDragAndDrop(Calendar)\nconst localizer = momentLocalizer(moment)\nconst eventColors = {\n  business: \"bg-success\",\n  work: \"bg-warning\",\n  personal: \"bg-danger\",\n  others: \"bg-primary\"\n}\n\nclass Toolbar extends React.Component {\n  render() {\n    return (\n      <div className=\"calendar-header mb-2 d-flex justify-content-between flex-wrap\">\n        <div>\n          <AddEventButton />\n        </div>\n        <div className=\"text-center view-options mt-1 mt-sm-0 ml-lg-5 ml-0\">\n          <ButtonGroup>\n            <button\n              className={`btn ${\n                this.props.view === \"month\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"month\")\n              }}\n            >\n              Month\n            </button>\n            <button\n              className={`btn ${\n                this.props.view === \"week\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"week\")\n              }}\n            >\n              Week\n            </button>\n            <button\n              className={`btn ${\n                this.props.view === \"day\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"day\")\n              }}\n            >\n              Day\n            </button>\n          </ButtonGroup>\n        </div>\n        <div className=\"month-label d-flex flex-column text-center text-md-right mt-1 mt-md-0\">\n          <div className=\"calendar-navigation\">\n            <Button.Ripple\n              className=\"btn-icon rounded-circle\"\n              size=\"sm\"\n              color=\"primary\"\n              onClick={() => this.props.onNavigate(\"PREV\")}\n            >\n              <ChevronLeft size={15} />\n            </Button.Ripple>\n            <div className=\"month d-inline-block mx-75 text-bold-500 font-medium-2 align-middle\">\n              {this.props.label}\n            </div>\n            <Button.Ripple\n              className=\"btn-icon rounded-circle\"\n              size=\"sm\"\n              color=\"primary\"\n              onClick={() => this.props.onNavigate(\"NEXT\")}\n            >\n              <ChevronRight size={15} />\n            </Button.Ripple>\n          </div>\n          <div className=\"event-tags d-none d-sm-flex justify-content-end mt-1\">\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-success bullet-sm mr-50\"></span>\n              <span>Business</span>\n            </div>\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-warning bullet-sm mr-50\"></span>\n              <span>Work</span>\n            </div>\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-danger bullet-sm mr-50\"></span>\n              <span>Personal</span>\n            </div>\n            <div className=\"tag\">\n              <span className=\"bullet bullet-primary bullet-sm mr-50\"></span>\n              <span>Others</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass CalendarApp extends React.Component {\n  static getDerivedStateFromProps(props, state) {\n    if (\n      props.app.events.length !== state.events ||\n      props.app.sidebar !== state.sidebar ||\n      props.app.selectedEvent !== state.eventInfo\n    ) {\n      let dateToObj = props.app.events.map(event => {\n        event.start = new Date(event.start)\n        event.end = new Date(event.end)\n        return event\n      })\n      return {\n        events: dateToObj,\n        sidebar: props.app.sidebar,\n        eventInfo: props.app.selectedEvent\n      }\n    }\n    // Return null if the state hasn't changed\n    return null\n  }\n  constructor(props) {\n    super(props)\n    this.state = {\n      events: [],\n      views: {\n        month: true,\n        week: true,\n        day: true\n      },\n      eventInfo: null\n    }\n  }\n\n  async componentDidMount() {\n    await this.props.fetchEvents()\n  }\n\n  handleEventColors = event => {\n    return { className: eventColors[event.label] }\n  }\n\n  moveEvent = ({ event, start, end, isAllDay: droppedOnAllDaySlot }) => {\n    const { events } = this.state\n    const idx = events.indexOf(event)\n    let allDay = event.allDay\n    if (!event.allDay && droppedOnAllDaySlot) {\n      allDay = true\n    } else if (event.allDay && !droppedOnAllDaySlot) {\n      allDay = false\n    }\n    const updatedEvent = { ...event, start, end, allDay }\n    const nextEvents = [...events]\n    nextEvents.splice(idx, 1, updatedEvent)\n    this.setState({\n      events: nextEvents\n    })\n    this.props.updateDrag(updatedEvent)\n  }\n\n  resizeEvent = ({ event, start, end }) => {\n    const { events } = this.state\n    const nextEvents = events.map(existingEvent => {\n      return existingEvent.id === event.id\n        ? { ...existingEvent, start, end }\n        : existingEvent\n    })\n\n    this.setState({\n      events: nextEvents\n    })\n\n    this.props.updateResize({ ...event, start, end })\n  }\n\n  handleSelectEvent = event => {\n    let filteredState = this.state.events.filter(i => i.id === event.id)\n    this.props.handleSidebar(true)\n    this.props.handleSelectedEvent(filteredState[0])\n    this.setState({\n      eventInfo: filteredState[0]\n    })\n  }\n\n  render() {\n    const { events, views, sidebar } = this.state\n    return (\n      <div className=\"app-calendar position-relative\">\n        <div\n          className={`app-content-overlay ${sidebar ? \"show\" : \"hidden\"}`}\n          onClick={() => {\n            this.props.handleSidebar(false)\n            this.props.handleSelectedEvent(null)\n          }}\n        ></div>\n        <Card>\n          <CardBody>\n            <DragAndDropCalendar\n              localizer={localizer}\n              events={events}\n              onEventDrop={this.moveEvent}\n              onEventResize={this.resizeEvent}\n              startAccessor=\"start\"\n              endAccessor=\"end\"\n              resourceAccessor=\"url\"\n              views={views}\n              components={{ toolbar: Toolbar }}\n              eventPropGetter={this.handleEventColors}\n              popup={true}\n              onSelectEvent={event => {\n                this.handleSelectEvent(event)\n              }}\n              onSelectSlot={({ start, end }) => {\n                this.props.handleSidebar(true)\n                this.props.handleSelectedEvent({\n                  title: \"\",\n                  label: null,\n                  start: new Date(start),\n                  end: new Date(end),\n                  url: \"\"\n                })\n              }}\n              selectable={true}\n            />\n          </CardBody>\n        </Card>\n        <AddEventSidebar\n          sidebar={sidebar}\n          handleSidebar={this.props.handleSidebar}\n          addEvent={this.props.addEvent}\n          events={this.state.events}\n          eventInfo={this.state.eventInfo}\n          selectedEvent={this.props.handleSelectedEvent}\n          updateEvent={this.props.updateEvent}\n          resizable\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    app: state.calendar\n  }\n}\n\nexport default connect(mapStateToProps, {\n  fetchEvents,\n  handleSidebar,\n  addEvent,\n  handleSelectedEvent,\n  updateEvent,\n  updateDrag,\n  updateResize\n})(CalendarApp)\n"]},"metadata":{},"sourceType":"module"}