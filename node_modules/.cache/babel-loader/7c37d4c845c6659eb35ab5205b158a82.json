{"ast":null,"code":"import _toConsumableArray from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pandusetiawan/Documents/react/df-v1.2/src/extensions/import-export/Import.js\";\nimport React from \"react\";\nimport ExtensionsHeader from \"../extensionsHeader\";\nimport { Row, Col, Card, CardBody, Table, CardHeader, CardTitle, Input } from \"reactstrap\";\nimport XLSX from \"xlsx\";\nimport { DownloadCloud, Search } from \"react-feather\";\nimport { useDropzone } from \"react-dropzone\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"../../assets/scss/plugins/extensions/toastr.scss\";\nimport \"../../assets/scss/plugins/extensions/dropzone.scss\";\n\nfunction Uploader(props) {\n  var _useDropzone = useDropzone({\n    accept: \".xlsx, .xls, .csv\",\n    onDrop: function onDrop(acceptedFiles) {\n      var reader = new FileReader();\n\n      reader.onload = function () {\n        var fileData = reader.result;\n        var wb = XLSX.read(fileData, {\n          type: \"binary\"\n        });\n        wb.SheetNames.forEach(function (sheetName) {\n          var rowObj = XLSX.utils.sheet_to_row_object_array(wb.Sheets[sheetName]);\n          props.getTableData(rowObj, acceptedFiles[0].name);\n        });\n      };\n\n      if (acceptedFiles.length) {\n        reader.readAsBinaryString(acceptedFiles[0]);\n      } else {\n        toast.error(\"You can only upload .xlsx, .xls, .csv Files!\");\n      }\n    }\n  }),\n      getRootProps = _useDropzone.getRootProps,\n      getInputProps = _useDropzone.getInputProps;\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"pb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, getRootProps({\n    className: \"dropzone py-3 flex-column\"\n  }), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(DownloadCloud, {\n    className: \"text-light\",\n    size: 50,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-0 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, \"Drop Excel File or Browse\")));\n}\n\nvar Import = /*#__PURE__*/function (_React$Component) {\n  _inherits(Import, _React$Component);\n\n  function Import() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Import);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Import)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      tableData: [],\n      filteredData: [],\n      value: \"\",\n      name: \"\"\n    };\n\n    _this.getTableData = function (arr, name) {\n      _this.setState({\n        tableData: arr,\n        name: name\n      });\n    };\n\n    _this.handleFilter = function (e) {\n      var data = _this.state.tableData;\n      var filteredData = [];\n      var value = e.target.value;\n\n      _this.setState({\n        value: value\n      });\n\n      if (value.length) {\n        filteredData = data.filter(function (col) {\n          var keys = Object.keys(col);\n          var startsWithCondition = keys.filter(function (key) {\n            return col[key].toString().toLowerCase().startsWith(value.toLowerCase());\n          });\n          var includesCondition = keys.filter(function (key) {\n            return col[key].toString().toLowerCase().includes(value.toLowerCase());\n          });\n          if (startsWithCondition.length) return col[startsWithCondition];else if (!startsWithCondition && includesCondition.length) return col[includesCondition];else return null;\n        });\n\n        _this.setState({\n          value: value,\n          filteredData: filteredData\n        });\n      } else {\n        return null;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Import, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var headArr = this.state.tableData.length ? this.state.tableData.map(function (col, index) {\n        if (index === 0) return _toConsumableArray(Object.keys(col));else return null;\n      }) : [];\n      var dataArr = this.state.value.length ? this.state.filteredData : this.state.tableData.length && !this.state.value.length ? this.state.tableData : null;\n      var renderTableBody = dataArr !== null && dataArr.length ? dataArr.map(function (col, index) {\n        var keys = Object.keys(col);\n        var renderTd = keys.map(function (key, index) {\n          return /*#__PURE__*/React.createElement(\"td\", {\n            key: index,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }\n          }, col[key]);\n        });\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 20\n          }\n        }, renderTd);\n      }) : null;\n      var renderTableHead = headArr.length ? headArr[0].map(function (head, index) {\n        return /*#__PURE__*/React.createElement(\"th\", {\n          key: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 18\n          }\n        }, head);\n      }) : null;\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ExtensionsHeader, {\n        title: \"XLSX\",\n        subTitle: \"Xlsx is a parser and writer for various spreadsheet formats\",\n        link: \"https://github.com/AdeleD/react-paginate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        className: \"import-component\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Uploader, {\n        getTableData: this.getTableData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }\n      })))))), this.state.tableData.length ? /*#__PURE__*/React.createElement(Col, {\n        sm: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"justify-content-between flex-wrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(CardTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 19\n        }\n      }, this.state.name), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filter position-relative has-icon-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        value: this.state.value,\n        onChange: function onChange(e) {\n          return _this2.handleFilter(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-control-position\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Search, {\n        size: 15,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 23\n        }\n      })))), /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        className: \"table-hover-animation\",\n        responsive: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 23\n        }\n      }, renderTableHead)), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }\n      }, renderTableBody))))) : null, /*#__PURE__*/React.createElement(ToastContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Import;\n}(React.Component);\n\nexport default Import;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/extensions/import-export/Import.js"],"names":["React","ExtensionsHeader","Row","Col","Card","CardBody","Table","CardHeader","CardTitle","Input","XLSX","DownloadCloud","Search","useDropzone","toast","ToastContainer","Uploader","props","accept","onDrop","acceptedFiles","reader","FileReader","onload","fileData","result","wb","read","type","SheetNames","forEach","sheetName","rowObj","utils","sheet_to_row_object_array","Sheets","getTableData","name","length","readAsBinaryString","error","getRootProps","getInputProps","className","Import","state","tableData","filteredData","value","arr","setState","handleFilter","e","data","target","filter","col","keys","Object","startsWithCondition","key","toString","toLowerCase","startsWith","includesCondition","includes","headArr","map","index","dataArr","renderTableBody","renderTd","renderTableHead","head","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport ExtensionsHeader from \"../extensionsHeader\"\nimport {\n  Row,\n  Col,\n  Card,\n  CardBody,\n  Table,\n  CardHeader,\n  CardTitle,\n  Input\n} from \"reactstrap\"\nimport XLSX from \"xlsx\"\nimport { DownloadCloud, Search } from \"react-feather\"\nimport { useDropzone } from \"react-dropzone\"\nimport { toast, ToastContainer } from \"react-toastify\"\n\nimport \"react-toastify/dist/ReactToastify.css\"\nimport \"../../assets/scss/plugins/extensions/toastr.scss\"\nimport \"../../assets/scss/plugins/extensions/dropzone.scss\"\n\nfunction Uploader(props) {\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: \".xlsx, .xls, .csv\",\n    onDrop: acceptedFiles => {\n      var reader = new FileReader()\n      reader.onload = function() {\n        var fileData = reader.result\n        var wb = XLSX.read(fileData, { type: \"binary\" })\n\n        wb.SheetNames.forEach(function(sheetName) {\n          var rowObj = XLSX.utils.sheet_to_row_object_array(\n            wb.Sheets[sheetName]\n          )\n          props.getTableData(rowObj, acceptedFiles[0].name)\n        })\n      }\n      if (acceptedFiles.length) {\n        reader.readAsBinaryString(acceptedFiles[0])\n      } else {\n        toast.error(\"You can only upload .xlsx, .xls, .csv Files!\")\n      }\n    }\n  })\n  return (\n    <section className=\"pb-1\">\n      <div {...getRootProps({ className: \"dropzone py-3 flex-column\" })}>\n        <input {...getInputProps()} />\n        <DownloadCloud className=\"text-light\" size={50} />\n        <h4 className=\"mb-0 mt-2\">Drop Excel File or Browse</h4>\n      </div>\n    </section>\n  )\n}\n\nclass Import extends React.Component {\n  state = {\n    tableData: [],\n    filteredData: [],\n    value: \"\",\n    name: \"\"\n  }\n\n  getTableData = (arr, name) => {\n    this.setState({ tableData: arr, name })\n  }\n\n  handleFilter = e => {\n    let data = this.state.tableData\n    let filteredData = []\n    let value = e.target.value\n    this.setState({ value })\n\n    if (value.length) {\n      filteredData = data.filter(col => {\n        let keys = Object.keys(col)\n\n        let startsWithCondition = keys.filter(key => {\n          return col[key]\n            .toString()\n            .toLowerCase()\n            .startsWith(value.toLowerCase())\n        })\n\n        let includesCondition = keys.filter(key =>\n          col[key]\n            .toString()\n            .toLowerCase()\n            .includes(value.toLowerCase())\n        )\n\n        if (startsWithCondition.length) return col[startsWithCondition]\n        else if (!startsWithCondition && includesCondition.length)\n          return col[includesCondition]\n        else return null\n      })\n      this.setState({ value, filteredData })\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    let headArr = this.state.tableData.length\n      ? this.state.tableData.map((col, index) => {\n          if (index === 0) return [...Object.keys(col)]\n          else return null\n        })\n      : []\n    let dataArr = this.state.value.length\n      ? this.state.filteredData\n      : this.state.tableData.length && !this.state.value.length\n      ? this.state.tableData\n      : null\n    let renderTableBody =\n      dataArr !== null && dataArr.length\n        ? dataArr.map((col, index) => {\n            let keys = Object.keys(col)\n            let renderTd = keys.map((key, index) => (\n              <td key={index}>{col[key]}</td>\n            ))\n            return <tr key={index}>{renderTd}</tr>\n          })\n        : null\n\n    let renderTableHead = headArr.length\n      ? headArr[0].map((head, index) => {\n          return <th key={index}>{head}</th>\n        })\n      : null\n\n    return (\n      <React.Fragment>\n        <ExtensionsHeader\n          title=\"XLSX\"\n          subTitle=\"Xlsx is a parser and writer for various spreadsheet formats\"\n          link=\"https://github.com/AdeleD/react-paginate\"\n        />\n        <Row className=\"import-component\">\n          <Col sm=\"12\">\n            <Card>\n              <CardBody>\n                <Row>\n                  <Col sm=\"12\">\n                    <Uploader getTableData={this.getTableData} />\n                  </Col>\n                </Row>\n              </CardBody>\n            </Card>\n          </Col>\n          {this.state.tableData.length ? (\n            <Col sm=\"12\">\n              <Card>\n                <CardHeader className=\"justify-content-between flex-wrap\">\n                  <CardTitle>{this.state.name}</CardTitle>\n                  <div className=\"filter position-relative has-icon-left\">\n                    <Input\n                      type=\"text\"\n                      value={this.state.value}\n                      onChange={e => this.handleFilter(e)}\n                    />\n                    <div className=\"form-control-position\">\n                      <Search size={15} />\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardBody>\n                  <Table className=\"table-hover-animation\" responsive>\n                    <thead>\n                      <tr>{renderTableHead}</tr>\n                    </thead>\n                    <tbody>{renderTableBody}</tbody>\n                  </Table>\n                </CardBody>\n              </Card>\n            </Col>\n          ) : null}\n          <ToastContainer />\n        </Row>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default Import\n"]},"metadata":{},"sourceType":"module"}