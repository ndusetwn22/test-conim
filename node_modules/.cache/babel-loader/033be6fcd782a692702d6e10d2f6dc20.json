{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pandusetiawan/Documents/react/df-v1.2/src/views/apps/calendar/Calendar.js\";\nimport React from \"react\";\nimport AddEventSidebar from \"./AddEventSidebar\";\nimport AddEventButton from \"./AddEventButton\";\nimport { Card, CardBody, Button, ButtonGroup } from \"reactstrap\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport { fetchEvents, handleSidebar, addEvent, handleSelectedEvent, updateEvent, updateDrag, updateResize } from \"../../../redux/actions/calendar/index\";\nimport { ChevronLeft, ChevronRight } from \"react-feather\";\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.scss\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport \"../../../assets/scss/plugins/calendars/react-big-calendar.scss\";\nvar DragAndDropCalendar = withDragAndDrop(Calendar);\nvar localizer = momentLocalizer(moment);\nvar eventColors = {\n  business: \"bg-success\",\n  work: \"bg-warning\",\n  personal: \"bg-danger\",\n  others: \"bg-primary\"\n};\n\nvar Toolbar = /*#__PURE__*/function (_React$Component) {\n  _inherits(Toolbar, _React$Component);\n\n  function Toolbar() {\n    _classCallCheck(this, Toolbar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Toolbar).apply(this, arguments));\n  }\n\n  _createClass(Toolbar, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"calendar-header mb-2 d-flex justify-content-between flex-wrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(AddEventButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center view-options mt-1 mt-sm-0 ml-lg-5 ml-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ButtonGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn \".concat(this.props.view === \"month\" ? \"btn-primary\" : \"btn-outline-primary text-primary\"),\n        onClick: function onClick() {\n          _this.props.onView(\"month\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }\n      }, \"Month\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn \".concat(this.props.view === \"week\" ? \"btn-primary\" : \"btn-outline-primary text-primary\"),\n        onClick: function onClick() {\n          _this.props.onView(\"week\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }\n      }, \"Week\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn \".concat(this.props.view === \"day\" ? \"btn-primary\" : \"btn-outline-primary text-primary\"),\n        onClick: function onClick() {\n          _this.props.onView(\"day\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }, \"Day\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"month-label d-flex flex-column text-center text-md-right mt-1 mt-md-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"calendar-navigation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button.Ripple, {\n        className: \"btn-icon rounded-circle\",\n        size: \"sm\",\n        color: \"primary\",\n        onClick: function onClick() {\n          return _this.props.onNavigate(\"PREV\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ChevronLeft, {\n        size: 15,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"month d-inline-block mx-75 text-bold-500 font-medium-2 align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, this.props.label), /*#__PURE__*/React.createElement(Button.Ripple, {\n        className: \"btn-icon rounded-circle\",\n        size: \"sm\",\n        color: \"primary\",\n        onClick: function onClick() {\n          return _this.props.onNavigate(\"NEXT\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ChevronRight, {\n        size: 15,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"event-tags d-none d-sm-flex justify-content-end mt-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tag mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"bullet bullet-success bullet-sm mr-50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }\n      }, \"Business\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tag mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"bullet bullet-warning bullet-sm mr-50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }\n      }, \"Work\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tag mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"bullet bullet-danger bullet-sm mr-50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }\n      }, \"Personal\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tag\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"bullet bullet-primary bullet-sm mr-50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }\n      }, \"Others\")))));\n    }\n  }]);\n\n  return Toolbar;\n}(React.Component);\n\nvar CalendarApp = /*#__PURE__*/function (_React$Component2) {\n  _inherits(CalendarApp, _React$Component2);\n\n  _createClass(CalendarApp, null, [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.app.events.length !== state.events || props.app.sidebar !== state.sidebar || props.app.selectedEvent !== state.eventInfo) {\n        var dateToObj = props.app.events.map(function (event) {\n          event.start = new Date(event.start);\n          event.end = new Date(event.end);\n          return event;\n        });\n        return {\n          events: dateToObj,\n          sidebar: props.app.sidebar,\n          eventInfo: props.app.selectedEvent\n        };\n      } // Return null if the state hasn't changed\n\n\n      return null;\n    }\n  }]);\n\n  function CalendarApp(props) {\n    var _this2;\n\n    _classCallCheck(this, CalendarApp);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(CalendarApp).call(this, props));\n\n    _this2.handleEventColors = function (event) {\n      return {\n        className: eventColors[event.label]\n      };\n    };\n\n    _this2.moveEvent = function (_ref) {\n      var event = _ref.event,\n          start = _ref.start,\n          end = _ref.end,\n          droppedOnAllDaySlot = _ref.isAllDay;\n      var events = _this2.state.events;\n      var idx = events.indexOf(event);\n      var allDay = event.allDay;\n\n      if (!event.allDay && droppedOnAllDaySlot) {\n        allDay = true;\n      } else if (event.allDay && !droppedOnAllDaySlot) {\n        allDay = false;\n      }\n\n      var updatedEvent = _objectSpread({}, event, {\n        start: start,\n        end: end,\n        allDay: allDay\n      });\n\n      var nextEvents = _toConsumableArray(events);\n\n      nextEvents.splice(idx, 1, updatedEvent);\n\n      _this2.setState({\n        events: nextEvents\n      });\n\n      _this2.props.updateDrag(updatedEvent);\n    };\n\n    _this2.resizeEvent = function (_ref2) {\n      var event = _ref2.event,\n          start = _ref2.start,\n          end = _ref2.end;\n      var events = _this2.state.events;\n      var nextEvents = events.map(function (existingEvent) {\n        return existingEvent.id === event.id ? _objectSpread({}, existingEvent, {\n          start: start,\n          end: end\n        }) : existingEvent;\n      });\n\n      _this2.setState({\n        events: nextEvents\n      });\n\n      _this2.props.updateResize(_objectSpread({}, event, {\n        start: start,\n        end: end\n      }));\n    };\n\n    _this2.handleSelectEvent = function (event) {\n      var filteredState = _this2.state.events.filter(function (i) {\n        return i.id === event.id;\n      });\n\n      _this2.props.handleSidebar(true);\n\n      _this2.props.handleSelectedEvent(filteredState[0]);\n\n      _this2.setState({\n        eventInfo: filteredState[0]\n      });\n    };\n\n    _this2.state = {\n      events: [],\n      views: {\n        month: true,\n        week: true,\n        day: true\n      },\n      eventInfo: null\n    };\n    return _this2;\n  }\n\n  _createClass(CalendarApp, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.props.fetchEvents();\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          events = _this$state.events,\n          views = _this$state.views,\n          sidebar = _this$state.sidebar;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app-calendar position-relative\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app-content-overlay \".concat(sidebar ? \"show\" : \"hidden\"),\n        onClick: function onClick() {\n          _this3.props.handleSidebar(false);\n\n          _this3.props.handleSelectedEvent(null);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(DragAndDropCalendar, {\n        localizer: localizer,\n        events: events,\n        onEventDrop: this.moveEvent,\n        onEventResize: this.resizeEvent,\n        startAccessor: \"start\",\n        endAccessor: \"end\",\n        resourceAccessor: \"url\",\n        views: views,\n        components: {\n          toolbar: Toolbar\n        },\n        eventPropGetter: this.handleEventColors,\n        popup: true,\n        onSelectEvent: function onSelectEvent(event) {\n          _this3.handleSelectEvent(event);\n        },\n        onSelectSlot: function onSelectSlot(_ref3) {\n          var start = _ref3.start,\n              end = _ref3.end;\n\n          _this3.props.handleSidebar(true);\n\n          _this3.props.handleSelectedEvent({\n            title: \"\",\n            label: null,\n            start: new Date(start),\n            end: new Date(end),\n            url: \"\"\n          });\n        },\n        selectable: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(AddEventSidebar, {\n        sidebar: sidebar,\n        handleSidebar: this.props.handleSidebar,\n        addEvent: this.props.addEvent,\n        events: this.state.events,\n        eventInfo: this.state.eventInfo,\n        selectedEvent: this.props.handleSelectedEvent,\n        updateEvent: this.props.updateEvent,\n        resizable: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return CalendarApp;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    app: state.calendar\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchEvents: fetchEvents,\n  handleSidebar: handleSidebar,\n  addEvent: addEvent,\n  handleSelectedEvent: handleSelectedEvent,\n  updateEvent: updateEvent,\n  updateDrag: updateDrag,\n  updateResize: updateResize\n})(CalendarApp);","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/apps/calendar/Calendar.js"],"names":["React","AddEventSidebar","AddEventButton","Card","CardBody","Button","ButtonGroup","Calendar","momentLocalizer","withDragAndDrop","moment","connect","fetchEvents","handleSidebar","addEvent","handleSelectedEvent","updateEvent","updateDrag","updateResize","ChevronLeft","ChevronRight","DragAndDropCalendar","localizer","eventColors","business","work","personal","others","Toolbar","props","view","onView","onNavigate","label","Component","CalendarApp","state","app","events","length","sidebar","selectedEvent","eventInfo","dateToObj","map","event","start","Date","end","handleEventColors","className","moveEvent","droppedOnAllDaySlot","isAllDay","idx","indexOf","allDay","updatedEvent","nextEvents","splice","setState","resizeEvent","existingEvent","id","handleSelectEvent","filteredState","filter","i","views","month","week","day","toolbar","title","url","mapStateToProps","calendar"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport AddEventSidebar from \"./AddEventSidebar\"\nimport AddEventButton from \"./AddEventButton\"\nimport { Card, CardBody, Button, ButtonGroup } from \"reactstrap\"\nimport { Calendar, momentLocalizer } from \"react-big-calendar\"\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\"\nimport moment from \"moment\"\nimport { connect } from \"react-redux\"\nimport {\n  fetchEvents,\n  handleSidebar,\n  addEvent,\n  handleSelectedEvent,\n  updateEvent,\n  updateDrag,\n  updateResize\n} from \"../../../redux/actions/calendar/index\"\nimport { ChevronLeft, ChevronRight } from \"react-feather\"\n\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.scss\"\nimport \"react-big-calendar/lib/css/react-big-calendar.css\"\nimport \"../../../assets/scss/plugins/calendars/react-big-calendar.scss\"\nconst DragAndDropCalendar = withDragAndDrop(Calendar)\nconst localizer = momentLocalizer(moment)\nconst eventColors = {\n  business: \"bg-success\",\n  work: \"bg-warning\",\n  personal: \"bg-danger\",\n  others: \"bg-primary\"\n}\n\nclass Toolbar extends React.Component {\n  render() {\n    return (\n      <div className=\"calendar-header mb-2 d-flex justify-content-between flex-wrap\">\n        <div>\n          <AddEventButton />\n        </div>\n        <div className=\"text-center view-options mt-1 mt-sm-0 ml-lg-5 ml-0\">\n          <ButtonGroup>\n            <button\n              className={`btn ${\n                this.props.view === \"month\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"month\")\n              }}\n            >\n              Month\n            </button>\n            <button\n              className={`btn ${\n                this.props.view === \"week\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"week\")\n              }}\n            >\n              Week\n            </button>\n            <button\n              className={`btn ${\n                this.props.view === \"day\"\n                  ? \"btn-primary\"\n                  : \"btn-outline-primary text-primary\"\n              }`}\n              onClick={() => {\n                this.props.onView(\"day\")\n              }}\n            >\n              Day\n            </button>\n          </ButtonGroup>\n        </div>\n        <div className=\"month-label d-flex flex-column text-center text-md-right mt-1 mt-md-0\">\n          <div className=\"calendar-navigation\">\n            <Button.Ripple\n              className=\"btn-icon rounded-circle\"\n              size=\"sm\"\n              color=\"primary\"\n              onClick={() => this.props.onNavigate(\"PREV\")}\n            >\n              <ChevronLeft size={15} />\n            </Button.Ripple>\n            <div className=\"month d-inline-block mx-75 text-bold-500 font-medium-2 align-middle\">\n              {this.props.label}\n            </div>\n            <Button.Ripple\n              className=\"btn-icon rounded-circle\"\n              size=\"sm\"\n              color=\"primary\"\n              onClick={() => this.props.onNavigate(\"NEXT\")}\n            >\n              <ChevronRight size={15} />\n            </Button.Ripple>\n          </div>\n          <div className=\"event-tags d-none d-sm-flex justify-content-end mt-1\">\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-success bullet-sm mr-50\"></span>\n              <span>Business</span>\n            </div>\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-warning bullet-sm mr-50\"></span>\n              <span>Work</span>\n            </div>\n            <div className=\"tag mr-1\">\n              <span className=\"bullet bullet-danger bullet-sm mr-50\"></span>\n              <span>Personal</span>\n            </div>\n            <div className=\"tag\">\n              <span className=\"bullet bullet-primary bullet-sm mr-50\"></span>\n              <span>Others</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass CalendarApp extends React.Component {\n  static getDerivedStateFromProps(props, state) {\n    if (\n      props.app.events.length !== state.events ||\n      props.app.sidebar !== state.sidebar ||\n      props.app.selectedEvent !== state.eventInfo\n    ) {\n      let dateToObj = props.app.events.map(event => {\n        event.start = new Date(event.start)\n        event.end = new Date(event.end)\n        return event\n      })\n      return {\n        events: dateToObj,\n        sidebar: props.app.sidebar,\n        eventInfo: props.app.selectedEvent\n      }\n    }\n    // Return null if the state hasn't changed\n    return null\n  }\n  constructor(props) {\n    super(props)\n    this.state = {\n      events: [],\n      views: {\n        month: true,\n        week: true,\n        day: true\n      },\n      eventInfo: null\n    }\n  }\n\n  async componentDidMount() {\n    await this.props.fetchEvents()\n  }\n\n  handleEventColors = event => {\n    return { className: eventColors[event.label] }\n  }\n\n  moveEvent = ({ event, start, end, isAllDay: droppedOnAllDaySlot }) => {\n    const { events } = this.state\n    const idx = events.indexOf(event)\n    let allDay = event.allDay\n    if (!event.allDay && droppedOnAllDaySlot) {\n      allDay = true\n    } else if (event.allDay && !droppedOnAllDaySlot) {\n      allDay = false\n    }\n    const updatedEvent = { ...event, start, end, allDay }\n    const nextEvents = [...events]\n    nextEvents.splice(idx, 1, updatedEvent)\n    this.setState({\n      events: nextEvents\n    })\n    this.props.updateDrag(updatedEvent)\n  }\n\n  resizeEvent = ({ event, start, end }) => {\n    const { events } = this.state\n    const nextEvents = events.map(existingEvent => {\n      return existingEvent.id === event.id\n        ? { ...existingEvent, start, end }\n        : existingEvent\n    })\n\n    this.setState({\n      events: nextEvents\n    })\n\n    this.props.updateResize({ ...event, start, end })\n  }\n\n  handleSelectEvent = event => {\n    let filteredState = this.state.events.filter(i => i.id === event.id)\n    this.props.handleSidebar(true)\n    this.props.handleSelectedEvent(filteredState[0])\n    this.setState({\n      eventInfo: filteredState[0]\n    })\n  }\n\n  render() {\n    const { events, views, sidebar } = this.state\n    return (\n      <div className=\"app-calendar position-relative\">\n        <div\n          className={`app-content-overlay ${sidebar ? \"show\" : \"hidden\"}`}\n          onClick={() => {\n            this.props.handleSidebar(false)\n            this.props.handleSelectedEvent(null)\n          }}\n        ></div>\n        <Card>\n          <CardBody>\n            <DragAndDropCalendar\n              localizer={localizer}\n              events={events}\n              onEventDrop={this.moveEvent}\n              onEventResize={this.resizeEvent}\n              startAccessor=\"start\"\n              endAccessor=\"end\"\n              resourceAccessor=\"url\"\n              views={views}\n              components={{ toolbar: Toolbar }}\n              eventPropGetter={this.handleEventColors}\n              popup={true}\n              onSelectEvent={event => {\n                this.handleSelectEvent(event)\n              }}\n              onSelectSlot={({ start, end }) => {\n                this.props.handleSidebar(true)\n                this.props.handleSelectedEvent({\n                  title: \"\",\n                  label: null,\n                  start: new Date(start),\n                  end: new Date(end),\n                  url: \"\"\n                })\n              }}\n              selectable={true}\n            />\n          </CardBody>\n        </Card>\n        <AddEventSidebar\n          sidebar={sidebar}\n          handleSidebar={this.props.handleSidebar}\n          addEvent={this.props.addEvent}\n          events={this.state.events}\n          eventInfo={this.state.eventInfo}\n          selectedEvent={this.props.handleSelectedEvent}\n          updateEvent={this.props.updateEvent}\n          resizable\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    app: state.calendar\n  }\n}\n\nexport default connect(mapStateToProps, {\n  fetchEvents,\n  handleSidebar,\n  addEvent,\n  handleSelectedEvent,\n  updateEvent,\n  updateDrag,\n  updateResize\n})(CalendarApp)\n"]},"metadata":{},"sourceType":"module"}