{"ast":null,"code":"import _toConsumableArray from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import ExtensionsHeader from\"../extensionsHeader\";import{Row,Col,Card,CardBody,Table,CardHeader,CardTitle,Input}from\"reactstrap\";import XLSX from\"xlsx\";import{DownloadCloud,Search}from\"react-feather\";import{useDropzone}from\"react-dropzone\";import{toast,ToastContainer}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import\"../../assets/scss/plugins/extensions/toastr.scss\";import\"../../assets/scss/plugins/extensions/dropzone.scss\";function Uploader(props){var _useDropzone=useDropzone({accept:\".xlsx, .xls, .csv\",onDrop:function onDrop(acceptedFiles){var reader=new FileReader();reader.onload=function(){var fileData=reader.result;var wb=XLSX.read(fileData,{type:\"binary\"});wb.SheetNames.forEach(function(sheetName){var rowObj=XLSX.utils.sheet_to_row_object_array(wb.Sheets[sheetName]);props.getTableData(rowObj,acceptedFiles[0].name);});};if(acceptedFiles.length){reader.readAsBinaryString(acceptedFiles[0]);}else{toast.error(\"You can only upload .xlsx, .xls, .csv Files!\");}}}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps;return/*#__PURE__*/React.createElement(\"section\",{className:\"pb-1\"},/*#__PURE__*/React.createElement(\"div\",getRootProps({className:\"dropzone py-3 flex-column\"}),/*#__PURE__*/React.createElement(\"input\",getInputProps()),/*#__PURE__*/React.createElement(DownloadCloud,{className:\"text-light\",size:50}),/*#__PURE__*/React.createElement(\"h4\",{className:\"mb-0 mt-2\"},\"Drop Excel File or Browse\")));}var Import=/*#__PURE__*/function(_React$Component){_inherits(Import,_React$Component);var _super=_createSuper(Import);function Import(){var _this;_classCallCheck(this,Import);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={tableData:[],filteredData:[],value:\"\",name:\"\"};_this.getTableData=function(arr,name){_this.setState({tableData:arr,name:name});};_this.handleFilter=function(e){var data=_this.state.tableData;var filteredData=[];var value=e.target.value;_this.setState({value:value});if(value.length){filteredData=data.filter(function(col){var keys=Object.keys(col);var startsWithCondition=keys.filter(function(key){return col[key].toString().toLowerCase().startsWith(value.toLowerCase());});var includesCondition=keys.filter(function(key){return col[key].toString().toLowerCase().includes(value.toLowerCase());});if(startsWithCondition.length)return col[startsWithCondition];else if(!startsWithCondition&&includesCondition.length)return col[includesCondition];else return null;});_this.setState({value:value,filteredData:filteredData});}else{return null;}};return _this;}_createClass(Import,[{key:\"render\",value:function render(){var _this2=this;var headArr=this.state.tableData.length?this.state.tableData.map(function(col,index){if(index===0)return _toConsumableArray(Object.keys(col));else return null;}):[];var dataArr=this.state.value.length?this.state.filteredData:this.state.tableData.length&&!this.state.value.length?this.state.tableData:null;var renderTableBody=dataArr!==null&&dataArr.length?dataArr.map(function(col,index){var keys=Object.keys(col);var renderTd=keys.map(function(key,index){return/*#__PURE__*/React.createElement(\"td\",{key:index},col[key]);});return/*#__PURE__*/React.createElement(\"tr\",{key:index},renderTd);}):null;var renderTableHead=headArr.length?headArr[0].map(function(head,index){return/*#__PURE__*/React.createElement(\"th\",{key:index},head);}):null;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ExtensionsHeader,{title:\"XLSX\",subTitle:\"Xlsx is a parser and writer for various spreadsheet formats\",link:\"https://github.com/AdeleD/react-paginate\"}),/*#__PURE__*/React.createElement(Row,{className:\"import-component\"},/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Uploader,{getTableData:this.getTableData})))))),this.state.tableData.length?/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,{className:\"justify-content-between flex-wrap\"},/*#__PURE__*/React.createElement(CardTitle,null,this.state.name),/*#__PURE__*/React.createElement(\"div\",{className:\"filter position-relative has-icon-left\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",value:this.state.value,onChange:function onChange(e){return _this2.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:15})))),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Table,{className:\"table-hover-animation\",responsive:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,renderTableHead)),/*#__PURE__*/React.createElement(\"tbody\",null,renderTableBody))))):null,/*#__PURE__*/React.createElement(ToastContainer,null)));}}]);return Import;}(React.Component);export default Import;","map":null,"metadata":{},"sourceType":"module"}