{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{api_query}from\"../../../api/ApiConstant\";import{Card,CardBody,CardHeader,CardTitle,Badge,Input,Button}from\"reactstrap\";import DataTable from\"react-data-table-component\";import{Star,Search,Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight,Inbox,Settings}from\"react-feather\";import axios from'axios';// import ModalDigimon from \"./ModalDigimon\"\nimport{history}from\"../../../../src/history\";import{CSVLink,CSVDownload}from\"react-csv\";import ReactExport from\"react-data-export\";var ExcelFile=ReactExport.ExcelFile;var ExcelSheet=ReactExport.ExcelFile.ExcelSheet;var ExcelColumn=ReactExport.ExcelFile.ExcelColumn;var CustomHeader=function CustomHeader(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"add-new\"},/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"bg-gradient-success\",onClick:function onClick(){return props.karyawanAdd();}},\"Tambah Karyawan\")),/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},/*#__PURE__*/React.createElement(Input,{value:props.value,onChange:function onChange(e){return props.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:\"15\"}))));};var ApprovalComponent=function ApprovalComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button.Ripple,{className:\"mr-1 bg-gradient-success\",color:\"none\",size:\"sm\",onClick:function onClick(){console.log('props : ',props);console.log('digimon : ',props.row.name);return props.isVisible(props.row.name,props.row.img);}},\" Approve\"));};var RejectComponent=function RejectComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button.Ripple,{className:\"mr-1 bg-gradient-danger\",color:\"none\",size:\"sm\",onClick:function onClick(){console.log('props : ',props);console.log('digimon : ',props.row.name);return props.isVisible(props.row.name,props.row.img);}},\" Reject\"));};var ActionsComponent=function ActionsComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-icon bg-gradient-success\",color:\"none\",onClick:function onClick(){// console.log('props : ', props);\nreturn props.isView(props.row,props.row.id,props.row.cff_id);}},/*#__PURE__*/React.createElement(Settings,{size:16})));};var KaryawanTable=/*#__PURE__*/function(_React$Component){_inherits(KaryawanTable,_React$Component);var _super=_createSuper(KaryawanTable);function KaryawanTable(){var _this;_classCallCheck(this,KaryawanTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modalVisible:false,modalImage:'',modalDigimonName:'',myProfile:null,columns:[{name:\"NIK\",selector:\"nik\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.nik,className:\"d-block text-bold-500 text-truncate mb-0\"},row.nik)));}},{name:\"Nama Lengkap\",selector:\"name\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.name)));}},{name:\"Departemen\",selector:\"nama_departemen\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.nama_departemen,className:\"d-block text-bold-500 text-truncate mb-0\"},row.nama_departemen)));}},{name:\"Status Aktif\",selector:\"active\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.active=='Y'?'Aktif':'Tidak Aktif',className:\"d-block text-bold-500 text-truncate mb-0\"},row.active=='Y'?'Aktif':'Tidak Aktif')));}},{name:\"Actions\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ActionsComponent,{row:row,isView:_this.viewSS}));}}],data:[],csvData:[{firstname:\"Ahmed\",lastname:\"Tomi\",email:\"ah@smthing.co.com\"},{firstname:\"Raed\",lastname:\"Labes\",email:\"rl@smthing.co.com\"},{firstname:\"Yezzi\",lastname:\"Min l3b\",email:\"ymin@cocococo.com\"}],filteredData:[],value:\"\"};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.isLogin('super_admin');case 2:_context.next=4;return _this.tarikDataTable();case 4:case\"end\":return _context.stop();}}},_callee);}));_this.karyawanAdd=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('karyawan add');_context2.next=3;return _this.props.changeViewPage('add');case 3:case\"end\":return _context2.stop();}}},_callee2);}));_this.isLogin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(role){var myProfile;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}else if(JSON.parse(localStorage.getItem('account')).role!==role){history.push(\"/pages/login\");}else{myProfile=JSON.parse(localStorage.getItem('account'));console.log('myProfile',myProfile);_this.setState({myProfile:myProfile});}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.tarikDataTable=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var sql,result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sql=\"\\n        select dmu.id, dmu.nik, dmu.name, convert_from(df_decrypt(dmu.password), 'UTF8') as \\\"password\\\",\\n        dmu.role, dmu.job_level, dmu.departement_id, dmu.active, dmd.nama_departemen from df_master_user dmu\\n        join df_master_departement dmd\\n        on dmu.departement_id = dmd.id\\n        where dmu.departement_id != 0\\n    \";_context5.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(result){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\nconsole.log('result query : ',res);console.log('query leng :',res.length);if(!(res.length=='')){_context4.next=7;break;}return _context4.abrupt(\"return\",[]);case 7:_context4.next=9;return _this.setState({data:res});case 9:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref5.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context5.sent;case 4:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleFilter=function(e){var value=e.target.value;var data=_this.state.data;var filteredData=_this.state.filteredData;_this.setState({value:value});if(value.length){filteredData=data.filter(function(item){// console.log('ITEM : ', item)\nvar startsWithCondition=item.nik.toLowerCase().startsWith(value.toLowerCase())||item.name.toLowerCase().startsWith(value.toLowerCase())||item.nama_departemen.toLowerCase().startsWith(value.toLowerCase());// item.name.toLowerCase().startsWith(value.toLowerCase())\n// item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.status.toLowerCase().startsWith(value.toLowerCase())\nvar includesCondition=item.nik.toLowerCase().includes(value.toLowerCase())||item.name.toLowerCase().includes(value.toLowerCase())||item.nama_departemen.toLowerCase().includes(value.toLowerCase());// item.name.toLowerCase().includes(value.toLowerCase())\n// item.date.toLowerCase().includes(value.toLowerCase()) ||\n// item.email.toLowerCase().includes(value.toLowerCase()) ||\n// item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n// item.status.toLowerCase().includes(value.toLowerCase())\nif(startsWithCondition){return startsWithCondition;}else if(!startsWithCondition&&includesCondition){return includesCondition;}else return null;});_this.setState({filteredData:filteredData});}};_this.viewSS=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data,id,cff_id){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log('view SS : ',id);console.log('data row : ',data);_this.props.changeViewPage('edit',data,id);case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x3,_x4,_x5){return _ref6.apply(this,arguments);};}();return _this;}_createClass(KaryawanTable,[{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,columns=_this$state.columns,value=_this$state.value,filteredData=_this$state.filteredData;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Karyawan\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:value.length?filteredData:data,columns:columns,noHeader:true,pagination:true,subHeader:true,subHeaderComponent:/*#__PURE__*/React.createElement(CustomHeader,{value:value,handleFilter:this.handleFilter,karyawanAdd:this.karyawanAdd})// <CustomHeader value={value} handleFilter={this.handleFilter} tarikData={this.tarikDataTable}/>\n}))));}}]);return KaryawanTable;}(React.Component);export default KaryawanTable;","map":null,"metadata":{},"sourceType":"module"}