{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{api_query}from\"../../../../api/ApiConstant\";import{Card,CardBody,CardHeader,CardTitle,Badge,Input,Button,Col,Label,Modal,ModalHeader,ModalBody,ModalFooter,Alert,FormGroup}from\"reactstrap\";import Flatpickr from\"react-flatpickr\";import DataTable from\"react-data-table-component\";import{Star,Search,Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight,Settings}from\"react-feather\";import axios from'axios';// import ModalDigimon from \"./ModalDigimon\"\n// import { history } from \"../../../src/history\"\nimport{history}from\"../../../../../src/history\";import Spinner from\"../../../../components/@vuexy/spinner/Fallback-spinner\";import ReactExport from\"react-data-export\";import Breadcrumbs from\"../../../../components/@vuexy/breadCrumbs/BreadCrumb\";import Select from\"react-select\";// import { MyPdf } from \"../component/ExportPdf\"\nvar ExcelFile=ReactExport.ExcelFile;var ExcelSheet=ReactExport.ExcelFile.ExcelSheet;var ExcelColumn=ReactExport.ExcelFile.ExcelColumn;var CustomHeader=function CustomHeader(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},/*#__PURE__*/React.createElement(Input,{value:props.value,onChange:function onChange(e){return props.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:\"15\"}))));};var OfficerRekapSs=/*#__PURE__*/function(_React$Component){_inherits(OfficerRekapSs,_React$Component);var _super=_createSuper(OfficerRekapSs);function OfficerRekapSs(){var _this;_classCallCheck(this,OfficerRekapSs);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modalDone:false,dataDone:[],columnsDone:[{name:\"Tema\",selector:\"tema_singkat\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tema_singkat,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tema_singkat)));}},{name:\"Status\",selector:\"status_deskripsi\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.status_deskripsi,className:\"d-block text-bold-500 text-truncate mb-0\"},row.status_deskripsi)));}},{name:\"Tanggal dibuat\",selector:\"tgl_buat\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tgl_buat,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tgl_buat)));}},{name:\"Tanggal tutup\",selector:\"tgl_tutup\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tgl_tutup,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tgl_tutup)));}}],modalPending:false,dataPending:[],columnsPending:[{name:\"Tema\",selector:\"tema_singkat\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tema_singkat,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tema_singkat)));}},{name:\"Status\",selector:\"status_deskripsi\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.status_deskripsi,className:\"d-block text-bold-500 text-truncate mb-0\"},row.status_deskripsi)));}},{name:\"Tanggal dibuat\",selector:\"tgl_buat\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tgl_buat,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tgl_buat)));}},{name:\"Tanggal tutup\",selector:\"tgl_tutup\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tgl_tutup,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tgl_tutup)));}}],isLoading:false,modalVisible:false,modalImage:'',modalDigimonName:'',myProfile:null,basicPicker:new Date(),columns:[{name:\"NIK\",selector:\"nik\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.nik,className:\"d-block text-bold-500 text-truncate mb-0\"},row.nik)));}},{name:\"Nama\",selector:\"name\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.name)));}},{name:\"Done\",selector:\"done\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this.viewDone(row);}},/*#__PURE__*/React.createElement(\"span\",{title:row.done,className:\"d-block text-bold-500 text-truncate mb-0\"},row.done))));}},{name:\"Pending\",selector:\"pending\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this.viewPending(row);}},/*#__PURE__*/React.createElement(\"span\",{title:row.pending,className:\"d-block text-bold-500 text-truncate mb-0\"},row.pending))));}}],data:[],filteredData:[],value:\"\",cYear:new Date(),lYear:new Date(),dataDepartemen:[],deptSelected:null,deptLabel:''};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var date,cYear,lYear,lDate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.setState({isLoading:true});case 2:_context.next=4;return _this.isLogin('officer_df');case 4:date=new Date();cYear=date.getFullYear();lYear=date.getFullYear()-1;lDate=date.getDay();_context.next=10;return _this.setState({cYear:cYear,lYear:lYear});case 10:_context.next=12;return _this.tarikDepartemen();case 12:_context.next=14;return _this.setState({isLoading:false});case 14:case\"end\":return _context.stop();}}},_callee);}));_this.reRunTable=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.tarikDataTable();case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.gantiDept=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(val){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({deptSelected:val.value});case 2:_context3.next=4;return _this.setState({deptLabel:val.label});case 4:_context3.next=6;return _this.reRunTable();case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.tarikDepartemen=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var sql,result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sql=\"\\n    select id as value,\\n      nama_departemen as label\\n      from df_master_departement dmd\\n      order by id asc \\n    \";_context5.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(result){var res,rest,tmp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:res=result.data.response.rows;console.log('result query departemen : ',res);if(!(res.length=='')){_context4.next=4;break;}return _context4.abrupt(\"return\",[]);case 4:rest=res;tmp={};tmp.value=0;tmp.label='All Departement';rest.push(tmp);_context4.next=11;return _this.setState({dataDepartemen:rest});case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref5.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context5.sent;case 4:case\"end\":return _context5.stop();}}},_callee5);}));_this.toggleModalDone=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id){var sql,result;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.setState(function(prevState){return{isLoading:true};});case 2:sql=\"\\n        select dss.id, dss.tema, dstatus.status_deskripsi, \\n        COALESCE(to_char(dss.tanggal_dibuat, 'DD Mon YYYY'), '') AS tgl_buat,\\n\\t\\tCOALESCE(to_char(dss.closed_date, 'DD Mon YYYY'), '') AS tgl_tutup \\n        from df_suggestion_system dss\\n        join df_ss_status dstatus\\n        on dstatus.id_status = dss.ss_status_id \\n        where dss.closed_date >= '\"+_this.state.cYear+\"-01-01' \\n        and dss.closed_date < '\"+_this.state.cYear+\"-12-31'\\n        and (dss.ss_status_id = 6)  \\n        and (dss.pengusul_id = \"+id+\" or dss.pengusul_id_2 = \"+id+\")\\n        order by id\\n    \";_context7.next=5;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(result){var res,_temp,index,element,temaSingkat,tema;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:res=result.data.response.rows;console.log('result : ',res);if(!(res.length=='')){_context6.next=6;break;}return _context6.abrupt(\"return\",[]);case 6:_temp=[];for(index=0;index<res.length;index++){element=res[index].tema;temaSingkat=element.split(' ').slice(0,2).join(' ');temaSingkat=temaSingkat+' ... ';tema=res[index];tema.tema_singkat=temaSingkat;// console.log('dummy : ', dummy)\n// // const elementTgl = res[index].tanggal_dibuat;\n// // var tgl = elementTgl.split('T')\n// console.log('tgl query : ', res[index].tgl)\n// console.log('tema singkat : ', temaSingkat)\n// // console.log('tanggal : ', tgl[0])\n// console.log('element:', element)\n_temp.push(tema);}_context6.next=10;return _this.setState({dataDone:_temp});case 10:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x4){return _ref7.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 5:result=_context7.sent;_context7.next=8;return _this.setState(function(prevState){return{isLoading:true,modalDone:!prevState.modalDone};});case 8:_context7.next=10;return _this.setState({isLoading:false});case 10:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x3){return _ref6.apply(this,arguments);};}();_this.toggleModalFixDone=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this.setState(function(prevState){return{modalDone:!prevState.modalDone,dataDone:[]};});case 1:case\"end\":return _context8.stop();}}},_callee8);}));_this.viewDone=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(data){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:console.log('viewDone : ',data);console.log('viewDone : ',data.id);_context9.next=4;return _this.toggleModalDone(data.id);case 4:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x5){return _ref9.apply(this,arguments);};}();_this.toggleModalPending=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(id){var sql,result;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this.setState(function(prevState){return{isLoading:true};});case 2:sql=\"\\n        select dss.id, dss.tema, dstatus.status_deskripsi, \\n            COALESCE(to_char(dss.tanggal_dibuat, 'DD Mon YYYY'), '') AS tgl_buat,\\n            COALESCE(to_char(dss.closed_date, 'DD Mon YYYY'), '') AS tgl_tutup \\t\\t\\t\\n            from df_suggestion_system dss \\n            join df_ss_status dstatus\\n            on dstatus.id_status = dss.ss_status_id \\n        where dss.tanggal_dibuat >= '\"+_this.state.cYear+\"-01-01' \\n        and dss.tanggal_dibuat < '\"+_this.state.cYear+\"-12-31' \\n        and (dss.ss_status_id < 6 or dss.ss_status_id = 7 or dss.ss_status_id = 10) \\n        and (pengusul_id = \"+id+\" or pengusul_id_2 = \"+id+\")\\n        order by id\\n    \";_context11.next=5;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(result){var res,_temp,index,element,temaSingkat,tema;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:res=result.data.response.rows;console.log('result : ',res);if(!(res.length=='')){_context10.next=6;break;}return _context10.abrupt(\"return\",[]);case 6:_temp=[];for(index=0;index<res.length;index++){element=res[index].tema;temaSingkat=element.split(' ').slice(0,2).join(' ');temaSingkat=temaSingkat+' ... ';tema=res[index];tema.tema_singkat=temaSingkat;// console.log('dummy : ', dummy)\n// // const elementTgl = res[index].tanggal_dibuat;\n// // var tgl = elementTgl.split('T')\n// console.log('tgl query : ', res[index].tgl)\n// console.log('tema singkat : ', temaSingkat)\n// // console.log('tanggal : ', tgl[0])\n// console.log('element:', element)\n_temp.push(tema);}_context10.next=10;return _this.setState({dataPending:_temp});case 10:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x7){return _ref11.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 5:result=_context11.sent;_context11.next=8;return _this.setState(function(prevState){return{isLoading:true,modalPending:!prevState.modalPending};});case 8:_context11.next=10;return _this.setState({isLoading:false});case 10:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x6){return _ref10.apply(this,arguments);};}();_this.toggleModalFixPending=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_this.setState(function(prevState){return{modalPending:!prevState.modalPending,dataPending:[]};});case 1:case\"end\":return _context12.stop();}}},_callee12);}));_this.viewPending=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(data){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:console.log('viewPending : ',data);console.log('viewPending : ',data.id);_context13.next=4;return _this.toggleModalPending(data.id);case 4:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x8){return _ref13.apply(this,arguments);};}();_this.isLogin=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(role){var myProfile;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}else if(JSON.parse(localStorage.getItem('account')).role!==role){history.push(\"/pages/login\");}else{myProfile=JSON.parse(localStorage.getItem('account'));console.log('myProfile',myProfile);_this.setState({myProfile:myProfile});}case 1:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x9){return _ref14.apply(this,arguments);};}();_this.tarikDataTable=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var dept,sql,result;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:// console.log('dept mana ?', this.state.deptSelected)\n// console.log('dept mana ?', this.state.deptLabel)\ndept=_this.state.deptSelected==0?'notnull':'='+_this.state.deptSelected;sql=\"\\n        select distinct dmu.id, nik, name, departement_id, job_level, \\n       \\t\\t(select coalesce(count(dss.id),0) from df_suggestion_system dss \\n       \\t\\t\\twhere dss.closed_date >= '\"+_this.state.cYear+\"-01-01' \\n                and dss.closed_date < '\"+_this.state.cYear+\"-12-31'\\n                and (dss.ss_status_id = 6)  \\n       \\t\\t\\tand (dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id)) as done, \\n\\t\\t\\t(select coalesce(count(dss.id),0) from df_suggestion_system dss \\n\\t\\t\\t\\twhere dss.tanggal_dibuat >= '\"+_this.state.cYear+\"-01-01' \\n\\t\\t\\t\\tand dss.tanggal_dibuat < '\"+_this.state.cYear+\"-12-31' \\n\\t\\t\\t\\tand (dss.ss_status_id < 6 or dss.ss_status_id = 7 or dss.ss_status_id = 10) \\n\\t\\t\\t\\tand (dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id) ) as pending       \\t\\t\\n\\t\\t\\tfrom df_master_user dmu \\n       \\t\\tleft join df_suggestion_system dss\\n       \\t\\ton dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id\\n               where\\n               dmu.departement_id \"+dept+\" and \\n               job_level < '4'\\n            group by dmu.id\\n            order by dmu.id\\n    \";// dmu.departement_id = `+this.state.myProfile.departement_id+` and \n// console.log('tarik data', sql)\n_context16.next=4;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(result){var res;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\nconsole.log('result query : ',res);console.log('query leng :',res.length);if(!(res.length=='')){_context15.next=8;break;}_context15.next=6;return _this.setState({data:[]});case 6:_context15.next=10;break;case 8:_context15.next=10;return _this.setState({data:res});case 10:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x10){return _ref16.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 4:result=_context16.sent;case 5:case\"end\":return _context16.stop();}}},_callee16);}));_this.handleFilter=function(e){var value=e.target.value;var data=_this.state.data;var filteredData=_this.state.filteredData;_this.setState({value:value});if(value.length){filteredData=data.filter(function(item){// console.log('ITEM : ', item)\nvar startsWithCondition=item.nik.toLowerCase().startsWith(value.toLowerCase())||item.name.toLowerCase().startsWith(value.toLowerCase())||item.done.toLowerCase().startsWith(value.toLowerCase())||item.pending.toLowerCase().startsWith(value.toLowerCase());// item.name.toLowerCase().startsWith(value.toLowerCase())\n// item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.status.toLowerCase().startsWith(value.toLowerCase())\nvar includesCondition=item.nik.toLowerCase().includes(value.toLowerCase())||item.name.toLowerCase().includes(value.toLowerCase())||item.done.toLowerCase().includes(value.toLowerCase())||item.pending.toLowerCase().includes(value.toLowerCase());// item.name.toLowerCase().includes(value.toLowerCase())\n// item.date.toLowerCase().includes(value.toLowerCase()) ||\n// item.email.toLowerCase().includes(value.toLowerCase()) ||\n// item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n// item.status.toLowerCase().includes(value.toLowerCase())\nif(startsWithCondition){return startsWithCondition;}else if(!startsWithCondition&&includesCondition){return includesCondition;}else return null;});_this.setState({filteredData:filteredData});}};_this.viewSS=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(data,id){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:console.log('view SS : ',id);// console.log('data row : ', data)\n_this.props.changeViewPage('edit',data,id);case 2:case\"end\":return _context17.stop();}}},_callee17);}));return function(_x11,_x12){return _ref17.apply(this,arguments);};}();_this.downloadPDF=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:case\"end\":return _context18.stop();}}},_callee18);}));return _this;}_createClass(OfficerRekapSs,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,data=_this$state.data,columns=_this$state.columns,value=_this$state.value,filteredData=_this$state.filteredData;return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.isLoading?/*#__PURE__*/React.createElement(Spinner,null):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"Rekap SS\",breadCrumbParent:\"SS\",breadCrumbActive:\"Rekap SS\"}),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Pilih Departemen\"),/*#__PURE__*/React.createElement(Select,{className:\"React\",classNamePrefix:\"select\"// defaultValue={colourOptions[1]}\n,name:\"clear\",options:this.state.dataDepartemen// isClearable={true}\n// onChange={(val)=>this.setState({deptSelected: val.value})}\n,onChange:function onChange(val){return _this2.gantiDept(val);}})),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Rekap SS YTD\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:value.length?filteredData:data,columns:columns,noHeader:true,pagination:true,subHeader:true,subHeaderComponent:/*#__PURE__*/React.createElement(CustomHeader,{value:value,handleFilter:this.handleFilter,tarikData:this.tarikData,dataCsv:this.state.data})// <CustomHeader value={value} handleFilter={this.handleFilter} tarikData={this.tarikDataTable}/>\n}))),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.modalDone,toggle:this.toggleModalDone,className:\"modal-dialog-centered\",backdrop:\"static\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.toggleModalFixDone,className:\"bg-success\"},\"Rekap SS Done\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"modal-dialog-centered\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:this.state.dataDone,columns:this.state.columnsDone,noHeader:true})),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",onClick:this.toggleModalFixDone},\"close\"),\" \")),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.modalPending,toggle:this.toggleModalPending,className:\"modal-dialog-centered\",backdrop:\"static\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.toggleModalFixPending,className:\"bg-success\"},\"Rekap SS Pending\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"modal-dialog-centered\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:this.state.dataPending,columns:this.state.columnsPending,noHeader:true})),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",onClick:this.toggleModalFixPending},\"close\"),\" \"))));}}]);return OfficerRekapSs;}(React.Component);export default OfficerRekapSs;","map":null,"metadata":{},"sourceType":"module"}