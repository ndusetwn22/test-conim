{"ast":null,"code":"import _defineProperty from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Link}from\"react-router-dom\";import{CardBody,FormGroup,Form,Input,Button,Label}from\"reactstrap\";import Checkbox from\"../../../../components/@vuexy/checkbox/CheckboxesVuexy\";import{Mail,Lock,Check,Info,User}from\"react-feather\";// import { loginWithJWT, loginWithCustom } from \"../../../../redux/actions/auth/loginActions\"\nimport{loginWithCustom}from\"../../../../redux/actions/auth/loginActions\";import{connect}from\"react-redux\";import{history}from\"../../../../history\";import SweetAlert from'react-bootstrap-sweetalert';import{useParams}from'react-router-dom';var LoginCustom=/*#__PURE__*/function(_React$Component){_inherits(LoginCustom,_React$Component);var _super=_createSuper(LoginCustom);function LoginCustom(){var _this;_classCallCheck(this,LoginCustom);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={// email: \"admin@gmail.com\",\n// password: \"admin\",\nnik:\"\",password:\"\",alertWrongPassword:false,alertUserNotFound:false,alertUserNotActive:false,remember:(localStorage.getItem('rememberMe')!=undefined||localStorage.getItem('rememberMe')!=null)&&localStorage.getItem('rememberMe')=='true'?true:false// remember: false\n};_this.handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this.props.loginWithCustom(_this.state);if(_this.state.remember){// console.log('trueee')\nlocalStorage.setItem('rememberMe',_this.state.remember);localStorage.setItem('nik',_this.state.remember?_this.state.nik:'');localStorage.setItem('pw',_this.state.remember?_this.state.password:'');}if(!_this.state.remember){localStorage.setItem('rememberMe',_this.state.remember);localStorage.removeItem('nik');localStorage.removeItem('pw');}// const queryParams = await new URLSearchParams(window.location.search);\n// const name = await queryParams.get('status');\n// console.log(name); // 55 test null\n// console.log('res',this.props.match.params   )\n// this.props.loginWithJWT(this.state)\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.componentDidMount=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var queryParams,name;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log('e :', e)\n// console.log('login props: ', this.props)\nconsole.log('didmount : ',e);_context2.next=3;return new URLSearchParams(window.location.search);case 3:queryParams=_context2.sent;_context2.next=6;return queryParams.get('status');case 6:name=_context2.sent;console.log(name);// 55 test null\nif(name==='wrong_password'){_this.setState({alertWrongPassword:true});}if(name==='user_not_found'){_this.setState({alertUserNotFound:true});}if(name==='user_not_active'){_this.setState({alertUserNotActive:true});}console.log('get remember me 0',typeof localStorage.getItem('rememberMe'));if(!(localStorage.getItem('rememberMe')!=undefined||localStorage.getItem('rememberMe')!=null)){_context2.next=18;break;}console.log('get remember me 1');if(!(localStorage.getItem('rememberMe')=='true')){_context2.next=18;break;}console.log('get remember me 2');_context2.next=18;return _this.setState({nik:localStorage.getItem('nik'),password:localStorage.getItem('pw')});case 18:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleAlertWrongPassword=function(state,value){_this.setState(_defineProperty({},state,value));};_this.handleAlertUserNotFound=function(state,value){_this.setState(_defineProperty({},state,value));};_this.handleAlertUserNotActive=function(state,value){_this.setState(_defineProperty({},state,value));};_this.handleRemember=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var input,value;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:input=e.target;if(!(input.type==='checkbox')){_context3.next=7;break;}_context3.next=4;return _this.setState({remember:input.checked});case 4:_context3.t0=_context3.sent;_context3.next=8;break;case 7:_context3.t0=input.value;case 8:value=_context3.t0;console.log('input',input);console.log('input',input.checked);case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();return _this;}_createClass(LoginCustom,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CardBody,{className:\"pt-1\"},/*#__PURE__*/React.createElement(Form,{action:\"/home\",onSubmit:this.handleLogin},/*#__PURE__*/React.createElement(FormGroup,{className:\"form-label-group position-relative has-icon-left\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"NIK\",value:this.state.nik,onChange:function onChange(e){return _this2.setState({nik:e.target.value});},required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(User,{size:15})),/*#__PURE__*/React.createElement(Label,null,\"NIK\")),/*#__PURE__*/React.createElement(FormGroup,{className:\"form-label-group position-relative has-icon-left\"},/*#__PURE__*/React.createElement(Input,{type:\"password\",placeholder:\"Password\",value:this.state.password,onChange:function onChange(e){return _this2.setState({password:e.target.value});},required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Lock,{size:15})),/*#__PURE__*/React.createElement(Label,null,\"Password\")),/*#__PURE__*/React.createElement(FormGroup,{className:\"d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(Checkbox,{color:\"primary\",icon:/*#__PURE__*/React.createElement(Check,{className:\"vx-icon\",size:16}),label:\"Remember me\",defaultChecked:this.state.remember,onChange:function onChange(e){return _this2.handleRemember(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"float-right\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Button.Ripple,{color:\"primary\",type:\"submit\"},\"Login\"))),/*#__PURE__*/React.createElement(SweetAlert,{error:true,title:\"Error\",show:this.state.alertWrongPassword,onConfirm:function onConfirm(){return _this2.handleAlertWrongPassword(\"alertWrongPassword\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-alert-text\"},\"Ooops, password anda salah!\")),/*#__PURE__*/React.createElement(SweetAlert,{error:true,title:\"Error\",show:this.state.alertUserNotFound,onConfirm:function onConfirm(){return _this2.handleAlertUserNotFound(\"alertUserNotFound\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-alert-text\"},\"Ooops, user tidak ditemukan!\")),/*#__PURE__*/React.createElement(SweetAlert,{error:true,title:\"Error\",show:this.state.alertUserNotActive,onConfirm:function onConfirm(){return _this2.handleAlertUserNotActive(\"alertUserNotActive\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-alert-text\"},\"Ooops, user tidak aktif!\"))));}}]);return LoginCustom;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{values:state.auth.login};};export default connect(mapStateToProps,{// loginWithJWT,\nloginWithCustom:loginWithCustom})(LoginCustom);","map":null,"metadata":{},"sourceType":"module"}