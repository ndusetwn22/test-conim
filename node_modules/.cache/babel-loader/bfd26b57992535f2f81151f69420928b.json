{"ast":null,"code":"import _objectSpread from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Card,CardHeader,CardTitle,CardBody,FormGroup,Row,Col,Input,Form,Button,Label,Spinner,CustomInput,Alert}from\"reactstrap\";import SweetAlert from'react-bootstrap-sweetalert';import Checkbox from\"../../components/@vuexy/checkbox/CheckboxesVuexy\";import{Check,User,Mail,Smartphone,Lock,Info}from\"react-feather\";import Radio from\"../../components/@vuexy/radio/RadioVuexy\";import Select from\"react-select\";import axios from'axios';import{api_query}from\"../../api/ApiConstant\";import firebase from\"../../firebase/firebase\";var sweetAlert=function sweetAlert(props){return/*#__PURE__*/React.createElement(SweetAlert,{warning:true,title:props.title,show:props.warningAlert,onConfirm:function onConfirm(){return props.handleAlert(\"isSweetAlert\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:props.className},props.text));};var EmployeesEdit=/*#__PURE__*/function(_React$Component){_inherits(EmployeesEdit,_React$Component);var _super=_createSuper(EmployeesEdit);function EmployeesEdit(props){var _this;_classCallCheck(this,EmployeesEdit);_this=_super.call(this,props);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('edit page props : ',_this.props);console.log('wkwkwk : ',_this.props.editData.image_profile);// await this.tarikDataDept();\n// await this.tarikDataPosition();\n// setTimeout(() => {}, 3000);\ncase 2:case\"end\":return _context.stop();}}},_callee);}));_this.tarikDataDept=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var sql,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('tarik data');// let sql = `\n//     select * from employees_new limit 10000;\n// `\nsql=\"\\n    select * from departments_new\\n    \";_context2.next=4;return axios.post(api_query,{query:sql}).then(function(result){var res=result.data.response;// console.log('result : ', result)\nif(res.length==''){return[];}var tmp=[];for(var index=0;index<res.length;index++){var element=res[index];// console.log('dataaaaa : ', element)\nvar data={};data.id=element.id;data.value=element.id;data.label=element.dept_name;tmp.push(data);// console.log('tiap push : ', tmp)\n}// console.log('hasil push : ', tmp)\n// return res;\nreturn tmp;}).catch(function(err){console.log('error : ',err);return[];});case 4:result=_context2.sent;_context2.next=7;return _this.setState({dept_name:result});case 7:case\"end\":return _context2.stop();}}},_callee2);}));_this.tarikDataPosition=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var sql,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// console.log('tarik data')\n// let sql = `\n//     select * from employees_new limit 10000;\n// `\nsql=\"\\n      select * from position_management\\n      \";_context3.next=3;return axios.post(api_query,{query:sql}).then(function(result){var res=result.data.response;// console.log('result : ', result)\nif(res.length==''){return[];}var tmp=[];for(var index=0;index<res.length;index++){var element=res[index];// console.log('dataaaaa : ', element)\nvar data={};data.id=element.id;data.value=element.id;data.label=element.position;tmp.push(data);// console.log('tiap push : ', tmp)\n}// console.log('hasil push : ', tmp)\n// return res;\nreturn tmp;}).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context3.sent;_context3.next=6;return _this.setState({position:result});case 6:case\"end\":return _context3.stop();}}},_callee3);}));_this.submitForm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var title,text,type,sql,result,bucketName,file,storageRef,uploadTask,myurl,_sql;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:title='';text='';type='';console.log('SUBMIT : ',_this.state.first_name);console.log('SUBMIT : ',_this.state.last_name);// console.log('event : ', e)\nif(!(_this.state.first_name==''||_this.state.first_name==null)){_context7.next=9;break;}_context7.next=8;return _this.handleAlert('isSweetAlert',true,'Warning','Nama Awalan Tidak Boleh Kosong','warning');case 8:return _context7.abrupt(\"return\",_context7.sent);case 9:if(!(_this.state.last_name==''||_this.state.last_name==null)){_context7.next=13;break;}_context7.next=12;return _this.handleAlert('isSweetAlert',true,'Warning','Nama Akhiran Tidak Boleh Kosong','warning');case 12:return _context7.abrupt(\"return\",_context7.sent);case 13:if(!(_this.state.emp_no==''||_this.state.emp_no==null)){_context7.next=17;break;}_context7.next=16;return _this.handleAlert('isSweetAlert',true,'Warning','No Karyawan Tidak Boleh Kosong','warning');case 16:return _context7.abrupt(\"return\",_context7.sent);case 17:if(!(_this.state.gender==''||_this.state.gender==null)){_context7.next=21;break;}_context7.next=20;return _this.handleAlert('isSweetAlert',true,'Warning','Gender Tidak Boleh Kosong','warning');case 20:return _context7.abrupt(\"return\",_context7.sent);case 21:if(!(_this.state.dept_name_selected==''||_this.state.dept_name_selected==null)){_context7.next=25;break;}_context7.next=24;return _this.handleAlert('isSweetAlert',true,'Warning','Departement Tidak Boleh Kosong','warning');case 24:return _context7.abrupt(\"return\",_context7.sent);case 25:if(!(_this.state.position_selected==''||_this.state.position_selected==null)){_context7.next=31;break;}_context7.next=28;return _this.handleAlert('isSweetAlert',true,'Warning','Position Tidak Boleh Kosong','warning');case 28:return _context7.abrupt(\"return\",_context7.sent);case 31:_this.setState({isLoading:true});sql=\"\\n            update employees_new set\\n                first_name = '\"+_this.state.first_name+\"',\\n                last_name = '\"+_this.state.last_name+\"',\\n                emp_no = \"+_this.state.emp_no+\",\\n                gender = '\"+_this.state.gender+\"'\\n            where \\n                id = \"+_this.props.editData.id+\"\\n        \";_context7.next=35;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(result){var sql2,result2;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:// let res = result.data.response\n// console.log('result : ', result)\n// if (res.length == '') {\n//     return []\n// }\n// // console.log('result : ', (result.data))\n// return res;\nsql2=\"\\n                                        update dept_emp_new set\\n                                            dept_id = \"+_this.state.dept_name_selected+\",\\n                                            position_id = \"+_this.state.position_selected+\"\\n                                        where \\n                                            emp_id = \"+_this.props.editData.id+\"\\n                                        \";_context5.next=3;return axios.post(api_query,{query:sql2}).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(result){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:res=result.data.response;console.log('result : ',result);if(!(res.length=='')){_context4.next=4;break;}return _context4.abrupt(\"return\",[]);case 4:return _context4.abrupt(\"return\",res);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref6.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result2=_context5.sent;case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x){return _ref5.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 35:result=_context7.sent;if(!(_this.state.profileImage!=null)){_context7.next=53;break;}bucketName='images';file=_this.state.profileImage[0];_context7.next=41;return firebase.storage().ref(\"\".concat(bucketName,\"/\").concat(file.name));case 41:storageRef=_context7.sent;_context7.next=44;return storageRef.put(file);case 44:uploadTask=_context7.sent;_context7.next=47;return storageRef.getDownloadURL().catch(function(error){throw error;});case 47:myurl=_context7.sent;console.log('myurl : ',myurl);_sql=\"\\n              update employees_new set\\n                  image_profile = '\"+myurl+\"'\\n              where \\n                  id = \"+_this.props.editData.id+\"\\n          \";_context7.next=52;return axios.post(api_query,{query:_sql}).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(result){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x3){return _ref7.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 52:result=_context7.sent;case 53:_this.setState({isLoading:false});console.log('result query : ',result);_this.props.changeViewPage('page');// return await this.handleAlert('isSweetAlert', true, 'Success', 'Data Berhasil Ditambahkan '+this.state.first_name+ \" \"+ this.state.last_name, 'success')\n// console.log('state dept: ', this.state.dept_name_selected)\n// console.log('state posit: ', this.state.position_selected)\n// var x = this.state.dept_name.filter(x => x.label === this.state.dept_name_selected)\n// console.log('x : ', x)\ncase 56:case\"end\":return _context7.stop();}}},_callee7);}));_this.handleAlert=function(state,value,title,text,type){if(value){_this.setState(_defineProperty({},state,value));_this.setState({sweetAlertTitle:title,sweetAlertText:text,sweetAlertType:type});}else{_this.setState(_defineProperty({},state,value));}};_this.state={first_name:_this.props.editData.first_name,last_name:_this.props.editData.last_name,emp_no:_this.props.editData.emp_no,gender:_this.props.editData.gender,dept_name_selected:_this.props.editData.id_dept_name,// dept_name: [\n//   { value: \"1\", label: \"Information Technology\" }\n// ],\ndept_name:_this.props.editData.all_dept_name,position_selected:_this.props.editData.id_position,// position: [\n//   { value: \"1\", label: \"Staff\" }\n// ],\nposition:_this.props.editData.all_position,profileImage:_this.props.editData.image_profile==\"\"||_this.props.editData.image_profile==null?_this.props.editData.image_profile:null,isLoading:false,isSweetAlert:false,sweetAlertTitle:'Judul',sweetAlertText:'Text',sweetAlertType:'warning'};return _this;}_createClass(EmployeesEdit,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/ (// <React.Fragment>\n//     <Breadcrumbs\n//     breadCrumbTitle=\"Form Layouts\"\n//     breadCrumbParent=\"Form\"\n//     breadCrumbActive=\"Form Layouts\"\n//     />\n//     <Row>\n//         <Col lg=\"6\" md=\"12\">\n//             <Card>\n//                 <CardHeader>\n//                 <CardTitle>Vertical Form Icons</CardTitle>\n//                 </CardHeader>\n//                 <CardBody>\n//                 <Form>\n//                     <Row>\n//                     <Col sm=\"12\">\n//                         <Label for=\"nameVerticalIcons\">First Name</Label>\n//                         <FormGroup className=\"has-icon-left position-relative\">\n//                         <Input\n//                             type=\"text\"\n//                             name=\"name\"\n//                             id=\"nameVerticalIcons\"\n//                             placeholder=\"First Name\"\n//                         />\n//                         <div className=\"form-control-position\">\n//                             <User size={15} />\n//                         </div>\n//                         </FormGroup>\n//                     </Col>\n//                     <Col sm=\"12\">\n//                         <Label for=\"EmailVerticalIcons\">Email</Label>\n//                         <FormGroup className=\"has-icon-left position-relative\">\n//                         <Input\n//                             type=\"email\"\n//                             name=\"Email\"\n//                             id=\"EmailVerticalIcons\"\n//                             placeholder=\"Email\"\n//                         />\n//                         <div className=\"form-control-position\">\n//                             <Mail size={15} />\n//                         </div>\n//                         </FormGroup>\n//                     </Col>\n//                     <Col sm=\"12\">\n//                         <Label for=\"IconsMobile\">Mobile</Label>\n//                         <FormGroup className=\"has-icon-left position-relative\">\n//                         <Input\n//                             type=\"number\"\n//                             name=\"mobile\"\n//                             id=\"IconsMobile\"\n//                             placeholder=\"Mobile\"\n//                         />\n//                         <div className=\"form-control-position\">\n//                             <Smartphone size={15} />\n//                         </div>\n//                         </FormGroup>\n//                     </Col>\n//                     <Col sm=\"12\">\n//                         <Label for=\"IconsPassword\">Password</Label>\n//                         <FormGroup className=\"has-icon-left position-relative\">\n//                         <Input\n//                             type=\"password\"\n//                             name=\"password\"\n//                             id=\"IconsPassword\"\n//                             placeholder=\"Password\"\n//                         />\n//                         <div className=\"form-control-position\">\n//                             <Lock size={15} />\n//                         </div>\n//                         </FormGroup>\n//                     </Col>\n//                     <Col sm=\"12\">\n//                         <FormGroup className=\"has-icon-left position-relative\">\n//                         <Checkbox\n//                             color=\"primary\"\n//                             icon={<Check className=\"vx-icon\" size={16} />}\n//                             label=\"Remember Me\"\n//                             defaultChecked={false}\n//                         />\n//                         </FormGroup>\n//                     </Col>\n//                     <Col sm=\"12\">\n//                         <FormGroup className=\"has-icon-left position-relative\">\n//                         <Button.Ripple\n//                             color=\"primary\"\n//                             type=\"submit\"\n//                             className=\"mr-1 mb-1\"\n//                             onClick={e => e.preventDefault()}\n//                         >\n//                             Submit\n//                         </Button.Ripple>\n//                         <Button.Ripple\n//                             outline\n//                             color=\"warning\"\n//                             type=\"reset\"\n//                             className=\"mb-1\"\n//                         >\n//                             Reset\n//                         </Button.Ripple>\n//                         </FormGroup>\n//                     </Col>\n//                     </Row>\n//                 </Form>\n//                 </CardBody>\n//             </Card>\n//         </Col>\n//     </Row>\n// </React.Fragment>\nReact.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"mr-1 mb-1 bg-gradient-warning\",onClick:function onClick(){return _this2.props.changeViewPage('page');}},\"Back\"),!this.state.isLoading?/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Edit Karyawan\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Label,{for:\"nameVerticalIcons\"},\"First Name\"),/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"first_name\",id:\"nameVerticalIcons\",placeholder:\"First Name\",value:this.state.first_name,onChange:function onChange(val){return _this2.setState({first_name:val.target.value});}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(User,{size:15})))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Label,{for:\"LastNameVI\"},\"Last Name\"),/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"last_name\",id:\"LastNameVI\",placeholder:\"Last Name\",value:this.state.last_name,onChange:function onChange(val){return _this2.setState({last_name:val.target.value});}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Mail,{size:15})))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Label,{for:\"Karyawan\"},\"No Karyawan\"),/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Input,{type:\"number\",name:\"no_karyawan\",id:\"Karyawan\",placeholder:\"No Karyawan\",value:this.state.emp_no,onChange:function onChange(val){return _this2.setState({emp_no:val.target.value});}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Info,{size:15})))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Label,{for:\"gender\"},\"Gender\"),/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline-block mr-1\"},/*#__PURE__*/React.createElement(Radio,{label:\"Laki - laki\",defaultChecked:this.state.gender=='M'?true:false,name:\"gender\",value:\"M\",onChange:function onChange(val){return _this2.setState({gender:val.target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline-block mr-1\"},/*#__PURE__*/React.createElement(Radio,{label:\"Perempuan\",defaultChecked:this.state.gender=='F'?true:false,name:\"gender\",value:\"F\",onChange:function onChange(val){return _this2.setState({gender:val.target.value});}})))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Label,{for:\"profileImage\"},\"Profile Image\"),/*#__PURE__*/React.createElement(CustomInput,{type:\"file\",id:\"exampleCustomFileBrowser\",name:\"profileImage\",accept:\"image/*\",onChange:function onChange(val){return _this2.setState({profileImage:val.target.files});}// placeholder=\"wkwkw\"\n// value={'wkwkwk'}\n// value={this.state.profileImage}\n// onChange={(val)=>console.log('profileImage : ', val.target.files[0])}\n// onChange={(val)=>console.log('profileImage : ', val.target.value)}\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Label,{for:\"dept_name\"},\"Department\"),/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Select,{className:\"React\",classNamePrefix:\"select\"// defaultValue={this.state.dept_name.filter(x => x.label === this.state.dept_name_selected)}\n,defaultValue:this.state.dept_name.filter(function(x){return x.value===_this2.state.dept_name_selected;}),name:\"color\",options:this.state.dept_name,onChange:function onChange(val){return _this2.setState({dept_name_selected:val.value});}// styles={customStyles}\n,theme:function theme(_theme){return _objectSpread(_objectSpread({},_theme),{},{borderRadius:0,colors:_objectSpread(_objectSpread({},_theme.colors),{},{primary25:'#7367f0',primary:'#7367f0'})});}}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Label,{for:\"dept_name\"},\"Position\"),/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Select,{className:\"React\",classNamePrefix:\"select\"// defaultValue={this.state.position.filter(x => x.label === this.state.position_selected)}\n,defaultValue:this.state.position.filter(function(x){return x.value===_this2.state.position_selected;}),name:\"color\",options:this.state.position,onChange:function onChange(val){return _this2.setState({position_selected:val.value});}// onChange={(val)=>console.log('val : ', val.value)}\n// styles={customStyles}\n,theme:function theme(_theme2){return _objectSpread(_objectSpread({},_theme2),{},{borderRadius:0,colors:_objectSpread(_objectSpread({},_theme2.colors),{},{primary25:'#7367f0',primary:'#7367f0'})});}}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"has-icon-left position-relative\"},/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"mr-1 mb-1 bg-gradient-success\",onClick:function onClick(){return _this2.submitForm();}// onClick={e => e.preventDefault()}\n},\"Edit Data\"))))))):/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Edit Karyawan\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Spinner,{color:\"none\"})))),/*#__PURE__*/React.createElement(SweetAlert,{type:this.state.sweetAlertType,title:this.state.sweetAlertTitle,show:this.state.isSweetAlert,onConfirm:function onConfirm(){return _this2.handleAlert(\"isSweetAlert\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-alert-text\"},this.state.sweetAlertText))));}}]);return EmployeesEdit;}(React.Component);export default EmployeesEdit;","map":null,"metadata":{},"sourceType":"module"}