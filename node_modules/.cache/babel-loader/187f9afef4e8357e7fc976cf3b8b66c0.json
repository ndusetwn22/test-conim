{"ast":null,"code":"import _defineProperty from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{api_query,project}from\"../../../../api/ApiConstant\";import firebase from\"../../../../firebase/firebase\";import axios from'axios';import{Card,CardHeader,CardTitle,CardBody,FormGroup,Row,Col,Input,Form,Button,Label,CustomInput,CardImg}from\"reactstrap\";import img1 from\"../../../../assets/img/pages/1.png\";import img2 from\"../../../../assets/img/pages/2.png\";import Checkbox from\"../../../../components/@vuexy/checkbox/CheckboxesVuexy\";import{Check,Star,Save,Send}from\"react-feather\";import{history}from\"../../../../../src/history\";import Select from\"react-select\";import SweetAlert from\"react-bootstrap-sweetalert\";import Spinner from\"../../../../components/@vuexy/spinner/Fallback-spinner\";import Toggle from\"react-toggle\";import\"react-toggle/style.css\";import\"../../../../assets/scss/plugins/forms/switch/react-toggle.scss\";var KaryawanAdd=/*#__PURE__*/function(_React$Component){_inherits(KaryawanAdd,_React$Component);var _super=_createSuper(KaryawanAdd);function KaryawanAdd(props){var _this;_classCallCheck(this,KaryawanAdd);_this=_super.call(this,props);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.isLogin(\"super_admin\");case 2:_context.next=4;return _this.tarikDepartemen();case 4:case\"end\":return _context.stop();}}},_callee);}));_this.submitForm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var active,pass,role,sql,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(_this.state.nik==''||_this.state.nik==null)){_context6.next=4;break;}_context6.next=3;return _this.handleAlert('isSweetAlert',true,'Warning','NIK Tidak Boleh Kosong','warning');case 3:return _context6.abrupt(\"return\",_context6.sent);case 4:if(!(_this.state.nama==''||_this.state.nama==null)){_context6.next=8;break;}_context6.next=7;return _this.handleAlert('isSweetAlert',true,'Warning','Nama Lengkap Tidak Boleh Kosong','warning');case 7:return _context6.abrupt(\"return\",_context6.sent);case 8:if(!(_this.state.jobLevel==''||_this.state.jobLevel==null)){_context6.next=12;break;}_context6.next=11;return _this.handleAlert('isSweetAlert',true,'Warning','Job Level Tidak Boleh Kosong','warning');case 11:return _context6.abrupt(\"return\",_context6.sent);case 12:if(!(_this.state.departementSelected==''||_this.state.departementSelected==null)){_context6.next=18;break;}_context6.next=15;return _this.handleAlert('isSweetAlert',true,'Warning','Departemen Tidak Boleh Kosong','warning');case 15:return _context6.abrupt(\"return\",_context6.sent);case 18:_this.setState({isLoading:true});active=_this.state.isChecked?'Y':'N';pass='onekalbe21';role='op_df';if(_this.state.jobLevel=='1'||_this.state.jobLevel=='2'||_this.state.jobLevel=='3'){role='op_df';}if(_this.state.jobLevel=='4'){role='spv_df';}if(_this.state.jobLevel=='5'){role='spv_df';}//besok cek NIK dulu\nsql=\"\\n           select id, nik from df_master_user where nik = '\"+_this.state.nik+\"'\\n        \";console.log('sql : ',sql);_context6.next=29;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(result){var res,sql2,result2;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:res=result.data.response.rows;if(!(res.length=='')){_context4.next=8;break;}// query insert\nsql2=\"\\n                                        INSERT INTO df_master_user\\n                                        (nik, name, password, role, job_level, departement_id, active)\\n                                        VALUES('\"+_this.state.nik+\"', '\"+_this.state.nama+\"', df_encrypt('\"+pass+\"'), '\"+role+\"', '\"+_this.state.jobLevel+\"', \"+_this.state.departementSelected+\", '\"+active+\"')\\n                                       \";_context4.next=5;return axios.post(api_query,{query:sql2}).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(result){var res2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:res2=result.data.response.rows;_context2.next=3;return _this.handleAlertConfirm('isSweetAlertConfirm',true,'Success','Berhasil tambah karyawan','success');case 3:return _context2.abrupt(\"return\",_context2.sent);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref4.apply(this,arguments);};}()).catch(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(err){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log('error: ',err);_context3.next=3;return _this.handleAlertConfirm('isSweetAlertConfirm',true,'Danger','Gagal tambah karyawan','danger');case 3:return _context3.abrupt(\"return\",_context3.sent);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref5.apply(this,arguments);};}());case 5:result2=_context4.sent;_context4.next=11;break;case 8:_context4.next=10;return _this.handleAlertConfirm('isSweetAlertConfirm',true,'Warning','NIK Sudah digunakan','warning');case 10:return _context4.abrupt(\"return\",_context4.sent);case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x){return _ref3.apply(this,arguments);};}()).catch(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(err){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log('error : ',err);_context5.next=3;return _this.handleAlertConfirm('isSweetAlertConfirm',true,'Danger','Gagal tambah karyawan','danger');case 3:return _context5.abrupt(\"return\",_context5.sent);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref6.apply(this,arguments);};}());case 29:result=_context6.sent;_this.setState({isLoading:false});case 31:case\"end\":return _context6.stop();}}},_callee6);}));_this.tarikDepartemen=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var sql,result;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:sql=\"\\n      select  id as value,\\n              nama_departemen as label\\n      from df_master_departement\\n    \";_context8.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(result){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:res=result.data.response.rows;//   console.log('result query kategori : ', res)\nif(!(res.length=='')){_context7.next=3;break;}return _context7.abrupt(\"return\",[]);case 3:_context7.next=5;return _this.setState({dataDepartement:res});case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x5){return _ref8.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context8.sent;case 4:case\"end\":return _context8.stop();}}},_callee8);}));_this.isLogin=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(role){var myProfile;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}else if(JSON.parse(localStorage.getItem('account')).role!==role){history.push(\"/pages/login\");}else{myProfile=JSON.parse(localStorage.getItem('account'));console.log('myProfile ss : ',myProfile);_this.setState({myProfile:myProfile});}case 1:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x6){return _ref9.apply(this,arguments);};}();_this.handleAlertConfirm=function(state,value,title,text,type){if(value){_this.setState(_defineProperty({},state,value));_this.setState({sweetAlertTitleConfirm:title,sweetAlertTextConfirm:text,sweetAlertTypeConfirm:type});}else{_this.setState(_defineProperty({},state,value));_this.props.changeViewPage('page');}// if(text == \"Berhasil membuat SS\"){\n//   this.setState({ [state] : value })\n//   this.setState({sweetAlertTitle: title, sweetAlertText: text, sweetAlertType: type});\n//   // this.props.changeViewPage('page')\n// }else{}\n};_this.handleAlert=function(state,value,title,text,type){if(value){_this.setState(_defineProperty({},state,value));_this.setState({sweetAlertTitle:title,sweetAlertText:text,sweetAlertType:type});}else{_this.setState(_defineProperty({},state,value));}};_this.state={myProfile:null,isSweetAlert:false,sweetAlertTitle:'Judul',sweetAlertText:'Text',sweetAlertType:'warning',isSweetAlertConfirm:false,sweetAlertTitleConfirm:'Judul',sweetAlertTextConfirm:'Text',sweetAlertTypeConfirm:'warning',dataDepartement:[],departementSelected:null,nik:'',nama:'',jobLevel:'1',isChecked:true};return _this;}_createClass(KaryawanAdd,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.isLoading?/*#__PURE__*/React.createElement(Spinner,null):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"bg-gradient-warning mb-1\",onClick:function onClick(){return _this2.props.changeViewPage();}},\"Back\"),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Tambah Karyawan\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"ssTema\"},\"NIK\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"nik\",id:\"nik\",placeholder:\"NIK\",value:this.state.nik,onChange:function onChange(val){return _this2.setState({nik:val.target.value});}}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"ssTema\"},\"Nama Lengkap\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"nama\",id:\"nama\",placeholder:\"Nama Lengkap\",value:this.state.nama,onChange:function onChange(val){return _this2.setState({nama:val.target.value});}}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Pilih Departemen\"),/*#__PURE__*/React.createElement(Select,{className:\"React\",classNamePrefix:\"select\",name:\"clear\",options:this.state.dataDepartement,onChange:function onChange(val){return _this2.setState({departementSelected:val.value});}}))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"ssTema\"},\"Job Level\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"jobLevel\",id:\"jobLevel\",placeholder:\"Job Level (1 - 5)\",value:this.state.jobLevel,onChange:function onChange(val){return _this2.setState({jobLevel:val.target.value});}// disabled\n}))),/*#__PURE__*/React.createElement(Col,{sm:\"3\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(\"label\",{className:\"react-toggle-wrapper\"},\"Status Aktif Karyawan :\",/*#__PURE__*/React.createElement(Toggle,{checked:this.state.isChecked,onChange:function onChange(){return _this2.setState({isChecked:!_this2.state.isChecked});},name:\"controlledSwitch\",className:\"ml-1\"})))),/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"justify-content-end\"},/*#__PURE__*/React.createElement(Button,{color:\"none\",className:\"bg-gradient-success\",onClick:function onClick(){return _this2.submitForm();}},/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle ml-25\"},\"Buat Karyawan  \"),/*#__PURE__*/React.createElement(Send,{size:14}))))))))))),/*#__PURE__*/React.createElement(SweetAlert,{type:this.state.sweetAlertType,title:this.state.sweetAlertTitle,show:this.state.isSweetAlert,onConfirm:function onConfirm(){return _this2.handleAlert(\"isSweetAlert\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-alert-text\"},this.state.sweetAlertText)),/*#__PURE__*/React.createElement(SweetAlert,{type:this.state.sweetAlertTypeConfirm,title:this.state.sweetAlertTitleConfirm,show:this.state.isSweetAlertConfirm,onConfirm:function onConfirm(){return _this2.handleAlertConfirm(\"isSweetAlertConfirm\",false);}},/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-alert-text\"},this.state.sweetAlertTextConfirm)));}}]);return KaryawanAdd;}(React.Component);export default KaryawanAdd;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/admin/data-karyawan/component/KaryawanAdd.js"],"names":["React","api_query","project","firebase","axios","Card","CardHeader","CardTitle","CardBody","FormGroup","Row","Col","Input","Form","Button","Label","CustomInput","CardImg","img1","img2","Checkbox","Check","Star","Save","Send","history","Select","SweetAlert","Spinner","Toggle","KaryawanAdd","props","componentDidMount","isLogin","tarikDepartemen","submitForm","state","nik","handleAlert","nama","jobLevel","departementSelected","setState","isLoading","active","isChecked","pass","role","sql","console","log","post","query","then","result","res","data","response","rows","length","sql2","res2","handleAlertConfirm","catch","err","result2","dataDepartement","localStorage","getItem","undefined","push","JSON","parse","myProfile","value","title","text","type","sweetAlertTitleConfirm","sweetAlertTextConfirm","sweetAlertTypeConfirm","changeViewPage","sweetAlertTitle","sweetAlertText","sweetAlertType","isSweetAlert","isSweetAlertConfirm","val","target","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport { api_query, project } from \"../../../../api/ApiConstant\"\nimport firebase from \"../../../../firebase/firebase\"\nimport axios from 'axios'\nimport {\n  Card,\n  CardHeader,\n  CardTitle,\n  CardBody,\n  FormGroup,\n  Row,\n  Col,\n  Input,\n  Form,\n  Button,\n  Label,\n  CustomInput,\n  CardImg\n} from \"reactstrap\"\n\nimport img1 from \"../../../../assets/img/pages/1.png\"\nimport img2 from \"../../../../assets/img/pages/2.png\"\n\n\nimport Checkbox from \"../../../../components/@vuexy/checkbox/CheckboxesVuexy\"\nimport { Check, Star, Save, Send } from \"react-feather\"\nimport { history } from \"../../../../../src/history\"\nimport Select from \"react-select\"\nimport SweetAlert from \"react-bootstrap-sweetalert\"\nimport Spinner from \"../../../../components/@vuexy/spinner/Fallback-spinner\"\nimport Toggle from \"react-toggle\"\nimport \"react-toggle/style.css\"\nimport \"../../../../assets/scss/plugins/forms/switch/react-toggle.scss\"\n\n\nclass KaryawanAdd extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      myProfile:null,\n      isSweetAlert: false,\n      sweetAlertTitle: 'Judul',\n      sweetAlertText: 'Text',\n      sweetAlertType: 'warning',\n      isSweetAlertConfirm: false,\n      sweetAlertTitleConfirm: 'Judul',\n      sweetAlertTextConfirm: 'Text',\n      sweetAlertTypeConfirm: 'warning',\n      dataDepartement: [],\n      departementSelected: null,\n      nik: '',\n      nama: '',\n      jobLevel: '1',\n      isChecked: true\n    }\n}\n\ncomponentDidMount = async() => {\n    await this.isLogin(\"super_admin\")\n    await this.tarikDepartemen()\n}\n\nsubmitForm = async() =>{\n\n\n    if (this.state.nik == '' || this.state.nik == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'NIK Tidak Boleh Kosong', 'warning')}\n    if (this.state.nama == '' || this.state.nama == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Nama Lengkap Tidak Boleh Kosong', 'warning')}\n    if (this.state.jobLevel == '' || this.state.jobLevel == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Job Level Tidak Boleh Kosong', 'warning')}\n    if (this.state.departementSelected == '' || this.state.departementSelected == null) {return await this.handleAlert('isSweetAlert', true, 'Warning', 'Departemen Tidak Boleh Kosong', 'warning')}\n    else {\n  \n      this.setState({isLoading: true})\n\n        var active = this.state.isChecked? 'Y':'N'\n        var pass = 'onekalbe21'  \n        var role = 'op_df'\n\n        if (this.state.jobLevel == '1' || this.state.jobLevel == '2' || this.state.jobLevel == '3') {\n            role = 'op_df'\n        }\n        if (this.state.jobLevel == '4'){\n            role = 'spv_df'\n        }\n        if (this.state.jobLevel == '5'){\n            role = 'spv_df'\n        }\n\n        //besok cek NIK dulu\n        var sql = `\n           select id, nik from df_master_user where nik = '`+this.state.nik+`'\n        `\n\n        \n        console.log('sql : ', sql)\n  \n        var result = await axios.post(api_query, {\n                                    query : sql\n                                })\n                                    .then(async(result) => {\n                                    let res = result.data.response.rows\n                                    \n                                    if (res.length == '') {\n                                      // query insert\n                                       var sql2 = `\n                                        INSERT INTO df_master_user\n                                        (nik, name, password, role, job_level, departement_id, active)\n                                        VALUES('`+this.state.nik+`', '`+this.state.nama+`', df_encrypt('`+pass+`'), '`+role+`', '`+this.state.jobLevel+`', `+this.state.departementSelected+`, '`+active+`')\n                                       `\n                                          var result2 = await axios.post(api_query,{\n                                                                  query: sql2\n                                          }).then(async(result) => {\n                                            let res2 = result.data.response.rows\n                                            return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Success', 'Berhasil tambah karyawan', 'success')\n\n                                          }).catch(async(err)=>{\n                                            console.log('error: ', err)\n                                            return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Danger', 'Gagal tambah karyawan', 'danger')\n                                          })\n\n                                    }else{\n                                      return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Warning', 'NIK Sudah digunakan', 'warning')\n                                    }\n\n                                    // Beda dgn sweetAlert yg lain\n                                    // return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Success', 'Berhasil tambah karyawan', 'success')\n                                    // this.props.changeViewPage('page')\n                                }).catch(async(err) => {\n                                    console.log('error : ', err)\n                                    return await this.handleAlertConfirm('isSweetAlertConfirm', true, 'Danger', 'Gagal tambah karyawan', 'danger')\n                                    // return []\n                                })\n  \n    this.setState({isLoading: false})\n  \n  \n  }\n}\n\ntarikDepartemen = async() =>{\n\n    let sql = `\n      select  id as value,\n              nama_departemen as label\n      from df_master_departement\n    `\n  \n    var result = await axios.post(api_query, {\n                                query : sql\n                            })\n                                .then(async(result) => {\n                                  var res = result.data.response.rows\n                                //   console.log('result query kategori : ', res)\n                                  if (res.length == '') {\n                                      return []\n                                  }\n  \n                                  await this.setState({dataDepartement: res})\n  \n                                }).catch(err => {\n                                    console.log('error : ', err)\n                                    return []\n                                })\n      // await this.setState({data: result})\n  }\n  \n\nisLogin = async(role) =>{\n  if (localStorage.getItem('account') == undefined || localStorage.getItem('account') == null) {\n    history.push(\"/pages/login\")\n  }else if(JSON.parse(localStorage.getItem('account')).role !== role){\n    history.push(\"/pages/login\")\n  }\n  else{\n    var myProfile = JSON.parse(localStorage.getItem('account'))\n    console.log('myProfile ss : ', myProfile)\n    this.setState({myProfile: myProfile})\n  }\n}\n\nhandleAlertConfirm = (state, value, title, text, type) => {\n\n  if (value) {\n    this.setState({ [state] : value })\n    this.setState({sweetAlertTitleConfirm: title, sweetAlertTextConfirm: text, sweetAlertTypeConfirm: type});\n  }else{\n    this.setState({ [state] : value })\n    this.props.changeViewPage('page')\n}\n  // if(text == \"Berhasil membuat SS\"){\n  //   this.setState({ [state] : value })\n  //   this.setState({sweetAlertTitle: title, sweetAlertText: text, sweetAlertType: type});\n  //   // this.props.changeViewPage('page')\n  // }else{}\n}\n\nhandleAlert = (state, value, title, text, type) => {\n    if (value) {\n      this.setState({ [state] : value })\n      this.setState({sweetAlertTitle: title, sweetAlertText: text, sweetAlertType: type});\n    }else{\n      this.setState({ [state] : value })\n    }\n}\n\n\n  render() {\n    return (\n      <>\n      {this.state.isLoading?\n        <Spinner/>\n      :\n      <div>\n        <Button.Ripple color=\"none\" className=\"bg-gradient-warning mb-1\" onClick={() => this.props.changeViewPage()}>Back</Button.Ripple>\n\n        <Card>\n        <CardHeader>\n          <CardTitle>Tambah Karyawan</CardTitle>\n        </CardHeader>\n        <CardBody>\n          <Form>\n            <Row>\n                <Col sm=\"12\">\n                    <FormGroup>\n                    <Label for=\"ssTema\">NIK</Label>\n                    <Input\n                        type=\"text\"\n                        name=\"nik\"\n                        id=\"nik\"\n                        placeholder=\"NIK\"\n                        value={this.state.nik}\n                        onChange={(val)=>this.setState({nik: val.target.value})}\n                    />\n                    </FormGroup>\n                </Col>\n                <Col sm=\"12\">\n                    <FormGroup>\n                    <Label for=\"ssTema\">Nama Lengkap</Label>\n                    <Input\n                        type=\"text\"\n                        name=\"nama\"\n                        id=\"nama\"\n                        placeholder=\"Nama Lengkap\"\n                        value={this.state.nama}\n                        onChange={(val)=>this.setState({nama: val.target.value})}\n                    />\n                    </FormGroup>\n                </Col>\n                <Col sm=\"12\">\n                    <FormGroup>\n                    <Label for=\"\">Pilih Departemen</Label>\n                    <Select\n                        className=\"React\"\n                        classNamePrefix=\"select\"\n                        name=\"clear\"\n                        options={this.state.dataDepartement}\n                        onChange={(val)=>this.setState({departementSelected: val.value})}\n                    />\n                    </FormGroup>\n                </Col>\n                <Col sm=\"12\">\n                  <FormGroup>\n                    <Label for=\"ssTema\">Job Level</Label>\n                    <Input\n                      type=\"text\"\n                      name=\"jobLevel\"\n                      id=\"jobLevel\"\n                      placeholder=\"Job Level (1 - 5)\"\n                      value={this.state.jobLevel}\n                      onChange={(val)=>this.setState({jobLevel: val.target.value})}\n                      // disabled\n                    />\n                  </FormGroup>\n                </Col>\n                <Col sm=\"3\">\n                  <FormGroup>\n                    <label className=\"react-toggle-wrapper\">\n                      Status Aktif Karyawan :\n                      <Toggle\n                        checked={this.state.isChecked}\n                        onChange={()=> this.setState({isChecked: !this.state.isChecked})}\n                        name=\"controlledSwitch\"\n                        className={\"ml-1\"}\n                      />\n                    </label>\n                  </FormGroup>\n                </Col>\n\n              <Col sm=\"12\">\n                <FormGroup>\n                  <div className=\"d-flex flex-wrap justify-content-end\">\n                    <div className=\"justify-content-end\">\n                      {/* <Button color=\"none\" className=\"bg-gradient-warning mr-1\" onClick={() => this.saveForm()}>\n                        <span className='align-middle ml-25'>Simpan  </span>\n                        <Save size={14}/>\n                      </Button> */}\n                      <Button color=\"none\" className=\"bg-gradient-success\" onClick={() => this.submitForm()}>\n                        {/* Kirim */}\n                        <span className='align-middle ml-25'>Buat Karyawan  </span>\n                        <Send size={14}/>\n                      </Button>\n                    </div>\n                  </div>\n                </FormGroup>\n              </Col>\n            </Row>\n          </Form>\n        </CardBody>\n      </Card>\n      </div>\n      }\n      \n        <SweetAlert type={this.state.sweetAlertType} title={this.state.sweetAlertTitle}\n          show={this.state.isSweetAlert}\n          onConfirm={() => this.handleAlert(\"isSweetAlert\", false)}\n        >\n            <p className=\"sweet-alert-text\">\n              {this.state.sweetAlertText}\n            </p>\n        </SweetAlert>\n\n        <SweetAlert type={this.state.sweetAlertTypeConfirm} title={this.state.sweetAlertTitleConfirm}\n          show={this.state.isSweetAlertConfirm}\n          onConfirm={() => this.handleAlertConfirm(\"isSweetAlertConfirm\", false)}\n        >\n            <p className=\"sweet-alert-text\">\n              {this.state.sweetAlertTextConfirm}\n            </p>\n        </SweetAlert>\n      </>\n    )\n  }\n}\nexport default KaryawanAdd\n"]},"metadata":{},"sourceType":"module"}