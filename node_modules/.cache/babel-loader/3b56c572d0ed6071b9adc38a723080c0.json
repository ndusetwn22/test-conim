{"ast":null,"code":"import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import classnames from\"classnames\";import{ContextLayout}from\"../../../../utility/context/Layout\";import{connect}from\"react-redux\";import SidebarHeader from\"./SidebarHeader\";import Hammer from\"react-hammerjs\";import SideMenuContent from\"./sidemenu/SideMenuContent\";import PerfectScrollbar from\"react-perfect-scrollbar\";var Sidebar=/*#__PURE__*/function(_Component){_inherits(Sidebar,_Component);var _super=_createSuper(Sidebar);function Sidebar(){var _this;_classCallCheck(this,Sidebar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={width:window.innerWidth,activeIndex:null,hoveredMenuItem:null,activeItem:_this.props.activePath,menuShadow:false,ScrollbarTag:PerfectScrollbar};_this.mounted=false;_this.updateWidth=function(){if(_this.mounted){_this.setState(function(prevState){return{width:window.innerWidth};});_this.checkDevice();}};_this.checkDevice=function(){var prefixes=\" -webkit- -moz- -o- -ms- \".split(\" \");var mq=function mq(query){return window.matchMedia(query).matches;};if(\"ontouchstart\"in window||window.DocumentTouch){_this.setState({ScrollbarTag:\"div\"});}else{_this.setState({ScrollbarTag:PerfectScrollbar});}var query=[\"(\",prefixes.join(\"touch-enabled),(\"),\"heartz\",\")\"].join(\"\");return mq(query);};_this.changeActiveIndex=function(id){if(id!==_this.state.activeIndex){_this.setState({activeIndex:id});}else{_this.setState({activeIndex:null});}};_this.handleSidebarMouseEnter=function(id){if(id!==_this.state.hoveredMenuItem){_this.setState({hoveredMenuItem:id});}else{_this.setState({hoveredMenuItem:null});}};_this.handleActiveItem=function(url){_this.setState({activeItem:url});};return _this;}_createClass(Sidebar,[{key:\"componentDidMount\",value:function componentDidMount(){this.mounted=true;if(this.mounted){if(window!==\"undefined\"){window.addEventListener(\"resize\",this.updateWidth,false);}this.checkDevice();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.mounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,visibilityState=_this$props.visibilityState,toggleSidebarMenu=_this$props.toggleSidebarMenu,sidebarHover=_this$props.sidebarHover,toggle=_this$props.toggle,color=_this$props.color,sidebarVisibility=_this$props.sidebarVisibility,activeTheme=_this$props.activeTheme,collapsed=_this$props.collapsed,activePath=_this$props.activePath,sidebarState=_this$props.sidebarState,currentLang=_this$props.currentLang,permission=_this$props.permission,currentUser=_this$props.currentUser,collapsedMenuPaths=_this$props.collapsedMenuPaths;var _this$state=this.state,menuShadow=_this$state.menuShadow,activeIndex=_this$state.activeIndex,hoveredMenuItem=_this$state.hoveredMenuItem,activeItem=_this$state.activeItem,ScrollbarTag=_this$state.ScrollbarTag;var scrollShadow=function scrollShadow(container,dir){if(container&&dir===\"up\"&&container.scrollTop>=100){_this2.setState({menuShadow:true});}else if(container&&dir===\"down\"&&container.scrollTop<100){_this2.setState({menuShadow:false});}else{return;}};return/*#__PURE__*/React.createElement(ContextLayout.Consumer,null,function(context){var dir=context.state.direction;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Hammer,{onSwipe:function onSwipe(e){sidebarVisibility();},direction:dir===\"rtl\"?\"DIRECTION_LEFT\":\"DIRECTION_RIGHT\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-swipe-area d-xl-none d-block vh-100\"})),/*#__PURE__*/React.createElement(\"div\",{className:classnames(\"main-menu menu-fixed menu-light menu-accordion menu-shadow theme-\".concat(activeTheme),{collapsed:sidebarState===true,\"hide-sidebar\":_this2.state.width<1200&&visibilityState===false}),onMouseEnter:function onMouseEnter(){return sidebarHover(false);},onMouseLeave:function onMouseLeave(){return sidebarHover(true);}},/*#__PURE__*/React.createElement(SidebarHeader,{toggleSidebarMenu:toggleSidebarMenu,toggle:toggle,sidebarBgColor:color,sidebarVisibility:sidebarVisibility,activeTheme:activeTheme,collapsed:collapsed,menuShadow:menuShadow,activePath:activePath,sidebarState:sidebarState}),/*#__PURE__*/React.createElement(ScrollbarTag,Object.assign({className:classnames(\"main-menu-content\",{\"overflow-hidden\":ScrollbarTag!==\"div\",\"overflow-scroll\":ScrollbarTag===\"div\"})},ScrollbarTag!==\"div\"&&{options:{wheelPropagation:false},onScrollDown:function onScrollDown(container){return scrollShadow(container,\"down\");},onScrollUp:function onScrollUp(container){return scrollShadow(container,\"up\");},onYReachStart:function onYReachStart(){return menuShadow===true&&_this2.setState({menuShadow:false});}}),/*#__PURE__*/React.createElement(Hammer,{onSwipe:function onSwipe(){sidebarVisibility();},direction:dir===\"rtl\"?\"DIRECTION_RIGHT\":\"DIRECTION_LEFT\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"navigation navigation-main\"},/*#__PURE__*/React.createElement(SideMenuContent,{setActiveIndex:_this2.changeActiveIndex,activeIndex:activeIndex,hoverIndex:hoveredMenuItem,handleSidebarMouseEnter:_this2.handleSidebarMouseEnter,activeItemState:activeItem,handleActiveItem:_this2.handleActiveItem,activePath:activePath,lang:currentLang,permission:permission,currentUser:currentUser,collapsedMenuPaths:collapsedMenuPaths,toggleMenu:sidebarVisibility,deviceWidth:_this2.props.deviceWidth}))))));});}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.activePath!==state.activeItem){return{activeItem:props.activePath};}// Return null if the state hasn't changed\nreturn null;}}]);return Sidebar;}(Component);var mapStateToProps=function mapStateToProps(state){return{currentUser:state.auth.login.userRole};};export default connect(mapStateToProps)(Sidebar);","map":null,"metadata":{},"sourceType":"module"}