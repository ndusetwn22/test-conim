{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{api_query}from\"../../api/ApiConstant\";import{Card,CardBody,CardHeader,CardTitle,Badge,Input,Button}from\"reactstrap\";import DataTable from\"react-data-table-component\";import{Star,Search,Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight}from\"react-feather\";import axios from'axios';import ModalDigimon from\"./ModalDigimon\";import{history}from\"../../../src/history\";var CustomHeader=function CustomHeader(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"add-new\"},/*#__PURE__*/React.createElement(Button.Ripple,{color:\"none\",className:\"bg-gradient-success\",onClick:function onClick(){return props.tarikData();}},\"Add New\")),/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},/*#__PURE__*/React.createElement(Input,{value:props.value,onChange:function onChange(e){return props.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:\"15\"}))));};var ActionsComponent=function ActionsComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Button.Ripple,{className:\"mr-1 mb-1 bg-gradient-success\",color:\"none\",onClick:function onClick(){console.log('props : ',props);console.log('digimon : ',props.row.name);return props.isVisible(props.row.name,props.row.img);}},\" Showss \"));};var DataTableDigimon=/*#__PURE__*/function(_React$Component){_inherits(DataTableDigimon,_React$Component);var _super=_createSuper(DataTableDigimon);function DataTableDigimon(){var _this;_classCallCheck(this,DataTableDigimon);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modalVisible:false,modalImage:'',modalDigimonName:'',columns:[{name:\"Name\",selector:\"name\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-img ml-xl-0 ml-2\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-fluid rounded-circle\",height:\"36\",width:\"36\",src:row.img,alt:row.name})),/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.name)));}},{name:\"Image\",selector:\"img\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-img ml-xl-0 ml-2\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-fluid rounded-circle\",height:\"100\",width:\"100\",src:row.img,alt:row.name})));}},{name:\"Digimon Status\",selector:\"level\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.level,className:\"d-block text-bold-500 text-truncate mb-0\"},row.level)));}},{name:\"Actions\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(ActionsComponent,{row:row// getData={this.state.data}\n,isVisible:_this.toggleModalDigimon});}}],data:[{image:require(\"../../assets/img/portrait/small/avatar-s-12.jpg\"),name:\"Hortensia Soaper\",email:\"hsoaperh@mapy.cz\",date:\"June 1, 2017\",status:\"active\",revenue:\"$60,000\",ratings:\"good\"}],filteredData:[],value:\"\"};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.isLogin();case 2:_context.next=4;return _this.tarikData();case 4:_context.next=6;return _this.tarikDataPostgre();case 6:case\"end\":return _context.stop();}}},_callee);}));_this.isLogin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}case 1:case\"end\":return _context2.stop();}}},_callee2);}));_this.toggleModalDigimon=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,img){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log('LAUNCH TOGGLE DIGIMON');if(!(name==undefined)){_context3.next=6;break;}_context3.next=4;return _this.setState({modalVisible:false,modalImage:null,modalNameDigimon:''});case 4:_context3.next=8;break;case 6:_context3.next=8;return _this.setState({modalVisible:!_this.state.modalVisible,modalImage:img,modalDigimonName:name});case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x,_x2){return _ref3.apply(this,arguments);};}();_this.tarikData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get('https://digimon-api.vercel.app/api/digimon').then(function(result){// console.log('result digimon : ', result)\nvar res=result.data;console.log('result : ',result);if(res.length==''){return[];}// console.log('result : ', (result.data))\nreturn res;}).catch(function(err){return[];});case 2:result=_context4.sent;_context4.next=5;return _this.setState({data:result});case 5:case\"end\":return _context4.stop();}}},_callee4);}));_this.tarikDataPostgre=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var sql,result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:// console.log('tarik data')\n// let sql = `\n//     select * from employees_new limit 10000;\n// `\nconsole.log('test query');sql=\"\\n      select * from df_master_user\\n      \";_context5.next=4;return axios.post(api_query,{query:sql}).then(function(result){var res=result.data.response;// console.log('result : ', result)\nconsole.log('result postgres : ',result);console.log('postgres : ',res);if(res.length==''){return[];}}).catch(function(err){console.log('error : ',err);return[];});case 4:result=_context5.sent;_context5.next=7;return _this.setState({position:result});case 7:case\"end\":return _context5.stop();}}},_callee5);}));_this.handleFilter=function(e){var value=e.target.value;var data=_this.state.data;var filteredData=_this.state.filteredData;_this.setState({value:value});if(value.length){filteredData=data.filter(function(item){// console.log('ITEM : ', item)\nvar startsWithCondition=item.name.toLowerCase().startsWith(value.toLowerCase())||item.img.toLowerCase().startsWith(value.toLowerCase())||item.level.toLowerCase().startsWith(value.toLowerCase());// item.name.toLowerCase().startsWith(value.toLowerCase())\n// item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.status.toLowerCase().startsWith(value.toLowerCase())\nvar includesCondition=item.name.toLowerCase().includes(value.toLowerCase())||item.img.toLowerCase().includes(value.toLowerCase())||item.level.toLowerCase().includes(value.toLowerCase());// item.name.toLowerCase().includes(value.toLowerCase())\n// item.date.toLowerCase().includes(value.toLowerCase()) ||\n// item.email.toLowerCase().includes(value.toLowerCase()) ||\n// item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n// item.status.toLowerCase().includes(value.toLowerCase())\nif(startsWithCondition){return startsWithCondition;}else if(!startsWithCondition&&includesCondition){return includesCondition;}else return null;});_this.setState({filteredData:filteredData});}};return _this;}_createClass(DataTableDigimon,[{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,columns=_this$state.columns,value=_this$state.value,filteredData=_this$state.filteredData;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Digimon Table\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:value.length?filteredData:data,columns:columns,noHeader:true,pagination:true,subHeader:true,subHeaderComponent:/*#__PURE__*/React.createElement(CustomHeader,{value:value,handleFilter:this.handleFilter,tarikData:this.tarikData})}))),/*#__PURE__*/React.createElement(ModalDigimon,Object.assign({},this.state,this.props,{// modalImage={this.state.modalImage}\n// modalVisible={this.state.modalVisible}\ntoggleModal:this.toggleModalDigimon})));}}]);return DataTableDigimon;}(React.Component);export default DataTableDigimon;","map":null,"metadata":{},"sourceType":"module"}