{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{api_query}from\"../../../../api/ApiConstant\";import{Card,CardBody,CardHeader,CardTitle,Badge,Input,Button,Col,Label,Modal,ModalHeader,ModalBody,ModalFooter,Alert,FormGroup}from\"reactstrap\";import Flatpickr from\"react-flatpickr\";import DataTable from\"react-data-table-component\";import{Star,Search,Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight,Settings}from\"react-feather\";import axios from'axios';// import ModalDigimon from \"./ModalDigimon\"\n// import { history } from \"../../../src/history\"\nimport{history}from\"../../../../../src/history\";import Spinner from\"../../../../components/@vuexy/spinner/Fallback-spinner\";import ReactExport from\"react-data-export\";import Breadcrumbs from\"../../../../components/@vuexy/breadCrumbs/BreadCrumb\";import Select from\"react-select\";// import { MyPdf } from \"../component/ExportPdf\"\nvar ExcelFile=ReactExport.ExcelFile;var ExcelSheet=ReactExport.ExcelFile.ExcelSheet;var ExcelColumn=ReactExport.ExcelFile.ExcelColumn;var CustomHeader=function CustomHeader(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap justify-content-end\"},/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative has-icon-left mb-1\"},/*#__PURE__*/React.createElement(Input,{value:props.value,onChange:function onChange(e){return props.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:\"15\"}))));};var MstdRekapSs=/*#__PURE__*/function(_React$Component){_inherits(MstdRekapSs,_React$Component);var _super=_createSuper(MstdRekapSs);function MstdRekapSs(){var _this;_classCallCheck(this,MstdRekapSs);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modalDone:false,dataDone:[],columnsDone:[{name:\"Tema\",selector:\"tema_singkat\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tema_singkat,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tema_singkat)));}},{name:\"Status\",selector:\"status_deskripsi\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.status_deskripsi,className:\"d-block text-bold-500 text-truncate mb-0\"},row.status_deskripsi)));}},{name:\"Tanggal dibuat\",selector:\"tgl_buat\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tgl_buat,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tgl_buat)));}},{name:\"Tanggal tutup\",selector:\"tgl_tutup\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tgl_tutup,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tgl_tutup)));}}],modalPending:false,dataPending:[],columnsPending:[{name:\"Tema\",selector:\"tema_singkat\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tema_singkat,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tema_singkat)));}},{name:\"Status\",selector:\"status_deskripsi\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.status_deskripsi,className:\"d-block text-bold-500 text-truncate mb-0\"},row.status_deskripsi)));}},{name:\"Tanggal dibuat\",selector:\"tgl_buat\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tgl_buat,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tgl_buat)));}},{name:\"Tanggal tutup\",selector:\"tgl_tutup\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.tgl_tutup,className:\"d-block text-bold-500 text-truncate mb-0\"},row.tgl_tutup)));}}],isLoading:false,modalVisible:false,modalImage:'',modalDigimonName:'',myProfile:null,basicPicker:new Date(),columns:[{name:\"NIK\",selector:\"nik\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.nik,className:\"d-block text-bold-500 text-truncate mb-0\"},row.nik)));}},{name:\"Nama\",selector:\"name\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"span\",{title:row.name,className:\"d-block text-bold-500 text-truncate mb-0\"},row.name)));}},{name:\"Done\",selector:\"done\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this.viewDone(row);}},/*#__PURE__*/React.createElement(\"span\",{title:row.done,className:\"d-block text-bold-500 text-truncate mb-0\"},row.done))));}},{name:\"Pending\",selector:\"pending\",sortable:true,minWidth:\"200px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-info text-truncate ml-xl-50 ml-0\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this.viewPending(row);}},/*#__PURE__*/React.createElement(\"span\",{title:row.pending,className:\"d-block text-bold-500 text-truncate mb-0\"},row.pending))));}}],data:[],filteredData:[],value:\"\",cYear:new Date(),lYear:new Date(),dataDepartemen:[],deptSelected:null,deptLabel:''};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var date,cYear,lYear,lDate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.setState({isLoading:true});case 2:_context.next=4;return _this.isLogin('mstd_df');case 4:date=new Date();cYear=date.getFullYear();lYear=date.getFullYear()-1;lDate=date.getDay();_context.next=10;return _this.setState({cYear:cYear,lYear:lYear});case 10:_context.next=12;return _this.tarikDepartemen();case 12:_context.next=14;return _this.setState({isLoading:false});case 14:case\"end\":return _context.stop();}}},_callee);}));_this.reRunTable=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.tarikDataTable();case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.gantiDept=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(val){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.setState({deptSelected:val.value});case 2:_context3.next=4;return _this.setState({deptLabel:val.label});case 4:_context3.next=6;return _this.reRunTable();case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.tarikDepartemen=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var sql,result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sql=\"\\n    select id as value,\\n      nama_departemen as label\\n      from df_master_departement dmd\\n      order by id asc \\n    \";_context5.next=3;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(result){var res,rest,tmp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:res=result.data.response.rows;console.log('result query departemen : ',res);if(!(res.length=='')){_context4.next=4;break;}return _context4.abrupt(\"return\",[]);case 4:rest=res;tmp={};tmp.value=0;tmp.label='All Departement';rest.push(tmp);_context4.next=11;return _this.setState({dataDepartemen:rest});case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref5.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 3:result=_context5.sent;case 4:case\"end\":return _context5.stop();}}},_callee5);}));_this.toggleModalDone=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id){var sql,result;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this.setState(function(prevState){return{isLoading:true};});case 2:sql=\"\\n        select dss.id, dss.tema, dstatus.status_deskripsi, \\n        COALESCE(to_char(dss.tanggal_dibuat, 'DD Mon YYYY'), '') AS tgl_buat,\\n\\t\\tCOALESCE(to_char(dss.closed_date, 'DD Mon YYYY'), '') AS tgl_tutup \\n        from df_suggestion_system dss\\n        join df_ss_status dstatus\\n        on dstatus.id_status = dss.ss_status_id \\n        where dss.closed_date >= '\"+_this.state.cYear+\"-01-01' \\n        and dss.closed_date < '\"+_this.state.cYear+\"-12-31'\\n        and (dss.ss_status_id = 6)  \\n        and (dss.pengusul_id = \"+id+\" or dss.pengusul_id_2 = \"+id+\")\\n        order by id\\n    \";_context7.next=5;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(result){var res,_temp,index,element,temaSingkat,tema;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:res=result.data.response.rows;console.log('result : ',res);if(!(res.length=='')){_context6.next=6;break;}return _context6.abrupt(\"return\",[]);case 6:_temp=[];for(index=0;index<res.length;index++){element=res[index].tema;temaSingkat=element.split(' ').slice(0,2).join(' ');temaSingkat=temaSingkat+' ... ';tema=res[index];tema.tema_singkat=temaSingkat;// console.log('dummy : ', dummy)\n// // const elementTgl = res[index].tanggal_dibuat;\n// // var tgl = elementTgl.split('T')\n// console.log('tgl query : ', res[index].tgl)\n// console.log('tema singkat : ', temaSingkat)\n// // console.log('tanggal : ', tgl[0])\n// console.log('element:', element)\n_temp.push(tema);}_context6.next=10;return _this.setState({dataDone:_temp});case 10:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x4){return _ref7.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 5:result=_context7.sent;_context7.next=8;return _this.setState(function(prevState){return{isLoading:true,modalDone:!prevState.modalDone};});case 8:_context7.next=10;return _this.setState({isLoading:false});case 10:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x3){return _ref6.apply(this,arguments);};}();_this.toggleModalFixDone=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this.setState(function(prevState){return{modalDone:!prevState.modalDone,dataDone:[]};});case 1:case\"end\":return _context8.stop();}}},_callee8);}));_this.viewDone=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(data){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:console.log('viewDone : ',data);console.log('viewDone : ',data.id);_context9.next=4;return _this.toggleModalDone(data.id);case 4:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x5){return _ref9.apply(this,arguments);};}();_this.toggleModalPending=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(id){var sql,result;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _this.setState(function(prevState){return{isLoading:true};});case 2:sql=\"\\n        select dss.id, dss.tema, dstatus.status_deskripsi, \\n            COALESCE(to_char(dss.tanggal_dibuat, 'DD Mon YYYY'), '') AS tgl_buat,\\n            COALESCE(to_char(dss.closed_date, 'DD Mon YYYY'), '') AS tgl_tutup \\t\\t\\t\\n            from df_suggestion_system dss \\n            join df_ss_status dstatus\\n            on dstatus.id_status = dss.ss_status_id \\n        where dss.tanggal_dibuat >= '\"+_this.state.cYear+\"-01-01' \\n        and dss.tanggal_dibuat < '\"+_this.state.cYear+\"-12-31' \\n        and (dss.ss_status_id < 6 or dss.ss_status_id = 7 or dss.ss_status_id = 10) \\n        and (pengusul_id = \"+id+\" or pengusul_id_2 = \"+id+\")\\n        order by id\\n    \";_context11.next=5;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(result){var res,_temp,index,element,temaSingkat,tema;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:res=result.data.response.rows;console.log('result : ',res);if(!(res.length=='')){_context10.next=6;break;}return _context10.abrupt(\"return\",[]);case 6:_temp=[];for(index=0;index<res.length;index++){element=res[index].tema;temaSingkat=element.split(' ').slice(0,2).join(' ');temaSingkat=temaSingkat+' ... ';tema=res[index];tema.tema_singkat=temaSingkat;// console.log('dummy : ', dummy)\n// // const elementTgl = res[index].tanggal_dibuat;\n// // var tgl = elementTgl.split('T')\n// console.log('tgl query : ', res[index].tgl)\n// console.log('tema singkat : ', temaSingkat)\n// // console.log('tanggal : ', tgl[0])\n// console.log('element:', element)\n_temp.push(tema);}_context10.next=10;return _this.setState({dataPending:_temp});case 10:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x7){return _ref11.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 5:result=_context11.sent;_context11.next=8;return _this.setState(function(prevState){return{isLoading:true,modalPending:!prevState.modalPending};});case 8:_context11.next=10;return _this.setState({isLoading:false});case 10:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x6){return _ref10.apply(this,arguments);};}();_this.toggleModalFixPending=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_this.setState(function(prevState){return{modalPending:!prevState.modalPending,dataPending:[]};});case 1:case\"end\":return _context12.stop();}}},_callee12);}));_this.viewPending=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(data){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:console.log('viewPending : ',data);console.log('viewPending : ',data.id);_context13.next=4;return _this.toggleModalPending(data.id);case 4:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x8){return _ref13.apply(this,arguments);};}();_this.isLogin=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(role){var myProfile;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:if(localStorage.getItem('account')==undefined||localStorage.getItem('account')==null){history.push(\"/pages/login\");}else if(JSON.parse(localStorage.getItem('account')).role!==role){history.push(\"/pages/login\");}else{myProfile=JSON.parse(localStorage.getItem('account'));console.log('myProfile',myProfile);_this.setState({myProfile:myProfile});}case 1:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x9){return _ref14.apply(this,arguments);};}();_this.tarikDataTable=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(){var dept,sql,result;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:// console.log('dept mana ?', this.state.deptSelected)\n// console.log('dept mana ?', this.state.deptLabel)\ndept=_this.state.deptSelected==0?'notnull':'='+_this.state.deptSelected;sql=\"\\n        select distinct dmu.id, nik, name, departement_id, job_level, \\n       \\t\\t(select coalesce(count(dss.id),0) from df_suggestion_system dss \\n       \\t\\t\\twhere dss.closed_date >= '\"+_this.state.cYear+\"-01-01' \\n                and dss.closed_date < '\"+_this.state.cYear+\"-12-31'\\n                and (dss.ss_status_id = 6)  \\n       \\t\\t\\tand (dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id)) as done, \\n\\t\\t\\t(select coalesce(count(dss.id),0) from df_suggestion_system dss \\n\\t\\t\\t\\twhere dss.tanggal_dibuat >= '\"+_this.state.cYear+\"-01-01' \\n\\t\\t\\t\\tand dss.tanggal_dibuat < '\"+_this.state.cYear+\"-12-31' \\n\\t\\t\\t\\tand (dss.ss_status_id < 6 or dss.ss_status_id = 7 or dss.ss_status_id = 10) \\n\\t\\t\\t\\tand (dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id) ) as pending       \\t\\t\\n\\t\\t\\tfrom df_master_user dmu \\n       \\t\\tleft join df_suggestion_system dss\\n       \\t\\ton dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id\\n               where\\n               dmu.departement_id \"+dept+\" and \\n               job_level < '4'\\n            group by dmu.id\\n            order by dmu.id\\n    \";// dmu.departement_id = `+this.state.myProfile.departement_id+` and \n// console.log('tarik data', sql)\n_context16.next=4;return axios.post(api_query,{query:sql}).then(/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(result){var res;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:// let res = result.data.response\nres=result.data.response.rows;// console.log('result : ', result)\n// console.log('result postgres : ', result)\nconsole.log('result query : ',res);console.log('query leng :',res.length);if(!(res.length=='')){_context15.next=8;break;}_context15.next=6;return _this.setState({data:[]});case 6:_context15.next=10;break;case 8:_context15.next=10;return _this.setState({data:res});case 10:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x10){return _ref16.apply(this,arguments);};}()).catch(function(err){console.log('error : ',err);return[];});case 4:result=_context16.sent;case 5:case\"end\":return _context16.stop();}}},_callee16);}));_this.handleFilter=function(e){var value=e.target.value;var data=_this.state.data;var filteredData=_this.state.filteredData;_this.setState({value:value});if(value.length){filteredData=data.filter(function(item){// console.log('ITEM : ', item)\nvar startsWithCondition=item.nik.toLowerCase().startsWith(value.toLowerCase())||item.name.toLowerCase().startsWith(value.toLowerCase())||item.done.toLowerCase().startsWith(value.toLowerCase())||item.pending.toLowerCase().startsWith(value.toLowerCase());// item.name.toLowerCase().startsWith(value.toLowerCase())\n// item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n// item.status.toLowerCase().startsWith(value.toLowerCase())\nvar includesCondition=item.nik.toLowerCase().includes(value.toLowerCase())||item.name.toLowerCase().includes(value.toLowerCase())||item.done.toLowerCase().includes(value.toLowerCase())||item.pending.toLowerCase().includes(value.toLowerCase());// item.name.toLowerCase().includes(value.toLowerCase())\n// item.date.toLowerCase().includes(value.toLowerCase()) ||\n// item.email.toLowerCase().includes(value.toLowerCase()) ||\n// item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n// item.status.toLowerCase().includes(value.toLowerCase())\nif(startsWithCondition){return startsWithCondition;}else if(!startsWithCondition&&includesCondition){return includesCondition;}else return null;});_this.setState({filteredData:filteredData});}};_this.viewSS=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(data,id){return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:console.log('view SS : ',id);// console.log('data row : ', data)\n_this.props.changeViewPage('edit',data,id);case 2:case\"end\":return _context17.stop();}}},_callee17);}));return function(_x11,_x12){return _ref17.apply(this,arguments);};}();_this.downloadPDF=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:case\"end\":return _context18.stop();}}},_callee18);}));return _this;}_createClass(MstdRekapSs,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,data=_this$state.data,columns=_this$state.columns,value=_this$state.value,filteredData=_this$state.filteredData;return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.isLoading?/*#__PURE__*/React.createElement(Spinner,null):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Breadcrumbs,{breadCrumbTitle:\"Rekap SS\",breadCrumbParent:\"SS\",breadCrumbActive:\"Rekap SS\"}),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"\"},\"Pilih Departemen\"),/*#__PURE__*/React.createElement(Select,{className:\"React\",classNamePrefix:\"select\"// defaultValue={colourOptions[1]}\n,name:\"clear\",options:this.state.dataDepartemen// isClearable={true}\n// onChange={(val)=>this.setState({deptSelected: val.value})}\n,onChange:function onChange(val){return _this2.gantiDept(val);}})),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,null,\"Rekap SS YTD\")),/*#__PURE__*/React.createElement(CardBody,{className:\"rdt_Wrapper\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:value.length?filteredData:data,columns:columns,noHeader:true,pagination:true,subHeader:true,subHeaderComponent:/*#__PURE__*/React.createElement(CustomHeader,{value:value,handleFilter:this.handleFilter,tarikData:this.tarikData,dataCsv:this.state.data})// <CustomHeader value={value} handleFilter={this.handleFilter} tarikData={this.tarikDataTable}/>\n}))),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.modalDone,toggle:this.toggleModalDone,className:\"modal-dialog-centered\",backdrop:\"static\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.toggleModalFixDone,className:\"bg-success\"},\"Rekap SS Done\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"modal-dialog-centered\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:this.state.dataDone,columns:this.state.columnsDone,noHeader:true})),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",onClick:this.toggleModalFixDone},\"close\"),\" \")),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.modalPending,toggle:this.toggleModalPending,className:\"modal-dialog-centered\",backdrop:\"static\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.toggleModalFixPending,className:\"bg-success\"},\"Rekap SS Pending\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"modal-dialog-centered\"},/*#__PURE__*/React.createElement(DataTable,{className:\"dataTable-custom\",data:this.state.dataPending,columns:this.state.columnsPending,noHeader:true})),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",onClick:this.toggleModalFixPending},\"close\"),\" \"))));}}]);return MstdRekapSs;}(React.Component);export default MstdRekapSs;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.3 backup build/src/views/ss/mstd-approval-ss/component-rekap/MstdRekapSs.js"],"names":["React","api_query","Card","CardBody","CardHeader","CardTitle","Badge","Input","Button","Col","Label","Modal","ModalHeader","ModalBody","ModalFooter","Alert","FormGroup","Flatpickr","DataTable","Star","Search","Edit","Trash","ChevronDown","Plus","Check","ChevronLeft","ChevronRight","Settings","axios","history","Spinner","ReactExport","Breadcrumbs","Select","ExcelFile","ExcelSheet","ExcelColumn","CustomHeader","props","value","e","handleFilter","MstdRekapSs","state","modalDone","dataDone","columnsDone","name","selector","sortable","minWidth","cell","row","tema_singkat","status_deskripsi","tgl_buat","tgl_tutup","modalPending","dataPending","columnsPending","isLoading","modalVisible","modalImage","modalDigimonName","myProfile","basicPicker","Date","columns","nik","viewDone","done","viewPending","pending","data","filteredData","cYear","lYear","dataDepartemen","deptSelected","deptLabel","componentDidMount","setState","isLogin","date","getFullYear","lDate","getDay","tarikDepartemen","reRunTable","tarikDataTable","gantiDept","val","label","sql","post","query","then","result","res","response","rows","console","log","length","rest","tmp","push","catch","err","toggleModalDone","id","prevState","_temp","index","element","tema","temaSingkat","split","slice","join","toggleModalFixDone","toggleModalPending","toggleModalFixPending","role","localStorage","getItem","undefined","JSON","parse","dept","target","filter","item","startsWithCondition","toLowerCase","startsWith","includesCondition","includes","viewSS","changeViewPage","downloadPDF","tarikData","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport { api_query } from \"../../../../api/ApiConstant\"\nimport {\n  Card,\n  CardBody,\n  CardHeader,\n  CardTitle,\n  Badge,\n  Input,\n  Button,\n  Col,\n  Label, Modal, ModalHeader, ModalBody, ModalFooter, Alert, FormGroup\n} from \"reactstrap\"\nimport Flatpickr from \"react-flatpickr\";\nimport DataTable from \"react-data-table-component\"\nimport { Star, Search,\n    Edit,\n    Trash,\n    ChevronDown,\n    Plus,\n    Check,\n    ChevronLeft,\n    ChevronRight,\n    Settings } from \"react-feather\"\nimport axios from 'axios'\n// import ModalDigimon from \"./ModalDigimon\"\n// import { history } from \"../../../src/history\"\nimport { history } from \"../../../../../src/history\"\nimport Spinner from \"../../../../components/@vuexy/spinner/Fallback-spinner\"\nimport ReactExport from \"react-data-export\";\nimport Breadcrumbs from \"../../../../components/@vuexy/breadCrumbs/BreadCrumb\"\nimport Select from \"react-select\"\n// import { MyPdf } from \"../component/ExportPdf\"\n\n\nconst ExcelFile = ReactExport.ExcelFile;\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\n\nconst CustomHeader = props => {\n  return (\n    <div className=\"d-flex flex-wrap justify-content-end\">\n    {/* <div className=\"d-flex flex-wrap justify-content-between\"> */}\n      {/* <ExcelFile filename={\"SS Online\"} element={<Button color=\"none\" className=\"bg-gradient-success\">Download xlsx</Button>}>\n                <ExcelSheet data={props.dataCsv} name=\"List SS\">\n                    <ExcelColumn label=\"Nomor SS\" value=\"nomor_ss\"/>\n                    <ExcelColumn label=\"Nama pengusul\" value=\"pengusul_1\"/>\n                    <ExcelColumn label=\"Nama pengusul 2\" value=\"pengusul_2\"/>\n                    <ExcelColumn label=\"Departemen Pengusul\" value=\"nama_departemen\"/>\n                    <ExcelColumn label=\"Tema\" value=\"tema\"/>\n                    <ExcelColumn label=\"Lokasi\" value=\"lokasi\"/>\n                    <ExcelColumn label=\"Departemen SS\" value=\"departement_terdampak\"/>\n                    <ExcelColumn label=\"Permasalahan\" value=\"permasalahan\"/>\n                    <ExcelColumn label=\"Improvement\" value=\"improvement\"/>\n                    <ExcelColumn label=\"Biaya\" value=\"biaya\"/>\n                    <ExcelColumn label=\"Biaya Uraian\" value=\"biaya_uraian\"/>\n                    <ExcelColumn label=\"Keuntungan\" value=\"keuntungan\"/>\n                    <ExcelColumn label=\"Keuntungan Uraian\" value=\"keuntungan_uraian\"/>\n                    <ExcelColumn label=\"Tanggal dibuat\" value=\"tgl\"/>\n                    <ExcelColumn label=\"Status\" value=\"status_deskripsi\"/>\n                    <ExcelColumn label=\"Closed Date\" value=\"closed_date\"/>\n                    <ExcelColumn label=\"Change Control\" value=\"change_control\"/>\n                    <ExcelColumn label=\"Nomor CC\" value=\"nomor_cc\"/>\n                    <ExcelColumn label=\"Jenis Saving\" value=\"jenis_saving\"/>\n                    <ExcelColumn label=\"Foto Kondisi Sebelum\" value=\"foto_kondisi_sebelum\"/>\n                    <ExcelColumn label=\"Foto Kondisi Sesudah\" value=\"foto_kondisi_sesudah\"/>\n                </ExcelSheet>\n            </ExcelFile> */}\n      <div className=\"position-relative has-icon-left mb-1\">\n        <Input value={props.value} onChange={e => props.handleFilter(e)} />\n        <div className=\"form-control-position\">\n          <Search size=\"15\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n\n\nclass MstdRekapSs extends React.Component {\n  state = {\n    modalDone: false,\n    dataDone: [],\n    columnsDone: [\n      {\n        name: \"Tema\",\n        selector: \"tema_singkat\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row =>\n        (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.tema_singkat}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.tema_singkat}\n                {/* {row.tema} */}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Status\",\n        selector: \"status_deskripsi\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.status_deskripsi}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.status_deskripsi}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Tanggal dibuat\",\n        selector: \"tgl_buat\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.tgl_buat}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.tgl_buat}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Tanggal tutup\",\n        selector: \"tgl_tutup\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.tgl_tutup}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.tgl_tutup}\n              </span>\n            </div>\n          </div>\n        )\n      },\n    ],\n    modalPending: false,\n    dataPending: [],\n    columnsPending: [\n        {\n          name: \"Tema\",\n          selector: \"tema_singkat\",\n          sortable: true,\n          minWidth: \"200px\",\n          cell: row =>\n          (\n            <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n              <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n                <span\n                  title={row.tema_singkat}\n                  className=\"d-block text-bold-500 text-truncate mb-0\">\n                  {row.tema_singkat}\n                  {/* {row.tema} */}\n                </span>\n              </div>\n            </div>\n          )\n        },\n        {\n          name: \"Status\",\n          selector: \"status_deskripsi\",\n          sortable: true,\n          minWidth: \"200px\",\n          cell: row => (\n            <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n              <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n                <span\n                  title={row.status_deskripsi}\n                  className=\"d-block text-bold-500 text-truncate mb-0\">\n                  {row.status_deskripsi}\n                </span>\n              </div>\n            </div>\n          )\n        },\n        {\n          name: \"Tanggal dibuat\",\n          selector: \"tgl_buat\",\n          sortable: true,\n          minWidth: \"200px\",\n          cell: row => (\n            <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n              <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n                <span\n                  title={row.tgl_buat}\n                  className=\"d-block text-bold-500 text-truncate mb-0\">\n                  {row.tgl_buat}\n                </span>\n              </div>\n            </div>\n          )\n        },\n        {\n          name: \"Tanggal tutup\",\n          selector: \"tgl_tutup\",\n          sortable: true,\n          minWidth: \"200px\",\n          cell: row => (\n            <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n              <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n                <span\n                  title={row.tgl_tutup}\n                  className=\"d-block text-bold-500 text-truncate mb-0\">\n                  {row.tgl_tutup}\n                </span>\n              </div>\n            </div>\n          )\n        },\n      ],\n    isLoading: false,\n    modalVisible: false,\n    modalImage: '',\n    modalDigimonName: '',\n    myProfile: null,\n    basicPicker : new Date(),\n    columns: [\n      {\n        name: \"NIK\",\n        selector: \"nik\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row =>\n        (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.nik}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.nik}\n                {/* {row.tema} */}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Nama\",\n        selector: \"name\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <span\n                title={row.name}\n                className=\"d-block text-bold-500 text-truncate mb-0\">\n                {row.name}\n              </span>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Done\",\n        selector: \"done\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <a onClick={()=>this.viewDone(row)}>\n                <span\n                  title={row.done}\n                  className=\"d-block text-bold-500 text-truncate mb-0\"\n                  >\n                  {row.done}\n                </span>\n              </a>\n            </div>\n          </div>\n        )\n      },\n      {\n        name: \"Pending\",\n        selector: \"pending\",\n        sortable: true,\n        minWidth: \"200px\",\n        cell: row => (\n          <div className=\"d-flex flex-xl-row flex-column align-items-xl-center align-items-start py-xl-0 py-1\">\n            <div className=\"user-info text-truncate ml-xl-50 ml-0\">\n              <a onClick={()=>this.viewPending(row)}>\n                <span\n                  title={row.pending}\n                  className=\"d-block text-bold-500 text-truncate mb-0\"\n                  >\n                  {row.pending}\n                </span>\n              </a>\n            </div>\n          </div>\n        )\n      },\n    ],\n    data: [],\n    filteredData: [],\n    value: \"\",\n    cYear: new Date(),\n    lYear: new Date(),\n    dataDepartemen: [],\n    deptSelected: null,\n    deptLabel: ''\n  }\n\n  componentDidMount=async()=>{\n    await this.setState({isLoading: true});\n    await this.isLogin('mstd_df');\n\n    var date = new Date();\n    var cYear = date.getFullYear()\n    var lYear = date.getFullYear()-1\n    var lDate = date.getDay()\n    await this.setState({cYear: cYear, lYear: lYear})\n\n    // await this.tarikDataTable();\n    await this.tarikDepartemen();\n    await this.setState({isLoading: false});\n\n  }\n\n  reRunTable = async() =>{\n      await this.tarikDataTable();\n  }\n\n  gantiDept = async(val) =>{\n    await this.setState({deptSelected: val.value})\n    await this.setState({deptLabel: val.label})\n    await this.reRunTable();\n    // await this.reRunChart();\n}\n\n  tarikDepartemen = async() =>{\n\n    let sql = `\n    select id as value,\n      nama_departemen as label\n      from df_master_departement dmd\n      order by id asc \n    `\n  \n    var result = await axios.post(api_query, {\n                                query : sql\n                            })\n                                .then(async(result) => {\n                                  var res = result.data.response.rows\n                                  console.log('result query departemen : ', res)\n                                  if (res.length == '') {\n                                      return []\n                                  }\n                                    var rest = res\n                                    var tmp = {}\n                                    tmp.value = 0\n                                    tmp.label = 'All Departement'\n                                    \n                                    rest.push(tmp)\n                                    await this.setState({dataDepartemen: rest})\n  \n                                }).catch(err => {\n                                    console.log('error : ', err)\n                                    return []\n                                })\n      // await this.setState({data: result})\n    }\n\n  toggleModalDone = async(id) => {\n    await this.setState(prevState => ({\n      isLoading: true,\n    }))\n\n    let sql = `\n        select dss.id, dss.tema, dstatus.status_deskripsi, \n        COALESCE(to_char(dss.tanggal_dibuat, 'DD Mon YYYY'), '') AS tgl_buat,\n\t\tCOALESCE(to_char(dss.closed_date, 'DD Mon YYYY'), '') AS tgl_tutup \n        from df_suggestion_system dss\n        join df_ss_status dstatus\n        on dstatus.id_status = dss.ss_status_id \n        where dss.closed_date >= '`+this.state.cYear+`-01-01' \n        and dss.closed_date < '`+this.state.cYear+`-12-31'\n        and (dss.ss_status_id = 6)  \n        and (dss.pengusul_id = `+id+` or dss.pengusul_id_2 = `+id+`)\n        order by id\n    `\n    var result = await axios.post(api_query, {\n                                query : sql\n                            })\n                                .then(async(result) => {\n                                let res = result.data.response.rows\n                                console.log('result : ', res)\n                                if (res.length == '') {\n                                    return []\n                                }else{\n                                    var _temp = []\n\n                                  for (let index = 0; index < res.length; index++) {\n                                    const element = res[index].tema;\n                                    var temaSingkat = element.split(' ').slice(0,2).join(' ')\n                                    temaSingkat = temaSingkat + ' ... '\n\n                                    var tema = res[index];\n                                    tema.tema_singkat = temaSingkat\n\n                                    // console.log('dummy : ', dummy)\n\n                                    // // const elementTgl = res[index].tanggal_dibuat;\n                                    // // var tgl = elementTgl.split('T')\n                                    // console.log('tgl query : ', res[index].tgl)\n\n                                    // console.log('tema singkat : ', temaSingkat)\n                                    // // console.log('tanggal : ', tgl[0])\n                                    // console.log('element:', element)\n\n                                    _temp.push(tema)\n\n                                  }\n\n                                  await this.setState({dataDone: _temp})\n                                }\n                            }).catch(err => {\n                                console.log('error : ', err)\n                                return []\n                            })\n\n\n    await this.setState(prevState => ({\n      isLoading: true,\n      modalDone: !prevState.modalDone\n    }))\n\n    await this.setState({isLoading: false})\n  }\n  \n  toggleModalFixDone = async() => {\n    this.setState(prevState => ({\n      modalDone: !prevState.modalDone,\n      dataDone: []\n    }))\n  \n  }\n\n  viewDone = async(data) =>{\n    console.log('viewDone : ', data)\n    console.log('viewDone : ', data.id)\n    await this.toggleModalDone(data.id);\n  }\n\n\n\n\n  toggleModalPending = async(id) => {\n    await this.setState(prevState => ({\n      isLoading: true,\n    }))\n\n    let sql = `\n        select dss.id, dss.tema, dstatus.status_deskripsi, \n            COALESCE(to_char(dss.tanggal_dibuat, 'DD Mon YYYY'), '') AS tgl_buat,\n            COALESCE(to_char(dss.closed_date, 'DD Mon YYYY'), '') AS tgl_tutup \t\t\t\n            from df_suggestion_system dss \n            join df_ss_status dstatus\n            on dstatus.id_status = dss.ss_status_id \n        where dss.tanggal_dibuat >= '`+this.state.cYear+`-01-01' \n        and dss.tanggal_dibuat < '`+this.state.cYear+`-12-31' \n        and (dss.ss_status_id < 6 or dss.ss_status_id = 7 or dss.ss_status_id = 10) \n        and (pengusul_id = `+id+` or pengusul_id_2 = `+id+`)\n        order by id\n    `\n    var result = await axios.post(api_query, {\n                                query : sql\n                            })\n                                .then(async(result) => {\n                                let res = result.data.response.rows\n                                console.log('result : ', res)\n                                if (res.length == '') {\n                                    return []\n                                }else{\n                                    var _temp = []\n\n                                  for (let index = 0; index < res.length; index++) {\n                                    const element = res[index].tema;\n                                    var temaSingkat = element.split(' ').slice(0,2).join(' ')\n                                    temaSingkat = temaSingkat + ' ... '\n\n                                    var tema = res[index];\n                                    tema.tema_singkat = temaSingkat\n\n                                    // console.log('dummy : ', dummy)\n\n                                    // // const elementTgl = res[index].tanggal_dibuat;\n                                    // // var tgl = elementTgl.split('T')\n                                    // console.log('tgl query : ', res[index].tgl)\n\n                                    // console.log('tema singkat : ', temaSingkat)\n                                    // // console.log('tanggal : ', tgl[0])\n                                    // console.log('element:', element)\n\n                                    _temp.push(tema)\n\n                                  }\n\n                                  await this.setState({dataPending: _temp})\n                                }\n                            }).catch(err => {\n                                console.log('error : ', err)\n                                return []\n                            })\n\n\n    await this.setState(prevState => ({\n      isLoading: true,\n      modalPending: !prevState.modalPending\n    }))\n\n    await this.setState({isLoading: false})\n  }\n  \n  toggleModalFixPending = async() => {\n    this.setState(prevState => ({\n      modalPending: !prevState.modalPending,\n      dataPending: []\n    }))\n  \n  }\n\n  viewPending = async(data) =>{\n    console.log('viewPending : ', data)\n    console.log('viewPending : ', data.id)\n    await this.toggleModalPending(data.id);\n  }\n\n  isLogin = async(role) =>{\n    if (localStorage.getItem('account') == undefined || localStorage.getItem('account') == null) {\n      history.push(\"/pages/login\")\n    }else if(JSON.parse(localStorage.getItem('account')).role !== role){\n      history.push(\"/pages/login\")\n    }\n    else{\n      var myProfile = JSON.parse(localStorage.getItem('account'))\n      console.log('myProfile', myProfile)\n      this.setState({myProfile: myProfile})\n    }\n  }\n\n  tarikDataTable = async() =>{\n\n    // console.log('dept mana ?', this.state.deptSelected)\n    // console.log('dept mana ?', this.state.deptLabel)\n\n    var dept = this.state.deptSelected == 0 ? 'notnull': '='+this.state.deptSelected\n\n    let sql = `\n        select distinct dmu.id, nik, name, departement_id, job_level, \n       \t\t(select coalesce(count(dss.id),0) from df_suggestion_system dss \n       \t\t\twhere dss.closed_date >= '`+this.state.cYear+`-01-01' \n                and dss.closed_date < '`+this.state.cYear+`-12-31'\n                and (dss.ss_status_id = 6)  \n       \t\t\tand (dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id)) as done, \n\t\t\t(select coalesce(count(dss.id),0) from df_suggestion_system dss \n\t\t\t\twhere dss.tanggal_dibuat >= '`+this.state.cYear+`-01-01' \n\t\t\t\tand dss.tanggal_dibuat < '`+this.state.cYear+`-12-31' \n\t\t\t\tand (dss.ss_status_id < 6 or dss.ss_status_id = 7 or dss.ss_status_id = 10) \n\t\t\t\tand (dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id) ) as pending       \t\t\n\t\t\tfrom df_master_user dmu \n       \t\tleft join df_suggestion_system dss\n       \t\ton dss.pengusul_id = dmu.id or dss.pengusul_id_2 = dmu.id\n               where\n               dmu.departement_id `+dept+` and \n               job_level < '4'\n            group by dmu.id\n            order by dmu.id\n    `\n\n    // dmu.departement_id = `+this.state.myProfile.departement_id+` and \n    // console.log('tarik data', sql)\n    var result = await axios.post(api_query, {\n                                query : sql\n                            })\n                                .then(async(result) => {\n                                // let res = result.data.response\n                                var res = result.data.response.rows\n\n                                // console.log('result : ', result)\n                                // console.log('result postgres : ', result)\n                                console.log('result query : ', res)\n                                console.log('query leng :', res.length)\n                                if (res.length == '') {\n                                    // return []\n                                    await this.setState({data: []})\n                                }else{\n                                    await this.setState({data: res})\n                                }\n                                \n                            }).catch(err => {\n                                console.log('error : ', err)\n                                return []\n                            })\n      // await this.setState({data: result})\n    }\n\n  handleFilter = e => {\n    let value = e.target.value\n    let data = this.state.data\n    let filteredData = this.state.filteredData\n    this.setState({ value })\n\n    if (value.length) {\n      filteredData = data.filter(item => {\n        // console.log('ITEM : ', item)\n        let startsWithCondition =\n          item.nik.toLowerCase().startsWith(value.toLowerCase()) ||\n          item.name.toLowerCase().startsWith(value.toLowerCase()) ||\n          item.done.toLowerCase().startsWith(value.toLowerCase()) ||\n          item.pending.toLowerCase().startsWith(value.toLowerCase())\n          // item.name.toLowerCase().startsWith(value.toLowerCase())\n          // item.date.toLowerCase().startsWith(value.toLowerCase()) ||\n          // item.email.toLowerCase().startsWith(value.toLowerCase()) ||\n          // item.revenue.toLowerCase().startsWith(value.toLowerCase()) ||\n          // item.status.toLowerCase().startsWith(value.toLowerCase())\n        let includesCondition =\n          item.nik.toLowerCase().includes(value.toLowerCase()) ||\n          item.name.toLowerCase().includes(value.toLowerCase()) ||\n          item.done.toLowerCase().includes(value.toLowerCase()) ||\n          item.pending.toLowerCase().includes(value.toLowerCase())\n          // item.name.toLowerCase().includes(value.toLowerCase())\n          // item.date.toLowerCase().includes(value.toLowerCase()) ||\n          // item.email.toLowerCase().includes(value.toLowerCase()) ||\n          // item.revenue.toLowerCase().includes(value.toLowerCase()) ||\n          // item.status.toLowerCase().includes(value.toLowerCase())\n\n        if (startsWithCondition) {\n          return startsWithCondition\n        } else if (!startsWithCondition && includesCondition) {\n          return includesCondition\n        } else return null\n      })\n      this.setState({ filteredData })\n    }\n  }\n\n  viewSS = async(data, id) =>{\n    console.log('view SS : ', id)\n    // console.log('data row : ', data)\n    this.props.changeViewPage('edit', data, id)\n  }\n\n  downloadPDF = async() =>{\n\n  }\n\n  render() {\n    let { data, columns, value, filteredData } = this.state\n    return (\n        <>\n          {this.state.isLoading?\n            <Spinner/>\n            :\n            <div>\n                <Breadcrumbs\n                        breadCrumbTitle=\"Rekap SS\"\n                        breadCrumbParent=\"SS\"\n                        breadCrumbActive=\"Rekap SS\"\n                    />\n                {/* <Col className=\"\" md=\"12\" sm=\"12\"> */}\n                    <FormGroup>\n                    <Label for=\"\">Pilih Departemen</Label>\n                    <Select\n                        className=\"React\"\n                        classNamePrefix=\"select\"\n                        // defaultValue={colourOptions[1]}\n                        name=\"clear\"\n                        options={this.state.dataDepartemen}\n                        // isClearable={true}\n                        // onChange={(val)=>this.setState({deptSelected: val.value})}\n                        onChange={(val)=>this.gantiDept(val)}\n                    />\n                    </FormGroup>\n                {/* </Col> */}\n                <Card>\n                <CardHeader>\n                    <CardTitle>Rekap SS YTD</CardTitle>\n                </CardHeader>\n                <CardBody className=\"rdt_Wrapper\">\n                <DataTable\n                    className=\"dataTable-custom\"\n                    data={value.length ? filteredData : data}\n                    columns={columns}\n                    noHeader\n                    pagination\n                    subHeader\n                    subHeaderComponent={\n                    <CustomHeader value={value} handleFilter={this.handleFilter} tarikData={this.tarikData} dataCsv={this.state.data}/>\n                    // <CustomHeader value={value} handleFilter={this.handleFilter} tarikData={this.tarikDataTable}/>\n                    }\n                />\n                </CardBody>\n            </Card>\n                <Modal\n                      isOpen={this.state.modalDone}\n                      toggle={this.toggleModalDone}\n                      className=\"modal-dialog-centered\"\n                      backdrop=\"static\"\n                    >\n                      <ModalHeader toggle={this.toggleModalFixDone} className=\"bg-success\">\n                        Rekap SS Done\n                      </ModalHeader>\n                      <ModalBody className=\"modal-dialog-centered\">\n                        {/* <Row> */}\n                          <DataTable\n                            className=\"dataTable-custom\"\n                            data={this.state.dataDone}\n                            columns={this.state.columnsDone}\n                            noHeader\n                        />\n                          {/* </Row> */}\n                      </ModalBody>\n                      <ModalFooter>\n                      <Button color=\"danger\" onClick={this.toggleModalFixDone}>\n                        close\n                      </Button>{\" \"}\n                      </ModalFooter>\n                </Modal>\n\n                <Modal\n                      isOpen={this.state.modalPending}\n                      toggle={this.toggleModalPending}\n                      className=\"modal-dialog-centered\"\n                      backdrop=\"static\"\n                    >\n                      <ModalHeader toggle={this.toggleModalFixPending} className=\"bg-success\">\n                        Rekap SS Pending\n                      </ModalHeader>\n                      <ModalBody className=\"modal-dialog-centered\">\n                        {/* <Row> */}\n                          <DataTable\n                            className=\"dataTable-custom\"\n                            data={this.state.dataPending}\n                            columns={this.state.columnsPending}\n                            noHeader\n                        />\n                          {/* </Row> */}\n                      </ModalBody>\n                      <ModalFooter>\n                      <Button color=\"danger\" onClick={this.toggleModalFixPending}>\n                        close\n                      </Button>{\" \"}\n                      </ModalFooter>\n                </Modal>\n            </div>\n          }\n      </>\n    )\n  }\n}\n\nexport default MstdRekapSs\n"]},"metadata":{},"sourceType":"module"}