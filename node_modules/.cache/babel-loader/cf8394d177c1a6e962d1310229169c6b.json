{"ast":null,"code":"import _toConsumableArray from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import ExtensionsHeader from\"../extensionsHeader\";import{Row,Col,Card,CardBody,Table,CardHeader,CardTitle,Input}from\"reactstrap\";import XLSX from\"xlsx\";import{DownloadCloud,Search}from\"react-feather\";import{useDropzone}from\"react-dropzone\";import{toast,ToastContainer}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import\"../../assets/scss/plugins/extensions/toastr.scss\";import\"../../assets/scss/plugins/extensions/dropzone.scss\";function Uploader(props){var _useDropzone=useDropzone({accept:\".xlsx, .xls, .csv\",onDrop:function onDrop(acceptedFiles){var reader=new FileReader();reader.onload=function(){var fileData=reader.result;var wb=XLSX.read(fileData,{type:\"binary\"});wb.SheetNames.forEach(function(sheetName){var rowObj=XLSX.utils.sheet_to_row_object_array(wb.Sheets[sheetName]);props.getTableData(rowObj,acceptedFiles[0].name);});};if(acceptedFiles.length){reader.readAsBinaryString(acceptedFiles[0]);}else{toast.error(\"You can only upload .xlsx, .xls, .csv Files!\");}}}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps;return/*#__PURE__*/React.createElement(\"section\",{className:\"pb-1\"},/*#__PURE__*/React.createElement(\"div\",getRootProps({className:\"dropzone py-3 flex-column\"}),/*#__PURE__*/React.createElement(\"input\",getInputProps()),/*#__PURE__*/React.createElement(DownloadCloud,{className:\"text-light\",size:50}),/*#__PURE__*/React.createElement(\"h4\",{className:\"mb-0 mt-2\"},\"Drop Excel File or Browse\")));}var Import=/*#__PURE__*/function(_React$Component){_inherits(Import,_React$Component);var _super=_createSuper(Import);function Import(){var _this;_classCallCheck(this,Import);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={tableData:[],filteredData:[],value:\"\",name:\"\"};_this.getTableData=function(arr,name){_this.setState({tableData:arr,name:name});};_this.handleFilter=function(e){var data=_this.state.tableData;var filteredData=[];var value=e.target.value;_this.setState({value:value});if(value.length){filteredData=data.filter(function(col){var keys=Object.keys(col);var startsWithCondition=keys.filter(function(key){return col[key].toString().toLowerCase().startsWith(value.toLowerCase());});var includesCondition=keys.filter(function(key){return col[key].toString().toLowerCase().includes(value.toLowerCase());});if(startsWithCondition.length)return col[startsWithCondition];else if(!startsWithCondition&&includesCondition.length)return col[includesCondition];else return null;});_this.setState({value:value,filteredData:filteredData});}else{return null;}};return _this;}_createClass(Import,[{key:\"render\",value:function render(){var _this2=this;var headArr=this.state.tableData.length?this.state.tableData.map(function(col,index){if(index===0)return _toConsumableArray(Object.keys(col));else return null;}):[];var dataArr=this.state.value.length?this.state.filteredData:this.state.tableData.length&&!this.state.value.length?this.state.tableData:null;var renderTableBody=dataArr!==null&&dataArr.length?dataArr.map(function(col,index){var keys=Object.keys(col);var renderTd=keys.map(function(key,index){return/*#__PURE__*/React.createElement(\"td\",{key:index},col[key]);});return/*#__PURE__*/React.createElement(\"tr\",{key:index},renderTd);}):null;var renderTableHead=headArr.length?headArr[0].map(function(head,index){return/*#__PURE__*/React.createElement(\"th\",{key:index},head);}):null;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ExtensionsHeader,{title:\"XLSX\",subTitle:\"Xlsx is a parser and writer for various spreadsheet formats\",link:\"https://github.com/AdeleD/react-paginate\"}),/*#__PURE__*/React.createElement(Row,{className:\"import-component\"},/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Uploader,{getTableData:this.getTableData})))))),this.state.tableData.length?/*#__PURE__*/React.createElement(Col,{sm:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,{className:\"justify-content-between flex-wrap\"},/*#__PURE__*/React.createElement(CardTitle,null,this.state.name),/*#__PURE__*/React.createElement(\"div\",{className:\"filter position-relative has-icon-left\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",value:this.state.value,onChange:function onChange(e){return _this2.handleFilter(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:15})))),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Table,{className:\"table-hover-animation\",responsive:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,renderTableHead)),/*#__PURE__*/React.createElement(\"tbody\",null,renderTableBody))))):null,/*#__PURE__*/React.createElement(ToastContainer,null)));}}]);return Import;}(React.Component);export default Import;","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/extensions/import-export/Import.js"],"names":["React","ExtensionsHeader","Row","Col","Card","CardBody","Table","CardHeader","CardTitle","Input","XLSX","DownloadCloud","Search","useDropzone","toast","ToastContainer","Uploader","props","accept","onDrop","acceptedFiles","reader","FileReader","onload","fileData","result","wb","read","type","SheetNames","forEach","sheetName","rowObj","utils","sheet_to_row_object_array","Sheets","getTableData","name","length","readAsBinaryString","error","getRootProps","getInputProps","className","Import","state","tableData","filteredData","value","arr","setState","handleFilter","e","data","target","filter","col","keys","Object","startsWithCondition","key","toString","toLowerCase","startsWith","includesCondition","includes","headArr","map","index","dataArr","renderTableBody","renderTd","renderTableHead","head","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport ExtensionsHeader from \"../extensionsHeader\"\nimport {\n  Row,\n  Col,\n  Card,\n  CardBody,\n  Table,\n  CardHeader,\n  CardTitle,\n  Input\n} from \"reactstrap\"\nimport XLSX from \"xlsx\"\nimport { DownloadCloud, Search } from \"react-feather\"\nimport { useDropzone } from \"react-dropzone\"\nimport { toast, ToastContainer } from \"react-toastify\"\n\nimport \"react-toastify/dist/ReactToastify.css\"\nimport \"../../assets/scss/plugins/extensions/toastr.scss\"\nimport \"../../assets/scss/plugins/extensions/dropzone.scss\"\n\nfunction Uploader(props) {\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: \".xlsx, .xls, .csv\",\n    onDrop: acceptedFiles => {\n      var reader = new FileReader()\n      reader.onload = function() {\n        var fileData = reader.result\n        var wb = XLSX.read(fileData, { type: \"binary\" })\n\n        wb.SheetNames.forEach(function(sheetName) {\n          var rowObj = XLSX.utils.sheet_to_row_object_array(\n            wb.Sheets[sheetName]\n          )\n          props.getTableData(rowObj, acceptedFiles[0].name)\n        })\n      }\n      if (acceptedFiles.length) {\n        reader.readAsBinaryString(acceptedFiles[0])\n      } else {\n        toast.error(\"You can only upload .xlsx, .xls, .csv Files!\")\n      }\n    }\n  })\n  return (\n    <section className=\"pb-1\">\n      <div {...getRootProps({ className: \"dropzone py-3 flex-column\" })}>\n        <input {...getInputProps()} />\n        <DownloadCloud className=\"text-light\" size={50} />\n        <h4 className=\"mb-0 mt-2\">Drop Excel File or Browse</h4>\n      </div>\n    </section>\n  )\n}\n\nclass Import extends React.Component {\n  state = {\n    tableData: [],\n    filteredData: [],\n    value: \"\",\n    name: \"\"\n  }\n\n  getTableData = (arr, name) => {\n    this.setState({ tableData: arr, name })\n  }\n\n  handleFilter = e => {\n    let data = this.state.tableData\n    let filteredData = []\n    let value = e.target.value\n    this.setState({ value })\n\n    if (value.length) {\n      filteredData = data.filter(col => {\n        let keys = Object.keys(col)\n\n        let startsWithCondition = keys.filter(key => {\n          return col[key]\n            .toString()\n            .toLowerCase()\n            .startsWith(value.toLowerCase())\n        })\n\n        let includesCondition = keys.filter(key =>\n          col[key]\n            .toString()\n            .toLowerCase()\n            .includes(value.toLowerCase())\n        )\n\n        if (startsWithCondition.length) return col[startsWithCondition]\n        else if (!startsWithCondition && includesCondition.length)\n          return col[includesCondition]\n        else return null\n      })\n      this.setState({ value, filteredData })\n    } else {\n      return null\n    }\n  }\n\n  render() {\n    let headArr = this.state.tableData.length\n      ? this.state.tableData.map((col, index) => {\n          if (index === 0) return [...Object.keys(col)]\n          else return null\n        })\n      : []\n    let dataArr = this.state.value.length\n      ? this.state.filteredData\n      : this.state.tableData.length && !this.state.value.length\n      ? this.state.tableData\n      : null\n    let renderTableBody =\n      dataArr !== null && dataArr.length\n        ? dataArr.map((col, index) => {\n            let keys = Object.keys(col)\n            let renderTd = keys.map((key, index) => (\n              <td key={index}>{col[key]}</td>\n            ))\n            return <tr key={index}>{renderTd}</tr>\n          })\n        : null\n\n    let renderTableHead = headArr.length\n      ? headArr[0].map((head, index) => {\n          return <th key={index}>{head}</th>\n        })\n      : null\n\n    return (\n      <React.Fragment>\n        <ExtensionsHeader\n          title=\"XLSX\"\n          subTitle=\"Xlsx is a parser and writer for various spreadsheet formats\"\n          link=\"https://github.com/AdeleD/react-paginate\"\n        />\n        <Row className=\"import-component\">\n          <Col sm=\"12\">\n            <Card>\n              <CardBody>\n                <Row>\n                  <Col sm=\"12\">\n                    <Uploader getTableData={this.getTableData} />\n                  </Col>\n                </Row>\n              </CardBody>\n            </Card>\n          </Col>\n          {this.state.tableData.length ? (\n            <Col sm=\"12\">\n              <Card>\n                <CardHeader className=\"justify-content-between flex-wrap\">\n                  <CardTitle>{this.state.name}</CardTitle>\n                  <div className=\"filter position-relative has-icon-left\">\n                    <Input\n                      type=\"text\"\n                      value={this.state.value}\n                      onChange={e => this.handleFilter(e)}\n                    />\n                    <div className=\"form-control-position\">\n                      <Search size={15} />\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardBody>\n                  <Table className=\"table-hover-animation\" responsive>\n                    <thead>\n                      <tr>{renderTableHead}</tr>\n                    </thead>\n                    <tbody>{renderTableBody}</tbody>\n                  </Table>\n                </CardBody>\n              </Card>\n            </Col>\n          ) : null}\n          <ToastContainer />\n        </Row>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default Import\n"]},"metadata":{},"sourceType":"module"}