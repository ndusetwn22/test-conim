{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{FormGroup,Input,UncontrolledDropdown,DropdownToggle,DropdownItem,DropdownMenu,Media}from\"reactstrap\";import{Search,Check,Folder,Edit2,Info,Trash,Tag,Mail,Star,Menu}from\"react-feather\";import PerfectScrollbar from\"react-perfect-scrollbar\";import{connect}from\"react-redux\";import{getEmails,StarEmail,searchMail,moveMail,selectMail,selectAllMails,deselectAllMails,unreadMails,setLabel}from\"../../../redux/actions/email/index\";import Checkbox from\"../../../components/@vuexy/checkbox/CheckboxesVuexy\";import EmailDetails from\"./EmailDetails\";var EmailList=/*#__PURE__*/function(_React$Component){_inherits(EmailList,_React$Component);var _super=_createSuper(EmailList);function EmailList(){var _this;_classCallCheck(this,EmailList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={mails:[],emailDetailsVisibility:false,selectAll:false,currentEmail:[],value:\"\",currentFilter:_this.props.routerProps.match.params.filter};_this.handleEmailDetails=function(status,mail){if(status===\"open\")_this.setState({emailDetailsVisibility:true,currentEmail:mail});else _this.setState({emailDetailsVisibility:false});};_this.handleNextMail=function(){var mails=_this.state.mails;if(mails.length){var getIndex=mails.find(function(i){return i.id===_this.state.currentEmail.id;});var currentEmail=mails[mails.indexOf(getIndex)+1];if(currentEmail!==undefined){_this.setState({currentEmail:currentEmail});}}};_this.handlePreviousMail=function(){var mails=_this.state.mails;if(mails.length){var getIndex=mails.find(function(i){return i.id===_this.state.currentEmail.id;});var currentEmail=mails[mails.indexOf(getIndex)-1];if(currentEmail!==undefined){_this.setState({currentEmail:currentEmail});}}};_this.handleOnChange=function(e){_this.setState({value:e.target.value});_this.props.searchMail(e.target.value);};return _this;}_createClass(EmailList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.props.getEmails(this.props.routerProps.match.params);case 2:this.setState({mails:this.props.email.mails});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,mails=_this$state.mails,currentFilter=_this$state.currentFilter,value=_this$state.value;var mailsArr=value.length?this.props.email.filteredMails:mails;var renderMails=mailsArr.length>0?mailsArr.map(function(mail){return/*#__PURE__*/React.createElement(Media,{tag:\"li\",key:mail.id,className:mail.unread===false?\"mail-read\":\"mail-unread\",onClick:function onClick(){_this2.handleEmailDetails(\"open\",mail);}},/*#__PURE__*/React.createElement(Media,{className:\"pr-50\",tag:\"div\",left:true},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar\"},/*#__PURE__*/React.createElement(Media,{object:true,src:mail.img})),/*#__PURE__*/React.createElement(\"div\",{className:\"user-action\"},/*#__PURE__*/React.createElement(Checkbox,{color:\"primary\",className:\"user-checkbox\",icon:/*#__PURE__*/React.createElement(Check,{className:\"vx-icon\",size:12}),label:\"\",checked:_this2.props.email.selectedEmails.includes(mail.id),size:\"sm\",onClick:function onClick(e){_this2.props.selectMail(mail.id);e.stopPropagation();},onChange:function onChange(e){return e.stopPropagation();}}),/*#__PURE__*/React.createElement(\"div\",{className:\"favorite\"},/*#__PURE__*/React.createElement(Star,{size:18,fill:mail.isStarred?\"#FF9F43\":\"transparent\",stroke:mail.isStarred?\"#FF9F43\":\"#626262\",onClick:function onClick(e){_this2.props.StarEmail(mail.id);e.stopPropagation();}})))),/*#__PURE__*/React.createElement(Media,{body:true},/*#__PURE__*/React.createElement(\"div\",{className:\"user-details flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mail-items\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-bold-600 mb-25 \"},mail.sender_name),/*#__PURE__*/React.createElement(\"span\",{className:\"text-truncate\"},mail.subject)),/*#__PURE__*/React.createElement(\"div\",{className:\"mail-meta\"},/*#__PURE__*/React.createElement(\"span\",{className:\"float-right\"},Array.isArray(mail.labels)?/*#__PURE__*/React.createElement(React.Fragment,null,mail.labels.map(function(label){return/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-\".concat(label===\"important\"?\"warning\":label===\"personal\"?\"success\":label===\"private\"?\"danger\":\"primary\",\" bullet-sm d-none d-md-inline-block mr-1\"),key:label});})):/*#__PURE__*/React.createElement(\"span\",{className:\"bullet \".concat(mail.labels,\" bullet-sm mr-1\")}),/*#__PURE__*/React.createElement(\"span\",{className:\"mail-date\"},mail.day)))),/*#__PURE__*/React.createElement(\"div\",{className:\"mail-message\"},/*#__PURE__*/React.createElement(\"p\",{className:\"list-group-item-text truncate mb-0\"},mail.message))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"no-results show\"},/*#__PURE__*/React.createElement(\"h5\",null,\"No Items Found\"));return/*#__PURE__*/React.createElement(\"div\",{className:\"content-right\"},/*#__PURE__*/React.createElement(\"div\",{className:\"email-app-area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"email-app-list-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"email-app-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-fixed-search\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-lg-none sidebar-toggle\",onClick:function onClick(){return _this2.props.mainSidebar(true);}},/*#__PURE__*/React.createElement(Menu,{size:24})),/*#__PURE__*/React.createElement(FormGroup,{className:\"position-relative has-icon-left m-0 d-inline-block d-lg-block\"},/*#__PURE__*/React.createElement(Input,{placeholder:\"Search Emails\",onChange:function onChange(e){_this2.handleOnChange(e);},value:value}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:15})))),/*#__PURE__*/React.createElement(\"div\",{className:\"app-action\"},/*#__PURE__*/React.createElement(\"div\",{className:\"action-left\"},/*#__PURE__*/React.createElement(Checkbox,{color:\"primary\",icon:/*#__PURE__*/React.createElement(Check,{className:\"vx-icon\",size:16}),label:\"Select All\",checked:this.props.email.selectedEmails.length?true:false,onChange:function onChange(e){return e.stopPropagation();},onClick:function onClick(e){e.target.checked?_this2.props.selectAllMails():_this2.props.deselectAllMails();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"action-right\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"list-inline m-0\"},/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,null,/*#__PURE__*/React.createElement(DropdownToggle,{tag:\"div\"},/*#__PURE__*/React.createElement(Folder,{size:22})),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){if(currentFilter===\"inbox\")_this2.props.moveMail(\"draft\");else _this2.props.moveMail(\"inbox\");}},/*#__PURE__*/React.createElement(Edit2,{size:18,className:\"mr-50\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle font-medium-1\"},currentFilter===\"inbox\"?\"Draft\":\"Inbox\")),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){_this2.props.moveMail(\"spam\");}},/*#__PURE__*/React.createElement(Info,{size:18,className:\"mr-50\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle font-medium-1\"},\"Spam\")),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){_this2.props.moveMail(\"trash\");}},/*#__PURE__*/React.createElement(Trash,{size:18,className:\"mr-50\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle font-medium-1\"},\"Trash\"))))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,null,/*#__PURE__*/React.createElement(DropdownToggle,{tag:\"div\"},/*#__PURE__*/React.createElement(Tag,{size:22})),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{className:\"font-medium-1\",onClick:function onClick(){return _this2.props.setLabel(\"personal\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-success bullet-sm mr-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Personal\")),/*#__PURE__*/React.createElement(DropdownItem,{className:\"font-medium-1\",onClick:function onClick(){return _this2.props.setLabel(\"company\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-primary bullet-sm mr-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Company\")),/*#__PURE__*/React.createElement(DropdownItem,{className:\"font-medium-1\",onClick:function onClick(){return _this2.props.setLabel(\"important\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-warning bullet-sm mr-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Important\")),/*#__PURE__*/React.createElement(DropdownItem,{className:\"font-medium-1\",onClick:function onClick(){return _this2.props.setLabel(\"private\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-danger bullet-sm mr-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Private\"))))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item mail-unread\",onClick:function onClick(){return _this2.props.unreadMails(true);}},/*#__PURE__*/React.createElement(\"span\",{className:\"action-icon\"},/*#__PURE__*/React.createElement(Mail,{size:22}))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item mail-delete\",onClick:function onClick(){_this2.props.moveMail(\"trash\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"action-icon\"},/*#__PURE__*/React.createElement(Trash,{size:22})))))),/*#__PURE__*/React.createElement(PerfectScrollbar,{className:\"email-user-list list-group\",options:{wheelPropagation:false}},/*#__PURE__*/React.createElement(\"ul\",{className:\"users-list-wrapper media-list\"},renderMails)))),/*#__PURE__*/React.createElement(EmailDetails,{handleEmailDetails:this.handleEmailDetails,currentStatus:this.state.emailDetailsVisibility,currentEmail:this.state.currentEmail,toggleStarred:this.props.StarEmail,setLabel:this.props.setLabel,unreadMails:this.props.unreadMails,currentParam:this.props.routerProps.match.params,moveMail:this.props.moveMail,handleNextMail:this.handleNextMail,handlePreviousMail:this.handlePreviousMail})));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.email.params!==state.currentFilter){return{mails:props.email.mails};}// Return null if the state hasn't changed\nreturn null;}}]);return EmailList;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{email:state.emailApp.mails,starred:state.emailApp.starred};};export default connect(mapStateToProps,{getEmails:getEmails,StarEmail:StarEmail,searchMail:searchMail,moveMail:moveMail,selectMail:selectMail,selectAllMails:selectAllMails,deselectAllMails:deselectAllMails,unreadMails:unreadMails,setLabel:setLabel})(EmailList);","map":{"version":3,"sources":["/Users/pandusetiawan/Documents/react/df-v1.2/src/views/apps/email/EmailList.js"],"names":["React","FormGroup","Input","UncontrolledDropdown","DropdownToggle","DropdownItem","DropdownMenu","Media","Search","Check","Folder","Edit2","Info","Trash","Tag","Mail","Star","Menu","PerfectScrollbar","connect","getEmails","StarEmail","searchMail","moveMail","selectMail","selectAllMails","deselectAllMails","unreadMails","setLabel","Checkbox","EmailDetails","EmailList","state","mails","emailDetailsVisibility","selectAll","currentEmail","value","currentFilter","props","routerProps","match","params","filter","handleEmailDetails","status","mail","setState","handleNextMail","length","getIndex","find","i","id","indexOf","undefined","handlePreviousMail","handleOnChange","e","target","email","mailsArr","filteredMails","renderMails","map","unread","img","selectedEmails","includes","stopPropagation","isStarred","sender_name","subject","Array","isArray","labels","label","day","message","mainSidebar","checked","wheelPropagation","Component","mapStateToProps","emailApp","starred"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {\n  FormGroup,\n  Input,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownItem,\n  DropdownMenu,\n  Media\n} from \"reactstrap\"\nimport {\n  Search,\n  Check,\n  Folder,\n  Edit2,\n  Info,\n  Trash,\n  Tag,\n  Mail,\n  Star,\n  Menu\n} from \"react-feather\"\nimport PerfectScrollbar from \"react-perfect-scrollbar\"\nimport { connect } from \"react-redux\"\nimport {\n  getEmails,\n  StarEmail,\n  searchMail,\n  moveMail,\n  selectMail,\n  selectAllMails,\n  deselectAllMails,\n  unreadMails,\n  setLabel\n} from \"../../../redux/actions/email/index\"\nimport Checkbox from \"../../../components/@vuexy/checkbox/CheckboxesVuexy\"\nimport EmailDetails from \"./EmailDetails\"\n\nclass EmailList extends React.Component {\n  static getDerivedStateFromProps(props, state) {\n    if (props.email.params !== state.currentFilter) {\n      return {\n        mails: props.email.mails\n      }\n    }\n    // Return null if the state hasn't changed\n    return null\n  }\n  state = {\n    mails: [],\n    emailDetailsVisibility: false,\n    selectAll: false,\n    currentEmail: [],\n    value: \"\",\n    currentFilter: this.props.routerProps.match.params.filter\n  }\n\n  async componentDidMount() {\n    await this.props.getEmails(this.props.routerProps.match.params)\n    this.setState({\n      mails: this.props.email.mails\n    })\n  }\n\n  handleEmailDetails = (status, mail) => {\n    if (status === \"open\")\n      this.setState({ emailDetailsVisibility: true, currentEmail: mail })\n    else this.setState({ emailDetailsVisibility: false })\n  }\n\n  handleNextMail = () => {\n    let mails = this.state.mails\n    if (mails.length) {\n      let getIndex = mails.find(i => i.id === this.state.currentEmail.id)\n      let currentEmail = mails[mails.indexOf(getIndex) + 1]\n\n      if (currentEmail !== undefined) {\n        this.setState({ currentEmail })\n      }\n    }\n  }\n\n  handlePreviousMail = () => {\n    let mails = this.state.mails\n    if (mails.length) {\n      let getIndex = mails.find(i => i.id === this.state.currentEmail.id)\n      let currentEmail = mails[mails.indexOf(getIndex) - 1]\n\n      if (currentEmail !== undefined) {\n        this.setState({ currentEmail })\n      }\n    }\n  }\n\n  handleOnChange = e => {\n    this.setState({ value: e.target.value })\n    this.props.searchMail(e.target.value)\n  }\n\n  render() {\n    const { mails, currentFilter, value } = this.state\n    const mailsArr = value.length ? this.props.email.filteredMails : mails\n    const renderMails =\n      mailsArr.length > 0 ? (\n        mailsArr.map(mail => {\n          return (\n            <Media\n              tag=\"li\"\n              key={mail.id}\n              className={mail.unread === false ? \"mail-read\" : \"mail-unread\"}\n              onClick={() => {\n                this.handleEmailDetails(\"open\", mail)\n              }}\n            >\n              <Media className=\"pr-50\" tag=\"div\" left>\n                <div className=\"avatar\">\n                  <Media object src={mail.img} />\n                </div>\n                <div className=\"user-action\">\n                  <Checkbox\n                    color=\"primary\"\n                    className=\"user-checkbox\"\n                    icon={<Check className=\"vx-icon\" size={12} />}\n                    label={\"\"}\n                    checked={this.props.email.selectedEmails.includes(mail.id)}\n                    size=\"sm\"\n                    onClick={e => {\n                      this.props.selectMail(mail.id)\n                      e.stopPropagation()\n                    }}\n                    onChange={e => e.stopPropagation()}\n                  />\n                  <div className=\"favorite\">\n                    <Star\n                      size={18}\n                      fill={mail.isStarred ? \"#FF9F43\" : \"transparent\"}\n                      stroke={mail.isStarred ? \"#FF9F43\" : \"#626262\"}\n                      onClick={e => {\n                        this.props.StarEmail(mail.id)\n                        e.stopPropagation()\n                      }}\n                    />\n                  </div>\n                </div>\n              </Media>\n              <Media body>\n                <div className=\"user-details flex-wrap\">\n                  <div className=\"mail-items\">\n                    <h5 className=\"text-bold-600 mb-25 \">{mail.sender_name}</h5>\n                    <span className=\"text-truncate\">{mail.subject}</span>\n                  </div>\n                  <div className=\"mail-meta\">\n                    <span className=\"float-right\">\n                      {Array.isArray(mail.labels) ? (\n                        <React.Fragment>\n                          {mail.labels.map(label => {\n                            return (\n                              <span\n                                className={`bullet bullet-${\n                                  label === \"important\"\n                                    ? \"warning\"\n                                    : label === \"personal\"\n                                    ? \"success\"\n                                    : label === \"private\"\n                                    ? \"danger\"\n                                    : \"primary\"\n                                } bullet-sm d-none d-md-inline-block mr-1`}\n                                key={label}\n                              />\n                            )\n                          })}\n                        </React.Fragment>\n                      ) : (\n                        <span\n                          className={`bullet ${mail.labels} bullet-sm mr-1`}\n                        />\n                      )}\n                      <span className=\"mail-date\">{mail.day}</span>\n                    </span>\n                  </div>\n                </div>\n                <div className=\"mail-message\">\n                  <p className=\"list-group-item-text truncate mb-0\">\n                    {mail.message}\n                  </p>\n                </div>\n              </Media>\n            </Media>\n          )\n        })\n      ) : (\n        <div className=\"no-results show\">\n          <h5>No Items Found</h5>\n        </div>\n      )\n\n    return (\n      <div className=\"content-right\">\n        <div className=\"email-app-area\">\n          <div className=\"email-app-list-wrapper\">\n            <div className=\"email-app-list\">\n              <div className=\"app-fixed-search\">\n                <div\n                  className=\"d-lg-none sidebar-toggle\"\n                  onClick={() => this.props.mainSidebar(true)}\n                >\n                  <Menu size={24} />\n                </div>\n                <FormGroup className=\"position-relative has-icon-left m-0 d-inline-block d-lg-block\">\n                  <Input\n                    placeholder=\"Search Emails\"\n                    onChange={e => {\n                      this.handleOnChange(e)\n                    }}\n                    value={value}\n                  />\n                  <div className=\"form-control-position\">\n                    <Search size={15} />\n                  </div>\n                </FormGroup>\n              </div>\n              <div className=\"app-action\">\n                <div className=\"action-left\">\n                  <Checkbox\n                    color=\"primary\"\n                    icon={<Check className=\"vx-icon\" size={16} />}\n                    label=\"Select All\"\n                    checked={\n                      this.props.email.selectedEmails.length ? true : false\n                    }\n                    onChange={e => e.stopPropagation()}\n                    onClick={e => {\n                      e.target.checked\n                        ? this.props.selectAllMails()\n                        : this.props.deselectAllMails()\n                    }}\n                  />\n                </div>\n                <div className=\"action-right\">\n                  <ul className=\"list-inline m-0\">\n                    <li className=\"list-inline-item\">\n                      <UncontrolledDropdown>\n                        <DropdownToggle tag=\"div\">\n                          <Folder size={22} />\n                        </DropdownToggle>\n                        <DropdownMenu right>\n                          <DropdownItem\n                            onClick={() => {\n                              if (currentFilter === \"inbox\")\n                                this.props.moveMail(\"draft\")\n                              else this.props.moveMail(\"inbox\")\n                            }}\n                          >\n                            <Edit2 size={18} className=\"mr-50\" />\n                            <span className=\"align-middle font-medium-1\">\n                              {currentFilter === \"inbox\" ? \"Draft\" : \"Inbox\"}\n                            </span>\n                          </DropdownItem>\n                          <DropdownItem\n                            onClick={() => {\n                              this.props.moveMail(\"spam\")\n                            }}\n                          >\n                            <Info size={18} className=\"mr-50\" />\n                            <span className=\"align-middle font-medium-1\">\n                              Spam\n                            </span>\n                          </DropdownItem>\n                          <DropdownItem\n                            onClick={() => {\n                              this.props.moveMail(\"trash\")\n                            }}\n                          >\n                            <Trash size={18} className=\"mr-50\" />\n                            <span className=\"align-middle font-medium-1\">\n                              Trash\n                            </span>\n                          </DropdownItem>\n                        </DropdownMenu>\n                      </UncontrolledDropdown>\n                    </li>\n                    <li className=\"list-inline-item\">\n                      <UncontrolledDropdown>\n                        <DropdownToggle tag=\"div\">\n                          <Tag size={22} />\n                        </DropdownToggle>\n                        <DropdownMenu right>\n                          <DropdownItem\n                            className=\"font-medium-1\"\n                            onClick={() => this.props.setLabel(\"personal\")}\n                          >\n                            <span className=\"bullet bullet-success bullet-sm mr-1\" />\n                            <span className=\"align-middle\">Personal</span>\n                          </DropdownItem>\n                          <DropdownItem\n                            className=\"font-medium-1\"\n                            onClick={() => this.props.setLabel(\"company\")}\n                          >\n                            <span className=\"bullet bullet-primary bullet-sm mr-1\" />\n                            <span className=\"align-middle\">Company</span>\n                          </DropdownItem>\n                          <DropdownItem\n                            className=\"font-medium-1\"\n                            onClick={() => this.props.setLabel(\"important\")}\n                          >\n                            <span className=\"bullet bullet-warning bullet-sm mr-1\" />\n                            <span className=\"align-middle\">Important</span>\n                          </DropdownItem>\n                          <DropdownItem\n                            className=\"font-medium-1\"\n                            onClick={() => this.props.setLabel(\"private\")}\n                          >\n                            <span className=\"bullet bullet-danger bullet-sm mr-1\" />\n                            <span className=\"align-middle\">Private</span>\n                          </DropdownItem>\n                        </DropdownMenu>\n                      </UncontrolledDropdown>\n                    </li>\n                    <li\n                      className=\"list-inline-item mail-unread\"\n                      onClick={() => this.props.unreadMails(true)}\n                    >\n                      <span className=\"action-icon\">\n                        <Mail size={22} />\n                      </span>\n                    </li>\n                    <li\n                      className=\"list-inline-item mail-delete\"\n                      onClick={() => {\n                        this.props.moveMail(\"trash\")\n                      }}\n                    >\n                      <span className=\"action-icon\">\n                        <Trash size={22} />\n                      </span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n              <PerfectScrollbar\n                className=\"email-user-list list-group\"\n                options={{\n                  wheelPropagation: false\n                }}\n              >\n                <ul className=\"users-list-wrapper media-list\">{renderMails}</ul>\n              </PerfectScrollbar>\n            </div>\n          </div>\n          <EmailDetails\n            handleEmailDetails={this.handleEmailDetails}\n            currentStatus={this.state.emailDetailsVisibility}\n            currentEmail={this.state.currentEmail}\n            toggleStarred={this.props.StarEmail}\n            setLabel={this.props.setLabel}\n            unreadMails={this.props.unreadMails}\n            currentParam={this.props.routerProps.match.params}\n            moveMail={this.props.moveMail}\n            handleNextMail={this.handleNextMail}\n            handlePreviousMail={this.handlePreviousMail}\n          />\n        </div>\n      </div>\n    )\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    email: state.emailApp.mails,\n    starred: state.emailApp.starred\n  }\n}\nexport default connect(mapStateToProps, {\n  getEmails,\n  StarEmail,\n  searchMail,\n  moveMail,\n  selectMail,\n  selectAllMails,\n  deselectAllMails,\n  unreadMails,\n  setLabel\n})(EmailList)\n"]},"metadata":{},"sourceType":"module"}