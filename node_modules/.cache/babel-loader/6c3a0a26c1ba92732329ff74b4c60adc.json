{"ast":null,"code":"import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Button,Progress,UncontrolledDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input}from\"reactstrap\";import DataTable from\"react-data-table-component\";import classnames from\"classnames\";import ReactPaginate from\"react-paginate\";import{history}from\"../../../history\";import{Edit,Trash,ChevronDown,Plus,Check,ChevronLeft,ChevronRight}from\"react-feather\";import{connect}from\"react-redux\";import{getData,getInitialData,deleteData,updateData,addData,filterData}from\"../../../redux/actions/data-list/\";import Sidebar from\"./DataListSidebar\";import Chip from\"../../../components/@vuexy/chips/ChipComponent\";import Checkbox from\"../../../components/@vuexy/checkbox/CheckboxesVuexy\";import\"../../../assets/scss/plugins/extensions/react-paginate.scss\";import\"../../../assets/scss/pages/data-list.scss\";var chipColors={\"on hold\":\"warning\",delivered:\"success\",pending:\"primary\",canceled:\"danger\"};var selectedStyle={rows:{selectedHighlighStyle:{backgroundColor:\"rgba(115,103,240,.05)\",color:\"#7367F0 !important\",boxShadow:\"0 0 1px 0 #7367F0 !important\",\"&:hover\":{transform:\"translateY(0px) !important\"}}}};var ActionsComponent=function ActionsComponent(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-action\"},/*#__PURE__*/React.createElement(Edit,{className:\"cursor-pointer mr-1\",size:20,onClick:function onClick(){return props.currentData(props.row);}}),/*#__PURE__*/React.createElement(Trash,{className:\"cursor-pointer\",size:20,onClick:function onClick(){props.deleteRow(props.row);}}));};var CustomHeader=function CustomHeader(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list-header d-flex justify-content-between flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"actions-left d-flex flex-wrap\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"data-list-dropdown mr-1\"},/*#__PURE__*/React.createElement(DropdownToggle,{className:\"p-1\",color:\"primary\"},/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle mr-1\"},\"Actions\"),/*#__PURE__*/React.createElement(ChevronDown,{size:15})),/*#__PURE__*/React.createElement(DropdownMenu,{tag:\"div\",right:true},/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\"},\"Delete\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\"},\"Archive\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\"},\"Print\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\"},\"Export\"))),/*#__PURE__*/React.createElement(Button,{className:\"add-new-btn\",color:\"primary\",onClick:function onClick(){return props.handleSidebar(true,true);},outline:true},/*#__PURE__*/React.createElement(Plus,{size:15}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Add New\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"actions-right d-flex flex-wrap mt-sm-0 mt-2\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"data-list-rows-dropdown mr-1 d-md-block d-none\"},/*#__PURE__*/React.createElement(DropdownToggle,{color:\"\",className:\"sort-dropdown\"},/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle mx-50\"},\"\".concat(props.index[0],\" - \").concat(props.index[1],\" of \").concat(props.total)),/*#__PURE__*/React.createElement(ChevronDown,{size:15})),/*#__PURE__*/React.createElement(DropdownMenu,{tag:\"div\",right:true},/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\",onClick:function onClick(){return props.handleRowsPerPage(4);}},\"4\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\",onClick:function onClick(){return props.handleRowsPerPage(10);}},\"10\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\",onClick:function onClick(){return props.handleRowsPerPage(15);}},\"15\"),/*#__PURE__*/React.createElement(DropdownItem,{tag:\"a\",onClick:function onClick(){return props.handleRowsPerPage(20);}},\"20\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"filter-section\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",onChange:function onChange(e){return props.handleFilter(e);}}))));};var DataListConfig=/*#__PURE__*/function(_Component){_inherits(DataListConfig,_Component);var _super=_createSuper(DataListConfig);function DataListConfig(){var _this;_classCallCheck(this,DataListConfig);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],totalPages:0,currentPage:0,columns:[{name:\"Name\",selector:\"name\",sortable:true,minWidth:\"300px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"p\",{title:row.name,className:\"text-truncate text-bold-500 mb-0\"},row.name);}},{name:\"Category\",selector:\"category\",sortable:true},{name:\"Popularity\",selector:\"popularity\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(Progress,{className:\"w-100 mb-0\",color:row.popularity.color,value:row.popularity.popValue});}},{name:\"Order Status\",selector:\"order_status\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(Chip,{className:\"m-0\",color:chipColors[row.order_status],text:row.order_status});}},{name:\"Price\",selector:\"price\",sortable:true,cell:function cell(row){return\"$\".concat(row.price);}},{name:\"Actions\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(ActionsComponent,{row:row,getData:_this.props.getData,parsedFilter:_this.props.parsedFilter,currentData:_this.handleCurrentData,deleteRow:_this.handleDelete});}}],allData:[],value:\"\",rowsPerPage:4,sidebar:false,currentData:null,selected:[],totalRecords:0,sortIndex:[],addNew:\"\"};_this.thumbView=_this.props.thumbView;_this.handleFilter=function(e){_this.setState({value:e.target.value});_this.props.filterData(e.target.value);};_this.handleRowsPerPage=function(value){var _this$props=_this.props,parsedFilter=_this$props.parsedFilter,getData=_this$props.getData;var page=parsedFilter.page!==undefined?parsedFilter.page:1;history.push(\"/data-list/list-view?page=\".concat(page,\"&perPage=\").concat(value));_this.setState({rowsPerPage:value});getData({page:parsedFilter.page,perPage:value});};_this.handleSidebar=function(boolean){var addNew=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_this.setState({sidebar:boolean});if(addNew===true)_this.setState({currentData:null,addNew:true});};_this.handleDelete=function(row){_this.props.deleteData(row);_this.props.getData(_this.props.parsedFilter);if(_this.state.data.length-1===0){var urlPrefix=_this.props.thumbView?\"/data-list/thumb-view/\":\"/data-list/list-view/\";history.push(\"\".concat(urlPrefix,\"list-view?page=\").concat(parseInt(_this.props.parsedFilter.page-1),\"&perPage=\").concat(_this.props.parsedFilter.perPage));_this.props.getData({page:_this.props.parsedFilter.page-1,perPage:_this.props.parsedFilter.perPage});}};_this.handleCurrentData=function(obj){_this.setState({currentData:obj});_this.handleSidebar(true);};_this.handlePagination=function(page){var _this$props2=_this.props,parsedFilter=_this$props2.parsedFilter,getData=_this$props2.getData;var perPage=parsedFilter.perPage!==undefined?parsedFilter.perPage:4;var urlPrefix=_this.props.thumbView?\"/data-list/thumb-view/\":\"/data-list/list-view/\";history.push(\"\".concat(urlPrefix,\"list-view?page=\").concat(page.selected+1,\"&perPage=\").concat(perPage));getData({page:page.selected+1,perPage:perPage});_this.setState({currentPage:page.selected});};return _this;}_createClass(DataListConfig,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.getData(this.props.parsedFilter);this.props.getInitialData();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this2=this;if(this.thumbView){this.thumbView=false;var columns=[{name:\"Image\",selector:\"img\",minWidth:\"220px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"img\",{src:row.img,height:\"100\",alt:row.name});}},{name:\"Name\",selector:\"name\",sortable:true,minWidth:\"250px\",cell:function cell(row){return/*#__PURE__*/React.createElement(\"p\",{title:row.name,className:\"text-truncate text-bold-500 mb-0\"},row.name);}},{name:\"Category\",selector:\"category\",sortable:true},{name:\"Popularity\",selector:\"popularity\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(Progress,{className:\"w-100 mb-0\",color:row.popularity.color,value:row.popularity.popValue});}},{name:\"Order Status\",selector:\"order_status\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(Chip,{className:\"m-0\",color:chipColors[row.order_status],text:row.order_status});}},{name:\"Price\",selector:\"price\",sortable:true,cell:function cell(row){return\"$\".concat(row.price);}},{name:\"Actions\",sortable:true,cell:function cell(row){return/*#__PURE__*/React.createElement(ActionsComponent,{row:row,getData:_this2.props.getData,parsedFilter:_this2.props.parsedFilter,currentData:_this2.handleCurrentData,deleteRow:_this2.handleDelete});}}];this.setState({columns:columns});}}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,columns=_this$state.columns,data=_this$state.data,allData=_this$state.allData,totalPages=_this$state.totalPages,value=_this$state.value,rowsPerPage=_this$state.rowsPerPage,currentData=_this$state.currentData,sidebar=_this$state.sidebar,totalRecords=_this$state.totalRecords,sortIndex=_this$state.sortIndex;return/*#__PURE__*/React.createElement(\"div\",{className:\"data-list \".concat(this.props.thumbView?\"thumb-view\":\"list-view\")},/*#__PURE__*/React.createElement(DataTable,{columns:columns,data:value.length?allData:data,pagination:true,paginationServer:true,paginationComponent:function paginationComponent(){return/*#__PURE__*/React.createElement(ReactPaginate,{previousLabel:/*#__PURE__*/React.createElement(ChevronLeft,{size:15}),nextLabel:/*#__PURE__*/React.createElement(ChevronRight,{size:15}),breakLabel:\"...\",breakClassName:\"break-me\",pageCount:totalPages,containerClassName:\"vx-pagination separated-pagination pagination-end pagination-sm mb-0 mt-2\",activeClassName:\"active\",forcePage:_this3.props.parsedFilter.page?parseInt(_this3.props.parsedFilter.page-1):0,onPageChange:function onPageChange(page){return _this3.handlePagination(page);}});},noHeader:true,subHeader:true,selectableRows:true,responsive:true,pointerOnHover:true,selectableRowsHighlight:true,onSelectedRowsChange:function onSelectedRowsChange(data){return _this3.setState({selected:data.selectedRows});},customStyles:selectedStyle,subHeaderComponent:/*#__PURE__*/React.createElement(CustomHeader,{handleSidebar:this.handleSidebar,handleFilter:this.handleFilter,handleRowsPerPage:this.handleRowsPerPage,rowsPerPage:rowsPerPage,total:totalRecords,index:sortIndex}),sortIcon:/*#__PURE__*/React.createElement(ChevronDown,null),selectableRowsComponent:Checkbox,selectableRowsComponentProps:{color:\"primary\",icon:/*#__PURE__*/React.createElement(Check,{className:\"vx-icon\",size:12}),label:\"\",size:\"sm\"}}),/*#__PURE__*/React.createElement(Sidebar,{show:sidebar,data:currentData,updateData:this.props.updateData,addData:this.props.addData,handleSidebar:this.handleSidebar,thumbView:this.props.thumbView,getData:this.props.getData,dataParams:this.props.parsedFilter,addNew:this.state.addNew}),/*#__PURE__*/React.createElement(\"div\",{className:classnames(\"data-list-overlay\",{show:sidebar}),onClick:function onClick(){return _this3.handleSidebar(false,true);}}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.dataList.data.length!==state.data.length||state.currentPage!==props.parsedFilter.page){return{data:props.dataList.data,allData:props.dataList.filteredData,totalPages:props.dataList.totalPages,currentPage:parseInt(props.parsedFilter.page)-1,rowsPerPage:parseInt(props.parsedFilter.perPage),totalRecords:props.dataList.totalRecords,sortIndex:props.dataList.sortIndex};}// Return null if the state hasn't changed\nreturn null;}}]);return DataListConfig;}(Component);var mapStateToProps=function mapStateToProps(state){return{dataList:state.dataList};};export default connect(mapStateToProps,{getData:getData,deleteData:deleteData,updateData:updateData,addData:addData,getInitialData:getInitialData,filterData:filterData})(DataListConfig);","map":null,"metadata":{},"sourceType":"module"}