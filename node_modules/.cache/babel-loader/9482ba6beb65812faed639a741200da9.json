{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pandusetiawan/Documents/react/df-v1.3 backup build/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{FormGroup,Input,UncontrolledDropdown,DropdownToggle,DropdownItem,DropdownMenu,Media}from\"reactstrap\";import{Search,Check,Folder,Edit2,Info,Trash,Tag,Mail,Star,Menu}from\"react-feather\";import PerfectScrollbar from\"react-perfect-scrollbar\";import{connect}from\"react-redux\";import{getEmails,StarEmail,searchMail,moveMail,selectMail,selectAllMails,deselectAllMails,unreadMails,setLabel}from\"../../../redux/actions/email/index\";import Checkbox from\"../../../components/@vuexy/checkbox/CheckboxesVuexy\";import EmailDetails from\"./EmailDetails\";var EmailList=/*#__PURE__*/function(_React$Component){_inherits(EmailList,_React$Component);var _super=_createSuper(EmailList);function EmailList(){var _this;_classCallCheck(this,EmailList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={mails:[],emailDetailsVisibility:false,selectAll:false,currentEmail:[],value:\"\",currentFilter:_this.props.routerProps.match.params.filter};_this.handleEmailDetails=function(status,mail){if(status===\"open\")_this.setState({emailDetailsVisibility:true,currentEmail:mail});else _this.setState({emailDetailsVisibility:false});};_this.handleNextMail=function(){var mails=_this.state.mails;if(mails.length){var getIndex=mails.find(function(i){return i.id===_this.state.currentEmail.id;});var currentEmail=mails[mails.indexOf(getIndex)+1];if(currentEmail!==undefined){_this.setState({currentEmail:currentEmail});}}};_this.handlePreviousMail=function(){var mails=_this.state.mails;if(mails.length){var getIndex=mails.find(function(i){return i.id===_this.state.currentEmail.id;});var currentEmail=mails[mails.indexOf(getIndex)-1];if(currentEmail!==undefined){_this.setState({currentEmail:currentEmail});}}};_this.handleOnChange=function(e){_this.setState({value:e.target.value});_this.props.searchMail(e.target.value);};return _this;}_createClass(EmailList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.props.getEmails(this.props.routerProps.match.params);case 2:this.setState({mails:this.props.email.mails});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,mails=_this$state.mails,currentFilter=_this$state.currentFilter,value=_this$state.value;var mailsArr=value.length?this.props.email.filteredMails:mails;var renderMails=mailsArr.length>0?mailsArr.map(function(mail){return/*#__PURE__*/React.createElement(Media,{tag:\"li\",key:mail.id,className:mail.unread===false?\"mail-read\":\"mail-unread\",onClick:function onClick(){_this2.handleEmailDetails(\"open\",mail);}},/*#__PURE__*/React.createElement(Media,{className:\"pr-50\",tag:\"div\",left:true},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar\"},/*#__PURE__*/React.createElement(Media,{object:true,src:mail.img})),/*#__PURE__*/React.createElement(\"div\",{className:\"user-action\"},/*#__PURE__*/React.createElement(Checkbox,{color:\"primary\",className:\"user-checkbox\",icon:/*#__PURE__*/React.createElement(Check,{className:\"vx-icon\",size:12}),label:\"\",checked:_this2.props.email.selectedEmails.includes(mail.id),size:\"sm\",onClick:function onClick(e){_this2.props.selectMail(mail.id);e.stopPropagation();},onChange:function onChange(e){return e.stopPropagation();}}),/*#__PURE__*/React.createElement(\"div\",{className:\"favorite\"},/*#__PURE__*/React.createElement(Star,{size:18,fill:mail.isStarred?\"#FF9F43\":\"transparent\",stroke:mail.isStarred?\"#FF9F43\":\"#626262\",onClick:function onClick(e){_this2.props.StarEmail(mail.id);e.stopPropagation();}})))),/*#__PURE__*/React.createElement(Media,{body:true},/*#__PURE__*/React.createElement(\"div\",{className:\"user-details flex-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mail-items\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-bold-600 mb-25 \"},mail.sender_name),/*#__PURE__*/React.createElement(\"span\",{className:\"text-truncate\"},mail.subject)),/*#__PURE__*/React.createElement(\"div\",{className:\"mail-meta\"},/*#__PURE__*/React.createElement(\"span\",{className:\"float-right\"},Array.isArray(mail.labels)?/*#__PURE__*/React.createElement(React.Fragment,null,mail.labels.map(function(label){return/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-\".concat(label===\"important\"?\"warning\":label===\"personal\"?\"success\":label===\"private\"?\"danger\":\"primary\",\" bullet-sm d-none d-md-inline-block mr-1\"),key:label});})):/*#__PURE__*/React.createElement(\"span\",{className:\"bullet \".concat(mail.labels,\" bullet-sm mr-1\")}),/*#__PURE__*/React.createElement(\"span\",{className:\"mail-date\"},mail.day)))),/*#__PURE__*/React.createElement(\"div\",{className:\"mail-message\"},/*#__PURE__*/React.createElement(\"p\",{className:\"list-group-item-text truncate mb-0\"},mail.message))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"no-results show\"},/*#__PURE__*/React.createElement(\"h5\",null,\"No Items Found\"));return/*#__PURE__*/React.createElement(\"div\",{className:\"content-right\"},/*#__PURE__*/React.createElement(\"div\",{className:\"email-app-area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"email-app-list-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"email-app-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-fixed-search\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-lg-none sidebar-toggle\",onClick:function onClick(){return _this2.props.mainSidebar(true);}},/*#__PURE__*/React.createElement(Menu,{size:24})),/*#__PURE__*/React.createElement(FormGroup,{className:\"position-relative has-icon-left m-0 d-inline-block d-lg-block\"},/*#__PURE__*/React.createElement(Input,{placeholder:\"Search Emails\",onChange:function onChange(e){_this2.handleOnChange(e);},value:value}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-control-position\"},/*#__PURE__*/React.createElement(Search,{size:15})))),/*#__PURE__*/React.createElement(\"div\",{className:\"app-action\"},/*#__PURE__*/React.createElement(\"div\",{className:\"action-left\"},/*#__PURE__*/React.createElement(Checkbox,{color:\"primary\",icon:/*#__PURE__*/React.createElement(Check,{className:\"vx-icon\",size:16}),label:\"Select All\",checked:this.props.email.selectedEmails.length?true:false,onChange:function onChange(e){return e.stopPropagation();},onClick:function onClick(e){e.target.checked?_this2.props.selectAllMails():_this2.props.deselectAllMails();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"action-right\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"list-inline m-0\"},/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,null,/*#__PURE__*/React.createElement(DropdownToggle,{tag:\"div\"},/*#__PURE__*/React.createElement(Folder,{size:22})),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){if(currentFilter===\"inbox\")_this2.props.moveMail(\"draft\");else _this2.props.moveMail(\"inbox\");}},/*#__PURE__*/React.createElement(Edit2,{size:18,className:\"mr-50\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle font-medium-1\"},currentFilter===\"inbox\"?\"Draft\":\"Inbox\")),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){_this2.props.moveMail(\"spam\");}},/*#__PURE__*/React.createElement(Info,{size:18,className:\"mr-50\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle font-medium-1\"},\"Spam\")),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){_this2.props.moveMail(\"trash\");}},/*#__PURE__*/React.createElement(Trash,{size:18,className:\"mr-50\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle font-medium-1\"},\"Trash\"))))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,null,/*#__PURE__*/React.createElement(DropdownToggle,{tag:\"div\"},/*#__PURE__*/React.createElement(Tag,{size:22})),/*#__PURE__*/React.createElement(DropdownMenu,{right:true},/*#__PURE__*/React.createElement(DropdownItem,{className:\"font-medium-1\",onClick:function onClick(){return _this2.props.setLabel(\"personal\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-success bullet-sm mr-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Personal\")),/*#__PURE__*/React.createElement(DropdownItem,{className:\"font-medium-1\",onClick:function onClick(){return _this2.props.setLabel(\"company\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-primary bullet-sm mr-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Company\")),/*#__PURE__*/React.createElement(DropdownItem,{className:\"font-medium-1\",onClick:function onClick(){return _this2.props.setLabel(\"important\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-warning bullet-sm mr-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Important\")),/*#__PURE__*/React.createElement(DropdownItem,{className:\"font-medium-1\",onClick:function onClick(){return _this2.props.setLabel(\"private\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"bullet bullet-danger bullet-sm mr-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"align-middle\"},\"Private\"))))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item mail-unread\",onClick:function onClick(){return _this2.props.unreadMails(true);}},/*#__PURE__*/React.createElement(\"span\",{className:\"action-icon\"},/*#__PURE__*/React.createElement(Mail,{size:22}))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item mail-delete\",onClick:function onClick(){_this2.props.moveMail(\"trash\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"action-icon\"},/*#__PURE__*/React.createElement(Trash,{size:22})))))),/*#__PURE__*/React.createElement(PerfectScrollbar,{className:\"email-user-list list-group\",options:{wheelPropagation:false}},/*#__PURE__*/React.createElement(\"ul\",{className:\"users-list-wrapper media-list\"},renderMails)))),/*#__PURE__*/React.createElement(EmailDetails,{handleEmailDetails:this.handleEmailDetails,currentStatus:this.state.emailDetailsVisibility,currentEmail:this.state.currentEmail,toggleStarred:this.props.StarEmail,setLabel:this.props.setLabel,unreadMails:this.props.unreadMails,currentParam:this.props.routerProps.match.params,moveMail:this.props.moveMail,handleNextMail:this.handleNextMail,handlePreviousMail:this.handlePreviousMail})));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.email.params!==state.currentFilter){return{mails:props.email.mails};}// Return null if the state hasn't changed\nreturn null;}}]);return EmailList;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{email:state.emailApp.mails,starred:state.emailApp.starred};};export default connect(mapStateToProps,{getEmails:getEmails,StarEmail:StarEmail,searchMail:searchMail,moveMail:moveMail,selectMail:selectMail,selectAllMails:selectAllMails,deselectAllMails:deselectAllMails,unreadMails:unreadMails,setLabel:setLabel})(EmailList);","map":null,"metadata":{},"sourceType":"module"}